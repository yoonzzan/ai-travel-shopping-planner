function Hm(i,r){for(var n=0;n<r.length;n++){const o=r[n];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in i)){const u=Object.getOwnPropertyDescriptor(o,l);u&&Object.defineProperty(i,l,u.get?u:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function Wm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Jm(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var r=i.default;if(typeof r=="function"){var n=function o(){return this instanceof o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),n}var Ya={exports:{}},cs={},Ga={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad;function Km(){if(Ad)return ve;Ad=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=w&&P[w]||P["@@iterator"],typeof P=="function"?P:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,k={};function E(P,R,fe){this.props=P,this.context=R,this.refs=k,this.updater=fe||v}E.prototype.isReactComponent={},E.prototype.setState=function(P,R){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,R,"setState")},E.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function D(){}D.prototype=E.prototype;function L(P,R,fe){this.props=P,this.context=R,this.refs=k,this.updater=fe||v}var I=L.prototype=new D;I.constructor=L,N(I,E.prototype),I.isPureReactComponent=!0;var H=Array.isArray,ne=Object.prototype.hasOwnProperty,F={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function ce(P,R,fe){var me,ye={},we=null,Se=null;if(R!=null)for(me in R.ref!==void 0&&(Se=R.ref),R.key!==void 0&&(we=""+R.key),R)ne.call(R,me)&&!W.hasOwnProperty(me)&&(ye[me]=R[me]);var je=arguments.length-2;if(je===1)ye.children=fe;else if(1<je){for(var Oe=Array(je),ct=0;ct<je;ct++)Oe[ct]=arguments[ct+2];ye.children=Oe}if(P&&P.defaultProps)for(me in je=P.defaultProps,je)ye[me]===void 0&&(ye[me]=je[me]);return{$$typeof:i,type:P,key:we,ref:Se,props:ye,_owner:F.current}}function ge(P,R){return{$$typeof:i,type:P.type,key:R,ref:P.ref,props:P.props,_owner:P._owner}}function J(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function ue(P){var R={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(fe){return R[fe]})}var se=/\/+/g;function z(P,R){return typeof P=="object"&&P!==null&&P.key!=null?ue(""+P.key):R.toString(36)}function ae(P,R,fe,me,ye){var we=typeof P;(we==="undefined"||we==="boolean")&&(P=null);var Se=!1;if(P===null)Se=!0;else switch(we){case"string":case"number":Se=!0;break;case"object":switch(P.$$typeof){case i:case r:Se=!0}}if(Se)return Se=P,ye=ye(Se),P=me===""?"."+z(Se,0):me,H(ye)?(fe="",P!=null&&(fe=P.replace(se,"$&/")+"/"),ae(ye,R,fe,"",function(ct){return ct})):ye!=null&&(J(ye)&&(ye=ge(ye,fe+(!ye.key||Se&&Se.key===ye.key?"":(""+ye.key).replace(se,"$&/")+"/")+P)),R.push(ye)),1;if(Se=0,me=me===""?".":me+":",H(P))for(var je=0;je<P.length;je++){we=P[je];var Oe=me+z(we,je);Se+=ae(we,R,fe,Oe,ye)}else if(Oe=b(P),typeof Oe=="function")for(P=Oe.call(P),je=0;!(we=P.next()).done;)we=we.value,Oe=me+z(we,je++),Se+=ae(we,R,fe,Oe,ye);else if(we==="object")throw R=String(P),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return Se}function he(P,R,fe){if(P==null)return P;var me=[],ye=0;return ae(P,me,"","",function(we){return R.call(fe,we,ye++)}),me}function pe(P){if(P._status===-1){var R=P._result;R=R(),R.then(function(fe){(P._status===0||P._status===-1)&&(P._status=1,P._result=fe)},function(fe){(P._status===0||P._status===-1)&&(P._status=2,P._result=fe)}),P._status===-1&&(P._status=0,P._result=R)}if(P._status===1)return P._result.default;throw P._result}var Q={current:null},A={transition:null},Y={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:A,ReactCurrentOwner:F};function V(){throw Error("act(...) is not supported in production builds of React.")}return ve.Children={map:he,forEach:function(P,R,fe){he(P,function(){R.apply(this,arguments)},fe)},count:function(P){var R=0;return he(P,function(){R++}),R},toArray:function(P){return he(P,function(R){return R})||[]},only:function(P){if(!J(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},ve.Component=E,ve.Fragment=n,ve.Profiler=l,ve.PureComponent=L,ve.StrictMode=o,ve.Suspense=m,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,ve.act=V,ve.cloneElement=function(P,R,fe){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var me=N({},P.props),ye=P.key,we=P.ref,Se=P._owner;if(R!=null){if(R.ref!==void 0&&(we=R.ref,Se=F.current),R.key!==void 0&&(ye=""+R.key),P.type&&P.type.defaultProps)var je=P.type.defaultProps;for(Oe in R)ne.call(R,Oe)&&!W.hasOwnProperty(Oe)&&(me[Oe]=R[Oe]===void 0&&je!==void 0?je[Oe]:R[Oe])}var Oe=arguments.length-2;if(Oe===1)me.children=fe;else if(1<Oe){je=Array(Oe);for(var ct=0;ct<Oe;ct++)je[ct]=arguments[ct+2];me.children=je}return{$$typeof:i,type:P.type,key:ye,ref:we,props:me,_owner:Se}},ve.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:u,_context:P},P.Consumer=P},ve.createElement=ce,ve.createFactory=function(P){var R=ce.bind(null,P);return R.type=P,R},ve.createRef=function(){return{current:null}},ve.forwardRef=function(P){return{$$typeof:p,render:P}},ve.isValidElement=J,ve.lazy=function(P){return{$$typeof:x,_payload:{_status:-1,_result:P},_init:pe}},ve.memo=function(P,R){return{$$typeof:y,type:P,compare:R===void 0?null:R}},ve.startTransition=function(P){var R=A.transition;A.transition={};try{P()}finally{A.transition=R}},ve.unstable_act=V,ve.useCallback=function(P,R){return Q.current.useCallback(P,R)},ve.useContext=function(P){return Q.current.useContext(P)},ve.useDebugValue=function(){},ve.useDeferredValue=function(P){return Q.current.useDeferredValue(P)},ve.useEffect=function(P,R){return Q.current.useEffect(P,R)},ve.useId=function(){return Q.current.useId()},ve.useImperativeHandle=function(P,R,fe){return Q.current.useImperativeHandle(P,R,fe)},ve.useInsertionEffect=function(P,R){return Q.current.useInsertionEffect(P,R)},ve.useLayoutEffect=function(P,R){return Q.current.useLayoutEffect(P,R)},ve.useMemo=function(P,R){return Q.current.useMemo(P,R)},ve.useReducer=function(P,R,fe){return Q.current.useReducer(P,R,fe)},ve.useRef=function(P){return Q.current.useRef(P)},ve.useState=function(P){return Q.current.useState(P)},ve.useSyncExternalStore=function(P,R,fe){return Q.current.useSyncExternalStore(P,R,fe)},ve.useTransition=function(){return Q.current.useTransition()},ve.version="18.3.1",ve}var Id;function jl(){return Id||(Id=1,Ga.exports=Km()),Ga.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd;function qm(){if(Dd)return cs;Dd=1;var i=jl(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(p,m,y){var x,w={},b=null,v=null;y!==void 0&&(b=""+y),m.key!==void 0&&(b=""+m.key),m.ref!==void 0&&(v=m.ref);for(x in m)o.call(m,x)&&!u.hasOwnProperty(x)&&(w[x]=m[x]);if(p&&p.defaultProps)for(x in m=p.defaultProps,m)w[x]===void 0&&(w[x]=m[x]);return{$$typeof:r,type:p,key:b,ref:v,props:w,_owner:l.current}}return cs.Fragment=n,cs.jsx=d,cs.jsxs=d,cs}var Ld;function Ym(){return Ld||(Ld=1,Ya.exports=qm()),Ya.exports}var h=Ym(),Di={},Qa={exports:{}},ut={},Xa={exports:{}},Za={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d;function Gm(){return $d||($d=1,(function(i){function r(A,Y){var V=A.length;A.push(Y);e:for(;0<V;){var P=V-1>>>1,R=A[P];if(0<l(R,Y))A[P]=Y,A[V]=R,V=P;else break e}}function n(A){return A.length===0?null:A[0]}function o(A){if(A.length===0)return null;var Y=A[0],V=A.pop();if(V!==Y){A[0]=V;e:for(var P=0,R=A.length,fe=R>>>1;P<fe;){var me=2*(P+1)-1,ye=A[me],we=me+1,Se=A[we];if(0>l(ye,V))we<R&&0>l(Se,ye)?(A[P]=Se,A[we]=V,P=we):(A[P]=ye,A[me]=V,P=me);else if(we<R&&0>l(Se,V))A[P]=Se,A[we]=V,P=we;else break e}}return Y}function l(A,Y){var V=A.sortIndex-Y.sortIndex;return V!==0?V:A.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();i.unstable_now=function(){return d.now()-p}}var m=[],y=[],x=1,w=null,b=3,v=!1,N=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(A){for(var Y=n(y);Y!==null;){if(Y.callback===null)o(y);else if(Y.startTime<=A)o(y),Y.sortIndex=Y.expirationTime,r(m,Y);else break;Y=n(y)}}function H(A){if(k=!1,I(A),!N)if(n(m)!==null)N=!0,pe(ne);else{var Y=n(y);Y!==null&&Q(H,Y.startTime-A)}}function ne(A,Y){N=!1,k&&(k=!1,D(ce),ce=-1),v=!0;var V=b;try{for(I(Y),w=n(m);w!==null&&(!(w.expirationTime>Y)||A&&!ue());){var P=w.callback;if(typeof P=="function"){w.callback=null,b=w.priorityLevel;var R=P(w.expirationTime<=Y);Y=i.unstable_now(),typeof R=="function"?w.callback=R:w===n(m)&&o(m),I(Y)}else o(m);w=n(m)}if(w!==null)var fe=!0;else{var me=n(y);me!==null&&Q(H,me.startTime-Y),fe=!1}return fe}finally{w=null,b=V,v=!1}}var F=!1,W=null,ce=-1,ge=5,J=-1;function ue(){return!(i.unstable_now()-J<ge)}function se(){if(W!==null){var A=i.unstable_now();J=A;var Y=!0;try{Y=W(!0,A)}finally{Y?z():(F=!1,W=null)}}else F=!1}var z;if(typeof L=="function")z=function(){L(se)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,he=ae.port2;ae.port1.onmessage=se,z=function(){he.postMessage(null)}}else z=function(){E(se,0)};function pe(A){W=A,F||(F=!0,z())}function Q(A,Y){ce=E(function(){A(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(A){A.callback=null},i.unstable_continueExecution=function(){N||v||(N=!0,pe(ne))},i.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<A?Math.floor(1e3/A):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return n(m)},i.unstable_next=function(A){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var V=b;b=Y;try{return A()}finally{b=V}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(A,Y){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=b;b=A;try{return Y()}finally{b=V}},i.unstable_scheduleCallback=function(A,Y,V){var P=i.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?P+V:P):V=P,A){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=V+R,A={id:x++,callback:Y,priorityLevel:A,startTime:V,expirationTime:R,sortIndex:-1},V>P?(A.sortIndex=V,r(y,A),n(m)===null&&A===n(y)&&(k?(D(ce),ce=-1):k=!0,Q(H,V-P))):(A.sortIndex=R,r(m,A),N||v||(N=!0,pe(ne))),A},i.unstable_shouldYield=ue,i.unstable_wrapCallback=function(A){var Y=b;return function(){var V=b;b=Y;try{return A.apply(this,arguments)}finally{b=V}}}})(Za)),Za}var Ud;function Qm(){return Ud||(Ud=1,Xa.exports=Gm()),Xa.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Md;function Xm(){if(Md)return ut;Md=1;var i=jl(),r=Qm();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},w={};function b(e){return m.call(w,e)?!0:m.call(x,e)?!1:y.test(e)?w[e]=!0:(x[e]=!0,!1)}function v(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N(e,t,s,a){if(t===null||typeof t>"u"||v(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function k(e,t,s,a,c,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new k(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];E[t]=new k(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new k(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new k(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new k(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new k(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new k(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new k(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new k(e,5,!1,e.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function L(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(D,L);E[t]=new k(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(D,L);E[t]=new k(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(D,L);E[t]=new k(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new k(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new k(e,1,!1,e.toLowerCase(),null,!0,!0)});function I(e,t,s,a){var c=E.hasOwnProperty(t)?E[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(N(t,s,c,a)&&(s=null),a||c===null?b(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):c.mustUseProperty?e[c.propertyName]=s===null?c.type===3?!1:"":s:(t=c.attributeName,a=c.attributeNamespace,s===null?e.removeAttribute(t):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var H=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),F=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),ue=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),A=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=A&&e[A]||e["@@iterator"],typeof e=="function"?e:null)}var V=Object.assign,P;function R(e){if(P===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return`
`+P+e}var fe=!1;function me(e,t){if(!e||fe)return"";fe=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var a=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){a=T}e.call(t.prototype)}else{try{throw Error()}catch(T){a=T}e()}}catch(T){if(T&&a&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),f=a.stack.split(`
`),g=c.length-1,_=f.length-1;1<=g&&0<=_&&c[g]!==f[_];)_--;for(;1<=g&&0<=_;g--,_--)if(c[g]!==f[_]){if(g!==1||_!==1)do if(g--,_--,0>_||c[g]!==f[_]){var S=`
`+c[g].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=g&&0<=_);break}}}finally{fe=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?R(e):""}function ye(e){switch(e.tag){case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return e=me(e.type,!1),e;case 11:return e=me(e.type.render,!1),e;case 1:return e=me(e.type,!0),e;default:return""}}function we(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case F:return"Portal";case ge:return"Profiler";case ce:return"StrictMode";case z:return"Suspense";case ae:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ue:return(e.displayName||"Context")+".Consumer";case J:return(e._context.displayName||"Context")+".Provider";case se:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case he:return t=e.displayName||null,t!==null?t:we(e.type)||"Memo";case pe:t=e._payload,e=e._init;try{return we(e(t))}catch{}}return null}function Se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(t);case 8:return t===ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function je(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ct(e){var t=Oe(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ks(e){e._valueTracker||(e._valueTracker=ct(e))}function Ml(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=Oe(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function Es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function to(e,t){var s=t.checked;return V({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Bl(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=je(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fl(e,t){t=t.checked,t!=null&&I(e,"checked",t,!1)}function ro(e,t){Fl(e,t);var s=je(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?no(e,t.type,s):t.hasOwnProperty("defaultValue")&&no(e,t.type,je(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zl(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function no(e,t,s){(t!=="number"||Es(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var kn=Array.isArray;function Fr(e,t,s,a){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&a&&(e[s].defaultSelected=!0)}else{for(s=""+je(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function so(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return V({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vl(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(n(92));if(kn(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:je(s)}}function Hl(e,t){var s=je(t.value),a=je(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Wl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Jl(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function io(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Jl(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ns,Kl=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ns=Ns||document.createElement("div"),Ns.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ns.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function En(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Nn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qf=["Webkit","ms","Moz","O"];Object.keys(Nn).forEach(function(e){qf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nn[t]=Nn[e]})});function ql(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Nn.hasOwnProperty(e)&&Nn[e]?(""+t).trim():t+"px"}function Yl(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,c=ql(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,c):e[s]=c}}var Yf=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oo(e,t){if(t){if(Yf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function ao(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lo=null;function uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var co=null,zr=null,Vr=null;function Gl(e){if(e=Yn(e)){if(typeof co!="function")throw Error(n(280));var t=e.stateNode;t&&(t=Gs(t),co(e.stateNode,e.type,t))}}function Ql(e){zr?Vr?Vr.push(e):Vr=[e]:zr=e}function Xl(){if(zr){var e=zr,t=Vr;if(Vr=zr=null,Gl(e),t)for(e=0;e<t.length;e++)Gl(t[e])}}function Zl(e,t){return e(t)}function eu(){}var ho=!1;function tu(e,t,s){if(ho)return e(t,s);ho=!0;try{return Zl(e,t,s)}finally{ho=!1,(zr!==null||Vr!==null)&&(eu(),Xl())}}function Pn(e,t){var s=e.stateNode;if(s===null)return null;var a=Gs(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(n(231,t,typeof s));return s}var fo=!1;if(p)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){fo=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{fo=!1}function Gf(e,t,s,a,c,f,g,_,S){var T=Array.prototype.slice.call(arguments,3);try{t.apply(s,T)}catch(U){this.onError(U)}}var On=!1,Ps=null,Cs=!1,po=null,Qf={onError:function(e){On=!0,Ps=e}};function Xf(e,t,s,a,c,f,g,_,S){On=!1,Ps=null,Gf.apply(Qf,arguments)}function Zf(e,t,s,a,c,f,g,_,S){if(Xf.apply(this,arguments),On){if(On){var T=Ps;On=!1,Ps=null}else throw Error(n(198));Cs||(Cs=!0,po=T)}}function wr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function ru(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nu(e){if(wr(e)!==e)throw Error(n(188))}function ep(e){var t=e.alternate;if(!t){if(t=wr(e),t===null)throw Error(n(188));return t!==e?null:e}for(var s=e,a=t;;){var c=s.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){s=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===s)return nu(c),e;if(f===a)return nu(c),t;f=f.sibling}throw Error(n(188))}if(s.return!==a.return)s=c,a=f;else{for(var g=!1,_=c.child;_;){if(_===s){g=!0,s=c,a=f;break}if(_===a){g=!0,a=c,s=f;break}_=_.sibling}if(!g){for(_=f.child;_;){if(_===s){g=!0,s=f,a=c;break}if(_===a){g=!0,a=f,s=c;break}_=_.sibling}if(!g)throw Error(n(189))}}if(s.alternate!==a)throw Error(n(190))}if(s.tag!==3)throw Error(n(188));return s.stateNode.current===s?e:t}function su(e){return e=ep(e),e!==null?iu(e):null}function iu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iu(e);if(t!==null)return t;e=e.sibling}return null}var ou=r.unstable_scheduleCallback,au=r.unstable_cancelCallback,tp=r.unstable_shouldYield,rp=r.unstable_requestPaint,Le=r.unstable_now,np=r.unstable_getCurrentPriorityLevel,mo=r.unstable_ImmediatePriority,lu=r.unstable_UserBlockingPriority,Os=r.unstable_NormalPriority,sp=r.unstable_LowPriority,uu=r.unstable_IdlePriority,Ts=null,Dt=null;function ip(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Ts,e,void 0,(e.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:lp,op=Math.log,ap=Math.LN2;function lp(e){return e>>>=0,e===0?32:31-(op(e)/ap|0)|0}var Rs=64,As=4194304;function Tn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Is(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,g=s&268435455;if(g!==0){var _=g&~c;_!==0?a=Tn(_):(f&=g,f!==0&&(a=Tn(f)))}else g=s&~c,g!==0?a=Tn(g):f!==0&&(a=Tn(f));if(a===0)return 0;if(t!==0&&t!==a&&(t&c)===0&&(c=a&-a,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if((a&4)!==0&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-kt(t),c=1<<s,a|=e[s],t&=~c;return a}function up(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cp(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-kt(f),_=1<<g,S=c[g];S===-1?((_&s)===0||(_&a)!==0)&&(c[g]=up(_,t)):S<=t&&(e.expiredLanes|=_),f&=~_}}function go(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cu(){var e=Rs;return Rs<<=1,(Rs&4194240)===0&&(Rs=64),e}function yo(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Rn(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kt(t),e[t]=s}function dp(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-kt(s),f=1<<c;t[c]=0,a[c]=-1,e[c]=-1,s&=~f}}function vo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-kt(s),c=1<<a;c&t|e[a]&t&&(e[a]|=t),s&=~c}}var ke=0;function du(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var hu,wo,fu,pu,mu,xo=!1,Ds=[],Yt=null,Gt=null,Qt=null,An=new Map,In=new Map,Xt=[],hp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gu(e,t){switch(e){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":An.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(t.pointerId)}}function Dn(e,t,s,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Yn(t),t!==null&&wo(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function fp(e,t,s,a,c){switch(t){case"focusin":return Yt=Dn(Yt,e,t,s,a,c),!0;case"dragenter":return Gt=Dn(Gt,e,t,s,a,c),!0;case"mouseover":return Qt=Dn(Qt,e,t,s,a,c),!0;case"pointerover":var f=c.pointerId;return An.set(f,Dn(An.get(f)||null,e,t,s,a,c)),!0;case"gotpointercapture":return f=c.pointerId,In.set(f,Dn(In.get(f)||null,e,t,s,a,c)),!0}return!1}function yu(e){var t=xr(e.target);if(t!==null){var s=wr(t);if(s!==null){if(t=s.tag,t===13){if(t=ru(s),t!==null){e.blockedOn=t,mu(e.priority,function(){fu(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ls(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=bo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);lo=a,s.target.dispatchEvent(a),lo=null}else return t=Yn(s),t!==null&&wo(t),e.blockedOn=s,!1;t.shift()}return!0}function vu(e,t,s){Ls(e)&&s.delete(t)}function pp(){xo=!1,Yt!==null&&Ls(Yt)&&(Yt=null),Gt!==null&&Ls(Gt)&&(Gt=null),Qt!==null&&Ls(Qt)&&(Qt=null),An.forEach(vu),In.forEach(vu)}function Ln(e,t){e.blockedOn===t&&(e.blockedOn=null,xo||(xo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pp)))}function $n(e){function t(c){return Ln(c,e)}if(0<Ds.length){Ln(Ds[0],e);for(var s=1;s<Ds.length;s++){var a=Ds[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Yt!==null&&Ln(Yt,e),Gt!==null&&Ln(Gt,e),Qt!==null&&Ln(Qt,e),An.forEach(t),In.forEach(t),s=0;s<Xt.length;s++)a=Xt[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Xt.length&&(s=Xt[0],s.blockedOn===null);)yu(s),s.blockedOn===null&&Xt.shift()}var Hr=H.ReactCurrentBatchConfig,$s=!0;function mp(e,t,s,a){var c=ke,f=Hr.transition;Hr.transition=null;try{ke=1,_o(e,t,s,a)}finally{ke=c,Hr.transition=f}}function gp(e,t,s,a){var c=ke,f=Hr.transition;Hr.transition=null;try{ke=4,_o(e,t,s,a)}finally{ke=c,Hr.transition=f}}function _o(e,t,s,a){if($s){var c=bo(e,t,s,a);if(c===null)Mo(e,t,a,Us,s),gu(e,a);else if(fp(c,e,t,s,a))a.stopPropagation();else if(gu(e,a),t&4&&-1<hp.indexOf(e)){for(;c!==null;){var f=Yn(c);if(f!==null&&hu(f),f=bo(e,t,s,a),f===null&&Mo(e,t,a,Us,s),f===c)break;c=f}c!==null&&a.stopPropagation()}else Mo(e,t,a,null,s)}}var Us=null;function bo(e,t,s,a){if(Us=null,e=uo(a),e=xr(e),e!==null)if(t=wr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=ru(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Us=e,null}function wu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(np()){case mo:return 1;case lu:return 4;case Os:case sp:return 16;case uu:return 536870912;default:return 16}default:return 16}}var Zt=null,So=null,Ms=null;function xu(){if(Ms)return Ms;var e,t=So,s=t.length,a,c="value"in Zt?Zt.value:Zt.textContent,f=c.length;for(e=0;e<s&&t[e]===c[e];e++);var g=s-e;for(a=1;a<=g&&t[s-a]===c[f-a];a++);return Ms=c.slice(e,1<a?1-a:void 0)}function Bs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fs(){return!0}function _u(){return!1}function dt(e){function t(s,a,c,f,g){this._reactName=s,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Fs:_u,this.isPropagationStopped=_u,this}return V(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Fs)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Fs)},persist:function(){},isPersistent:Fs}),t}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=dt(Wr),Un=V({},Wr,{view:0,detail:0}),yp=dt(Un),ko,Eo,Mn,zs=V({},Un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Po,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mn&&(Mn&&e.type==="mousemove"?(ko=e.screenX-Mn.screenX,Eo=e.screenY-Mn.screenY):Eo=ko=0,Mn=e),ko)},movementY:function(e){return"movementY"in e?e.movementY:Eo}}),bu=dt(zs),vp=V({},zs,{dataTransfer:0}),wp=dt(vp),xp=V({},Un,{relatedTarget:0}),No=dt(xp),_p=V({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),bp=dt(_p),Sp=V({},Wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jp=dt(Sp),kp=V({},Wr,{data:0}),Su=dt(kp),Ep={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Np={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pp[e])?!!t[e]:!1}function Po(){return Cp}var Op=V({},Un,{key:function(e){if(e.key){var t=Ep[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Np[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Po,charCode:function(e){return e.type==="keypress"?Bs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tp=dt(Op),Rp=V({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=dt(Rp),Ap=V({},Un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Po}),Ip=dt(Ap),Dp=V({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lp=dt(Dp),$p=V({},zs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Up=dt($p),Mp=[9,13,27,32],Co=p&&"CompositionEvent"in window,Bn=null;p&&"documentMode"in document&&(Bn=document.documentMode);var Bp=p&&"TextEvent"in window&&!Bn,ku=p&&(!Co||Bn&&8<Bn&&11>=Bn),Eu=" ",Nu=!1;function Pu(e,t){switch(e){case"keyup":return Mp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jr=!1;function Fp(e,t){switch(e){case"compositionend":return Cu(t);case"keypress":return t.which!==32?null:(Nu=!0,Eu);case"textInput":return e=t.data,e===Eu&&Nu?null:e;default:return null}}function zp(e,t){if(Jr)return e==="compositionend"||!Co&&Pu(e,t)?(e=xu(),Ms=So=Zt=null,Jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ku&&t.locale!=="ko"?null:t.data;default:return null}}var Vp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vp[e.type]:t==="textarea"}function Tu(e,t,s,a){Ql(a),t=Ks(t,"onChange"),0<t.length&&(s=new jo("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Fn=null,zn=null;function Hp(e){Yu(e,0)}function Vs(e){var t=Qr(e);if(Ml(t))return e}function Wp(e,t){if(e==="change")return t}var Ru=!1;if(p){var Oo;if(p){var To="oninput"in document;if(!To){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),To=typeof Au.oninput=="function"}Oo=To}else Oo=!1;Ru=Oo&&(!document.documentMode||9<document.documentMode)}function Iu(){Fn&&(Fn.detachEvent("onpropertychange",Du),zn=Fn=null)}function Du(e){if(e.propertyName==="value"&&Vs(zn)){var t=[];Tu(t,zn,e,uo(e)),tu(Hp,t)}}function Jp(e,t,s){e==="focusin"?(Iu(),Fn=t,zn=s,Fn.attachEvent("onpropertychange",Du)):e==="focusout"&&Iu()}function Kp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vs(zn)}function qp(e,t){if(e==="click")return Vs(t)}function Yp(e,t){if(e==="input"||e==="change")return Vs(t)}function Gp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:Gp;function Vn(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var c=s[a];if(!m.call(t,c)||!Et(e[c],t[c]))return!1}return!0}function Lu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $u(e,t){var s=Lu(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Lu(s)}}function Uu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mu(){for(var e=window,t=Es();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Es(e.document)}return t}function Ro(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qp(e){var t=Mu(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Uu(s.ownerDocument.documentElement,s)){if(a!==null&&Ro(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=s.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=$u(s,f);var g=$u(s,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xp=p&&"documentMode"in document&&11>=document.documentMode,Kr=null,Ao=null,Hn=null,Io=!1;function Bu(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Io||Kr==null||Kr!==Es(a)||(a=Kr,"selectionStart"in a&&Ro(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Hn&&Vn(Hn,a)||(Hn=a,a=Ks(Ao,"onSelect"),0<a.length&&(t=new jo("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Kr)))}function Hs(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var qr={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionend:Hs("Transition","TransitionEnd")},Do={},Fu={};p&&(Fu=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function Ws(e){if(Do[e])return Do[e];if(!qr[e])return e;var t=qr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Fu)return Do[e]=t[s];return e}var zu=Ws("animationend"),Vu=Ws("animationiteration"),Hu=Ws("animationstart"),Wu=Ws("transitionend"),Ju=new Map,Ku="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(e,t){Ju.set(e,t),u(t,[e])}for(var Lo=0;Lo<Ku.length;Lo++){var $o=Ku[Lo],Zp=$o.toLowerCase(),em=$o[0].toUpperCase()+$o.slice(1);er(Zp,"on"+em)}er(zu,"onAnimationEnd"),er(Vu,"onAnimationIteration"),er(Hu,"onAnimationStart"),er("dblclick","onDoubleClick"),er("focusin","onFocus"),er("focusout","onBlur"),er(Wu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wn));function qu(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,Zf(a,t,void 0,e),e.currentTarget=null}function Yu(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var g=a.length-1;0<=g;g--){var _=a[g],S=_.instance,T=_.currentTarget;if(_=_.listener,S!==f&&c.isPropagationStopped())break e;qu(c,_,T),f=S}else for(g=0;g<a.length;g++){if(_=a[g],S=_.instance,T=_.currentTarget,_=_.listener,S!==f&&c.isPropagationStopped())break e;qu(c,_,T),f=S}}}if(Cs)throw e=po,Cs=!1,po=null,e}function Pe(e,t){var s=t[Wo];s===void 0&&(s=t[Wo]=new Set);var a=e+"__bubble";s.has(a)||(Gu(t,e,2,!1),s.add(a))}function Uo(e,t,s){var a=0;t&&(a|=4),Gu(s,e,a,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function Jn(e){if(!e[Js]){e[Js]=!0,o.forEach(function(s){s!=="selectionchange"&&(tm.has(s)||Uo(s,!1,e),Uo(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,Uo("selectionchange",!1,t))}}function Gu(e,t,s,a){switch(wu(t)){case 1:var c=mp;break;case 4:c=gp;break;default:c=_o}s=c.bind(null,t,s,e),c=void 0,!fo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function Mo(e,t,s,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var _=a.stateNode.containerInfo;if(_===c||_.nodeType===8&&_.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var S=g.tag;if((S===3||S===4)&&(S=g.stateNode.containerInfo,S===c||S.nodeType===8&&S.parentNode===c))return;g=g.return}for(;_!==null;){if(g=xr(_),g===null)return;if(S=g.tag,S===5||S===6){a=f=g;continue e}_=_.parentNode}}a=a.return}tu(function(){var T=f,U=uo(s),M=[];e:{var $=Ju.get(e);if($!==void 0){var K=jo,G=e;switch(e){case"keypress":if(Bs(s)===0)break e;case"keydown":case"keyup":K=Tp;break;case"focusin":G="focus",K=No;break;case"focusout":G="blur",K=No;break;case"beforeblur":case"afterblur":K=No;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Ip;break;case zu:case Vu:case Hu:K=bp;break;case Wu:K=Lp;break;case"scroll":K=yp;break;case"wheel":K=Up;break;case"copy":case"cut":case"paste":K=jp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ju}var X=(t&4)!==0,$e=!X&&e==="scroll",C=X?$!==null?$+"Capture":null:$;X=[];for(var j=T,O;j!==null;){O=j;var B=O.stateNode;if(O.tag===5&&B!==null&&(O=B,C!==null&&(B=Pn(j,C),B!=null&&X.push(Kn(j,B,O)))),$e)break;j=j.return}0<X.length&&($=new K($,G,null,s,U),M.push({event:$,listeners:X}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",$&&s!==lo&&(G=s.relatedTarget||s.fromElement)&&(xr(G)||G[Bt]))break e;if((K||$)&&($=U.window===U?U:($=U.ownerDocument)?$.defaultView||$.parentWindow:window,K?(G=s.relatedTarget||s.toElement,K=T,G=G?xr(G):null,G!==null&&($e=wr(G),G!==$e||G.tag!==5&&G.tag!==6)&&(G=null)):(K=null,G=T),K!==G)){if(X=bu,B="onMouseLeave",C="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(X=ju,B="onPointerLeave",C="onPointerEnter",j="pointer"),$e=K==null?$:Qr(K),O=G==null?$:Qr(G),$=new X(B,j+"leave",K,s,U),$.target=$e,$.relatedTarget=O,B=null,xr(U)===T&&(X=new X(C,j+"enter",G,s,U),X.target=O,X.relatedTarget=$e,B=X),$e=B,K&&G)t:{for(X=K,C=G,j=0,O=X;O;O=Yr(O))j++;for(O=0,B=C;B;B=Yr(B))O++;for(;0<j-O;)X=Yr(X),j--;for(;0<O-j;)C=Yr(C),O--;for(;j--;){if(X===C||C!==null&&X===C.alternate)break t;X=Yr(X),C=Yr(C)}X=null}else X=null;K!==null&&Qu(M,$,K,X,!1),G!==null&&$e!==null&&Qu(M,$e,G,X,!0)}}e:{if($=T?Qr(T):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var Z=Wp;else if(Ou($))if(Ru)Z=Yp;else{Z=Kp;var ie=Jp}else(K=$.nodeName)&&K.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Z=qp);if(Z&&(Z=Z(e,T))){Tu(M,Z,s,U);break e}ie&&ie(e,$,T),e==="focusout"&&(ie=$._wrapperState)&&ie.controlled&&$.type==="number"&&no($,"number",$.value)}switch(ie=T?Qr(T):window,e){case"focusin":(Ou(ie)||ie.contentEditable==="true")&&(Kr=ie,Ao=T,Hn=null);break;case"focusout":Hn=Ao=Kr=null;break;case"mousedown":Io=!0;break;case"contextmenu":case"mouseup":case"dragend":Io=!1,Bu(M,s,U);break;case"selectionchange":if(Xp)break;case"keydown":case"keyup":Bu(M,s,U)}var oe;if(Co)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Jr?Pu(e,s)&&(de="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(de="onCompositionStart");de&&(ku&&s.locale!=="ko"&&(Jr||de!=="onCompositionStart"?de==="onCompositionEnd"&&Jr&&(oe=xu()):(Zt=U,So="value"in Zt?Zt.value:Zt.textContent,Jr=!0)),ie=Ks(T,de),0<ie.length&&(de=new Su(de,e,null,s,U),M.push({event:de,listeners:ie}),oe?de.data=oe:(oe=Cu(s),oe!==null&&(de.data=oe)))),(oe=Bp?Fp(e,s):zp(e,s))&&(T=Ks(T,"onBeforeInput"),0<T.length&&(U=new Su("onBeforeInput","beforeinput",null,s,U),M.push({event:U,listeners:T}),U.data=oe))}Yu(M,t)})}function Kn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Ks(e,t){for(var s=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Pn(e,s),f!=null&&a.unshift(Kn(e,f,c)),f=Pn(e,t),f!=null&&a.push(Kn(e,f,c))),e=e.return}return a}function Yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qu(e,t,s,a,c){for(var f=t._reactName,g=[];s!==null&&s!==a;){var _=s,S=_.alternate,T=_.stateNode;if(S!==null&&S===a)break;_.tag===5&&T!==null&&(_=T,c?(S=Pn(s,f),S!=null&&g.unshift(Kn(s,S,_))):c||(S=Pn(s,f),S!=null&&g.push(Kn(s,S,_)))),s=s.return}g.length!==0&&e.push({event:t,listeners:g})}var rm=/\r\n?/g,nm=/\u0000|\uFFFD/g;function Xu(e){return(typeof e=="string"?e:""+e).replace(rm,`
`).replace(nm,"")}function qs(e,t,s){if(t=Xu(t),Xu(e)!==t&&s)throw Error(n(425))}function Ys(){}var Bo=null,Fo=null;function zo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vo=typeof setTimeout=="function"?setTimeout:void 0,sm=typeof clearTimeout=="function"?clearTimeout:void 0,Zu=typeof Promise=="function"?Promise:void 0,im=typeof queueMicrotask=="function"?queueMicrotask:typeof Zu<"u"?function(e){return Zu.resolve(null).then(e).catch(om)}:Vo;function om(e){setTimeout(function(){throw e})}function Ho(e,t){var s=t,a=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(a===0){e.removeChild(c),$n(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=c}while(s);$n(t)}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ec(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Gr,qn="__reactProps$"+Gr,Bt="__reactContainer$"+Gr,Wo="__reactEvents$"+Gr,am="__reactListeners$"+Gr,lm="__reactHandles$"+Gr;function xr(e){var t=e[Lt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Bt]||s[Lt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=ec(e);e!==null;){if(s=e[Lt])return s;e=ec(e)}return t}e=s,s=e.parentNode}return null}function Yn(e){return e=e[Lt]||e[Bt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function Gs(e){return e[qn]||null}var Jo=[],Xr=-1;function rr(e){return{current:e}}function Ce(e){0>Xr||(e.current=Jo[Xr],Jo[Xr]=null,Xr--)}function Ee(e,t){Xr++,Jo[Xr]=e.current,e.current=t}var nr={},Ye=rr(nr),st=rr(!1),_r=nr;function Zr(e,t){var s=e.type.contextTypes;if(!s)return nr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in s)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function it(e){return e=e.childContextTypes,e!=null}function Qs(){Ce(st),Ce(Ye)}function tc(e,t,s){if(Ye.current!==nr)throw Error(n(168));Ee(Ye,t),Ee(st,s)}function rc(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(n(108,Se(e)||"Unknown",c));return V({},s,a)}function Xs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nr,_r=Ye.current,Ee(Ye,e),Ee(st,st.current),!0}function nc(e,t,s){var a=e.stateNode;if(!a)throw Error(n(169));s?(e=rc(e,t,_r),a.__reactInternalMemoizedMergedChildContext=e,Ce(st),Ce(Ye),Ee(Ye,e)):Ce(st),Ee(st,s)}var Ft=null,Zs=!1,Ko=!1;function sc(e){Ft===null?Ft=[e]:Ft.push(e)}function um(e){Zs=!0,sc(e)}function sr(){if(!Ko&&Ft!==null){Ko=!0;var e=0,t=ke;try{var s=Ft;for(ke=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}Ft=null,Zs=!1}catch(c){throw Ft!==null&&(Ft=Ft.slice(e+1)),ou(mo,sr),c}finally{ke=t,Ko=!1}}return null}var en=[],tn=0,ei=null,ti=0,vt=[],wt=0,br=null,zt=1,Vt="";function Sr(e,t){en[tn++]=ti,en[tn++]=ei,ei=e,ti=t}function ic(e,t,s){vt[wt++]=zt,vt[wt++]=Vt,vt[wt++]=br,br=e;var a=zt;e=Vt;var c=32-kt(a)-1;a&=~(1<<c),s+=1;var f=32-kt(t)+c;if(30<f){var g=c-c%5;f=(a&(1<<g)-1).toString(32),a>>=g,c-=g,zt=1<<32-kt(t)+c|s<<c|a,Vt=f+e}else zt=1<<f|s<<c|a,Vt=e}function qo(e){e.return!==null&&(Sr(e,1),ic(e,1,0))}function Yo(e){for(;e===ei;)ei=en[--tn],en[tn]=null,ti=en[--tn],en[tn]=null;for(;e===br;)br=vt[--wt],vt[wt]=null,Vt=vt[--wt],vt[wt]=null,zt=vt[--wt],vt[wt]=null}var ht=null,ft=null,Te=!1,Nt=null;function oc(e,t){var s=St(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function ac(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,ft=tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=br!==null?{id:zt,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=St(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ht=e,ft=null,!0):!1;default:return!1}}function Go(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qo(e){if(Te){var t=ft;if(t){var s=t;if(!ac(e,t)){if(Go(e))throw Error(n(418));t=tr(s.nextSibling);var a=ht;t&&ac(e,t)?oc(a,s):(e.flags=e.flags&-4097|2,Te=!1,ht=e)}}else{if(Go(e))throw Error(n(418));e.flags=e.flags&-4097|2,Te=!1,ht=e}}}function lc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function ri(e){if(e!==ht)return!1;if(!Te)return lc(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zo(e.type,e.memoizedProps)),t&&(t=ft)){if(Go(e))throw uc(),Error(n(418));for(;t;)oc(e,t),t=tr(t.nextSibling)}if(lc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){ft=tr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}ft=null}}else ft=ht?tr(e.stateNode.nextSibling):null;return!0}function uc(){for(var e=ft;e;)e=tr(e.nextSibling)}function rn(){ft=ht=null,Te=!1}function Xo(e){Nt===null?Nt=[e]:Nt.push(e)}var cm=H.ReactCurrentBatchConfig;function Gn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(n(309));var a=s.stateNode}if(!a)throw Error(n(147,e));var c=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var _=c.refs;g===null?delete _[f]:_[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function cc(e){var t=e._init;return t(e._payload)}function dc(e){function t(C,j){if(e){var O=C.deletions;O===null?(C.deletions=[j],C.flags|=16):O.push(j)}}function s(C,j){if(!e)return null;for(;j!==null;)t(C,j),j=j.sibling;return null}function a(C,j){for(C=new Map;j!==null;)j.key!==null?C.set(j.key,j):C.set(j.index,j),j=j.sibling;return C}function c(C,j){return C=hr(C,j),C.index=0,C.sibling=null,C}function f(C,j,O){return C.index=O,e?(O=C.alternate,O!==null?(O=O.index,O<j?(C.flags|=2,j):O):(C.flags|=2,j)):(C.flags|=1048576,j)}function g(C){return e&&C.alternate===null&&(C.flags|=2),C}function _(C,j,O,B){return j===null||j.tag!==6?(j=Va(O,C.mode,B),j.return=C,j):(j=c(j,O),j.return=C,j)}function S(C,j,O,B){var Z=O.type;return Z===W?U(C,j,O.props.children,B,O.key):j!==null&&(j.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===pe&&cc(Z)===j.type)?(B=c(j,O.props),B.ref=Gn(C,j,O),B.return=C,B):(B=Ni(O.type,O.key,O.props,null,C.mode,B),B.ref=Gn(C,j,O),B.return=C,B)}function T(C,j,O,B){return j===null||j.tag!==4||j.stateNode.containerInfo!==O.containerInfo||j.stateNode.implementation!==O.implementation?(j=Ha(O,C.mode,B),j.return=C,j):(j=c(j,O.children||[]),j.return=C,j)}function U(C,j,O,B,Z){return j===null||j.tag!==7?(j=Tr(O,C.mode,B,Z),j.return=C,j):(j=c(j,O),j.return=C,j)}function M(C,j,O){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Va(""+j,C.mode,O),j.return=C,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ne:return O=Ni(j.type,j.key,j.props,null,C.mode,O),O.ref=Gn(C,null,j),O.return=C,O;case F:return j=Ha(j,C.mode,O),j.return=C,j;case pe:var B=j._init;return M(C,B(j._payload),O)}if(kn(j)||Y(j))return j=Tr(j,C.mode,O,null),j.return=C,j;ni(C,j)}return null}function $(C,j,O,B){var Z=j!==null?j.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Z!==null?null:_(C,j,""+O,B);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ne:return O.key===Z?S(C,j,O,B):null;case F:return O.key===Z?T(C,j,O,B):null;case pe:return Z=O._init,$(C,j,Z(O._payload),B)}if(kn(O)||Y(O))return Z!==null?null:U(C,j,O,B,null);ni(C,O)}return null}function K(C,j,O,B,Z){if(typeof B=="string"&&B!==""||typeof B=="number")return C=C.get(O)||null,_(j,C,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ne:return C=C.get(B.key===null?O:B.key)||null,S(j,C,B,Z);case F:return C=C.get(B.key===null?O:B.key)||null,T(j,C,B,Z);case pe:var ie=B._init;return K(C,j,O,ie(B._payload),Z)}if(kn(B)||Y(B))return C=C.get(O)||null,U(j,C,B,Z,null);ni(j,B)}return null}function G(C,j,O,B){for(var Z=null,ie=null,oe=j,de=j=0,We=null;oe!==null&&de<O.length;de++){oe.index>de?(We=oe,oe=null):We=oe.sibling;var be=$(C,oe,O[de],B);if(be===null){oe===null&&(oe=We);break}e&&oe&&be.alternate===null&&t(C,oe),j=f(be,j,de),ie===null?Z=be:ie.sibling=be,ie=be,oe=We}if(de===O.length)return s(C,oe),Te&&Sr(C,de),Z;if(oe===null){for(;de<O.length;de++)oe=M(C,O[de],B),oe!==null&&(j=f(oe,j,de),ie===null?Z=oe:ie.sibling=oe,ie=oe);return Te&&Sr(C,de),Z}for(oe=a(C,oe);de<O.length;de++)We=K(oe,C,de,O[de],B),We!==null&&(e&&We.alternate!==null&&oe.delete(We.key===null?de:We.key),j=f(We,j,de),ie===null?Z=We:ie.sibling=We,ie=We);return e&&oe.forEach(function(fr){return t(C,fr)}),Te&&Sr(C,de),Z}function X(C,j,O,B){var Z=Y(O);if(typeof Z!="function")throw Error(n(150));if(O=Z.call(O),O==null)throw Error(n(151));for(var ie=Z=null,oe=j,de=j=0,We=null,be=O.next();oe!==null&&!be.done;de++,be=O.next()){oe.index>de?(We=oe,oe=null):We=oe.sibling;var fr=$(C,oe,be.value,B);if(fr===null){oe===null&&(oe=We);break}e&&oe&&fr.alternate===null&&t(C,oe),j=f(fr,j,de),ie===null?Z=fr:ie.sibling=fr,ie=fr,oe=We}if(be.done)return s(C,oe),Te&&Sr(C,de),Z;if(oe===null){for(;!be.done;de++,be=O.next())be=M(C,be.value,B),be!==null&&(j=f(be,j,de),ie===null?Z=be:ie.sibling=be,ie=be);return Te&&Sr(C,de),Z}for(oe=a(C,oe);!be.done;de++,be=O.next())be=K(oe,C,de,be.value,B),be!==null&&(e&&be.alternate!==null&&oe.delete(be.key===null?de:be.key),j=f(be,j,de),ie===null?Z=be:ie.sibling=be,ie=be);return e&&oe.forEach(function(Vm){return t(C,Vm)}),Te&&Sr(C,de),Z}function $e(C,j,O,B){if(typeof O=="object"&&O!==null&&O.type===W&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case ne:e:{for(var Z=O.key,ie=j;ie!==null;){if(ie.key===Z){if(Z=O.type,Z===W){if(ie.tag===7){s(C,ie.sibling),j=c(ie,O.props.children),j.return=C,C=j;break e}}else if(ie.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===pe&&cc(Z)===ie.type){s(C,ie.sibling),j=c(ie,O.props),j.ref=Gn(C,ie,O),j.return=C,C=j;break e}s(C,ie);break}else t(C,ie);ie=ie.sibling}O.type===W?(j=Tr(O.props.children,C.mode,B,O.key),j.return=C,C=j):(B=Ni(O.type,O.key,O.props,null,C.mode,B),B.ref=Gn(C,j,O),B.return=C,C=B)}return g(C);case F:e:{for(ie=O.key;j!==null;){if(j.key===ie)if(j.tag===4&&j.stateNode.containerInfo===O.containerInfo&&j.stateNode.implementation===O.implementation){s(C,j.sibling),j=c(j,O.children||[]),j.return=C,C=j;break e}else{s(C,j);break}else t(C,j);j=j.sibling}j=Ha(O,C.mode,B),j.return=C,C=j}return g(C);case pe:return ie=O._init,$e(C,j,ie(O._payload),B)}if(kn(O))return G(C,j,O,B);if(Y(O))return X(C,j,O,B);ni(C,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,j!==null&&j.tag===6?(s(C,j.sibling),j=c(j,O),j.return=C,C=j):(s(C,j),j=Va(O,C.mode,B),j.return=C,C=j),g(C)):s(C,j)}return $e}var nn=dc(!0),hc=dc(!1),si=rr(null),ii=null,sn=null,Zo=null;function ea(){Zo=sn=ii=null}function ta(e){var t=si.current;Ce(si),e._currentValue=t}function ra(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function on(e,t){ii=e,Zo=sn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ot=!0),e.firstContext=null)}function xt(e){var t=e._currentValue;if(Zo!==e)if(e={context:e,memoizedValue:t,next:null},sn===null){if(ii===null)throw Error(n(308));sn=e,ii.dependencies={lanes:0,firstContext:e}}else sn=sn.next=e;return t}var jr=null;function na(e){jr===null?jr=[e]:jr.push(e)}function fc(e,t,s,a){var c=t.interleaved;return c===null?(s.next=s,na(t)):(s.next=c.next,c.next=s),t.interleaved=s,Ht(e,a)}function Ht(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var ir=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function or(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(_e&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Ht(e,s)}return c=a.interleaved,c===null?(t.next=t,na(a)):(t.next=c.next,c.next=t),a.interleaved=t,Ht(e,s)}function oi(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,vo(e,s)}}function mc(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var c=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var g={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?c=f=g:f=f.next=g,s=s.next}while(s!==null);f===null?c=f=t:f=f.next=t}else c=f=t;s={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function ai(e,t,s,a){var c=e.updateQueue;ir=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var S=_,T=S.next;S.next=null,g===null?f=T:g.next=T,g=S;var U=e.alternate;U!==null&&(U=U.updateQueue,_=U.lastBaseUpdate,_!==g&&(_===null?U.firstBaseUpdate=T:_.next=T,U.lastBaseUpdate=S))}if(f!==null){var M=c.baseState;g=0,U=T=S=null,_=f;do{var $=_.lane,K=_.eventTime;if((a&$)===$){U!==null&&(U=U.next={eventTime:K,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var G=e,X=_;switch($=t,K=s,X.tag){case 1:if(G=X.payload,typeof G=="function"){M=G.call(K,M,$);break e}M=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=X.payload,$=typeof G=="function"?G.call(K,M,$):G,$==null)break e;M=V({},M,$);break e;case 2:ir=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,$=c.effects,$===null?c.effects=[_]:$.push(_))}else K={eventTime:K,lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},U===null?(T=U=K,S=M):U=U.next=K,g|=$;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;$=_,_=$.next,$.next=null,c.lastBaseUpdate=$,c.shared.pending=null}}while(!0);if(U===null&&(S=M),c.baseState=S,c.firstBaseUpdate=T,c.lastBaseUpdate=U,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);Nr|=g,e.lanes=g,e.memoizedState=M}}function gc(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=s,typeof c!="function")throw Error(n(191,c));c.call(a)}}}var Qn={},$t=rr(Qn),Xn=rr(Qn),Zn=rr(Qn);function kr(e){if(e===Qn)throw Error(n(174));return e}function ia(e,t){switch(Ee(Zn,t),Ee(Xn,e),Ee($t,Qn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:io(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=io(t,e)}Ce($t),Ee($t,t)}function an(){Ce($t),Ce(Xn),Ce(Zn)}function yc(e){kr(Zn.current);var t=kr($t.current),s=io(t,e.type);t!==s&&(Ee(Xn,e),Ee($t,s))}function oa(e){Xn.current===e&&(Ce($t),Ce(Xn))}var Re=rr(0);function li(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aa=[];function la(){for(var e=0;e<aa.length;e++)aa[e]._workInProgressVersionPrimary=null;aa.length=0}var ui=H.ReactCurrentDispatcher,ua=H.ReactCurrentBatchConfig,Er=0,Ae=null,Be=null,Ve=null,ci=!1,es=!1,ts=0,dm=0;function Ge(){throw Error(n(321))}function ca(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Et(e[s],t[s]))return!1;return!0}function da(e,t,s,a,c,f){if(Er=f,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ui.current=e===null||e.memoizedState===null?mm:gm,e=s(a,c),es){f=0;do{if(es=!1,ts=0,25<=f)throw Error(n(301));f+=1,Ve=Be=null,t.updateQueue=null,ui.current=ym,e=s(a,c)}while(es)}if(ui.current=fi,t=Be!==null&&Be.next!==null,Er=0,Ve=Be=Ae=null,ci=!1,t)throw Error(n(300));return e}function ha(){var e=ts!==0;return ts=0,e}function Ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Ae.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function _t(){if(Be===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Ve===null?Ae.memoizedState:Ve.next;if(t!==null)Ve=t,Be=e;else{if(e===null)throw Error(n(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ve===null?Ae.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function rs(e,t){return typeof t=="function"?t(e):t}function fa(e){var t=_t(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var a=Be,c=a.baseQueue,f=s.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}a.baseQueue=c=f,s.pending=null}if(c!==null){f=c.next,a=a.baseState;var _=g=null,S=null,T=f;do{var U=T.lane;if((Er&U)===U)S!==null&&(S=S.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),a=T.hasEagerState?T.eagerState:e(a,T.action);else{var M={lane:U,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};S===null?(_=S=M,g=a):S=S.next=M,Ae.lanes|=U,Nr|=U}T=T.next}while(T!==null&&T!==f);S===null?g=a:S.next=_,Et(a,t.memoizedState)||(ot=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=S,s.lastRenderedState=a}if(e=s.interleaved,e!==null){c=e;do f=c.lane,Ae.lanes|=f,Nr|=f,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function pa(e){var t=_t(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var a=s.dispatch,c=s.pending,f=t.memoizedState;if(c!==null){s.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);Et(f,t.memoizedState)||(ot=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,a]}function vc(){}function wc(e,t){var s=Ae,a=_t(),c=t(),f=!Et(a.memoizedState,c);if(f&&(a.memoizedState=c,ot=!0),a=a.queue,ma(bc.bind(null,s,a,e),[e]),a.getSnapshot!==t||f||Ve!==null&&Ve.memoizedState.tag&1){if(s.flags|=2048,ns(9,_c.bind(null,s,a,c,t),void 0,null),He===null)throw Error(n(349));(Er&30)!==0||xc(s,t,c)}return c}function xc(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function _c(e,t,s,a){t.value=s,t.getSnapshot=a,Sc(t)&&jc(e)}function bc(e,t,s){return s(function(){Sc(t)&&jc(e)})}function Sc(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Et(e,s)}catch{return!0}}function jc(e){var t=Ht(e,1);t!==null&&Tt(t,e,1,-1)}function kc(e){var t=Ut();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e},t.queue=e,e=e.dispatch=pm.bind(null,Ae,e),[t.memoizedState,e]}function ns(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function Ec(){return _t().memoizedState}function di(e,t,s,a){var c=Ut();Ae.flags|=e,c.memoizedState=ns(1|t,s,void 0,a===void 0?null:a)}function hi(e,t,s,a){var c=_t();a=a===void 0?null:a;var f=void 0;if(Be!==null){var g=Be.memoizedState;if(f=g.destroy,a!==null&&ca(a,g.deps)){c.memoizedState=ns(t,s,f,a);return}}Ae.flags|=e,c.memoizedState=ns(1|t,s,f,a)}function Nc(e,t){return di(8390656,8,e,t)}function ma(e,t){return hi(2048,8,e,t)}function Pc(e,t){return hi(4,2,e,t)}function Cc(e,t){return hi(4,4,e,t)}function Oc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tc(e,t,s){return s=s!=null?s.concat([e]):null,hi(4,4,Oc.bind(null,t,e),s)}function ga(){}function Rc(e,t){var s=_t();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&ca(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Ac(e,t){var s=_t();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&ca(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Ic(e,t,s){return(Er&21)===0?(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=s):(Et(s,t)||(s=cu(),Ae.lanes|=s,Nr|=s,e.baseState=!0),t)}function hm(e,t){var s=ke;ke=s!==0&&4>s?s:4,e(!0);var a=ua.transition;ua.transition={};try{e(!1),t()}finally{ke=s,ua.transition=a}}function Dc(){return _t().memoizedState}function fm(e,t,s){var a=cr(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Lc(e))$c(t,s);else if(s=fc(e,t,s,a),s!==null){var c=nt();Tt(s,e,a,c),Uc(s,t,a)}}function pm(e,t,s){var a=cr(e),c={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Lc(e))$c(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,_=f(g,s);if(c.hasEagerState=!0,c.eagerState=_,Et(_,g)){var S=t.interleaved;S===null?(c.next=c,na(t)):(c.next=S.next,S.next=c),t.interleaved=c;return}}catch{}finally{}s=fc(e,t,c,a),s!==null&&(c=nt(),Tt(s,e,a,c),Uc(s,t,a))}}function Lc(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function $c(e,t){es=ci=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Uc(e,t,s){if((s&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,vo(e,s)}}var fi={readContext:xt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},mm={readContext:xt,useCallback:function(e,t){return Ut().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:Nc,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,di(4194308,4,Oc.bind(null,t,e),s)},useLayoutEffect:function(e,t){return di(4194308,4,e,t)},useInsertionEffect:function(e,t){return di(4,2,e,t)},useMemo:function(e,t){var s=Ut();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=Ut();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=fm.bind(null,Ae,e),[a.memoizedState,e]},useRef:function(e){var t=Ut();return e={current:e},t.memoizedState=e},useState:kc,useDebugValue:ga,useDeferredValue:function(e){return Ut().memoizedState=e},useTransition:function(){var e=kc(!1),t=e[0];return e=hm.bind(null,e[1]),Ut().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=Ae,c=Ut();if(Te){if(s===void 0)throw Error(n(407));s=s()}else{if(s=t(),He===null)throw Error(n(349));(Er&30)!==0||xc(a,t,s)}c.memoizedState=s;var f={value:s,getSnapshot:t};return c.queue=f,Nc(bc.bind(null,a,f,e),[e]),a.flags|=2048,ns(9,_c.bind(null,a,f,s,t),void 0,null),s},useId:function(){var e=Ut(),t=He.identifierPrefix;if(Te){var s=Vt,a=zt;s=(a&~(1<<32-kt(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=ts++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=dm++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gm={readContext:xt,useCallback:Rc,useContext:xt,useEffect:ma,useImperativeHandle:Tc,useInsertionEffect:Pc,useLayoutEffect:Cc,useMemo:Ac,useReducer:fa,useRef:Ec,useState:function(){return fa(rs)},useDebugValue:ga,useDeferredValue:function(e){var t=_t();return Ic(t,Be.memoizedState,e)},useTransition:function(){var e=fa(rs)[0],t=_t().memoizedState;return[e,t]},useMutableSource:vc,useSyncExternalStore:wc,useId:Dc,unstable_isNewReconciler:!1},ym={readContext:xt,useCallback:Rc,useContext:xt,useEffect:ma,useImperativeHandle:Tc,useInsertionEffect:Pc,useLayoutEffect:Cc,useMemo:Ac,useReducer:pa,useRef:Ec,useState:function(){return pa(rs)},useDebugValue:ga,useDeferredValue:function(e){var t=_t();return Be===null?t.memoizedState=e:Ic(t,Be.memoizedState,e)},useTransition:function(){var e=pa(rs)[0],t=_t().memoizedState;return[e,t]},useMutableSource:vc,useSyncExternalStore:wc,useId:Dc,unstable_isNewReconciler:!1};function Pt(e,t){if(e&&e.defaultProps){t=V({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function ya(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:V({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var pi={isMounted:function(e){return(e=e._reactInternals)?wr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=nt(),c=cr(e),f=Wt(a,c);f.payload=t,s!=null&&(f.callback=s),t=or(e,f,c),t!==null&&(Tt(t,e,c,a),oi(t,e,c))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=nt(),c=cr(e),f=Wt(a,c);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=or(e,f,c),t!==null&&(Tt(t,e,c,a),oi(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=nt(),a=cr(e),c=Wt(s,a);c.tag=2,t!=null&&(c.callback=t),t=or(e,c,a),t!==null&&(Tt(t,e,a,s),oi(t,e,a))}};function Mc(e,t,s,a,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,g):t.prototype&&t.prototype.isPureReactComponent?!Vn(s,a)||!Vn(c,f):!0}function Bc(e,t,s){var a=!1,c=nr,f=t.contextType;return typeof f=="object"&&f!==null?f=xt(f):(c=it(t)?_r:Ye.current,a=t.contextTypes,f=(a=a!=null)?Zr(e,c):nr),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function Fc(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&pi.enqueueReplaceState(t,t.state,null)}function va(e,t,s,a){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},sa(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=xt(f):(f=it(t)?_r:Ye.current,c.context=Zr(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(ya(e,t,f,s),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&pi.enqueueReplaceState(c,c.state,null),ai(e,s,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ln(e,t){try{var s="",a=t;do s+=ye(a),a=a.return;while(a);var c=s}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function wa(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function xa(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var vm=typeof WeakMap=="function"?WeakMap:Map;function zc(e,t,s){s=Wt(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){_i||(_i=!0,Da=a),xa(e,t)},s}function Vc(e,t,s){s=Wt(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;s.payload=function(){return a(c)},s.callback=function(){xa(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){xa(e,t),typeof a!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),s}function Hc(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new vm;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(s)||(c.add(s),e=Rm.bind(null,e,t,s),t.then(e,e))}function Wc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jc(e,t,s,a,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Wt(-1,1),t.tag=2,or(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var wm=H.ReactCurrentOwner,ot=!1;function rt(e,t,s,a){t.child=e===null?hc(t,null,s,a):nn(t,e.child,s,a)}function Kc(e,t,s,a,c){s=s.render;var f=t.ref;return on(t,c),a=da(e,t,s,a,f,c),s=ha(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Jt(e,t,c)):(Te&&s&&qo(t),t.flags|=1,rt(e,t,a,c),t.child)}function qc(e,t,s,a,c){if(e===null){var f=s.type;return typeof f=="function"&&!za(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,Yc(e,t,f,a,c)):(e=Ni(s.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&c)===0){var g=f.memoizedProps;if(s=s.compare,s=s!==null?s:Vn,s(g,a)&&e.ref===t.ref)return Jt(e,t,c)}return t.flags|=1,e=hr(f,a),e.ref=t.ref,e.return=t,t.child=e}function Yc(e,t,s,a,c){if(e!==null){var f=e.memoizedProps;if(Vn(f,a)&&e.ref===t.ref)if(ot=!1,t.pendingProps=a=f,(e.lanes&c)!==0)(e.flags&131072)!==0&&(ot=!0);else return t.lanes=e.lanes,Jt(e,t,c)}return _a(e,t,s,a,c)}function Gc(e,t,s){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(cn,pt),pt|=s;else{if((s&1073741824)===0)return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(cn,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:s,Ee(cn,pt),pt|=a}else f!==null?(a=f.baseLanes|s,t.memoizedState=null):a=s,Ee(cn,pt),pt|=a;return rt(e,t,c,s),t.child}function Qc(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function _a(e,t,s,a,c){var f=it(s)?_r:Ye.current;return f=Zr(t,f),on(t,c),s=da(e,t,s,a,f,c),a=ha(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Jt(e,t,c)):(Te&&a&&qo(t),t.flags|=1,rt(e,t,s,c),t.child)}function Xc(e,t,s,a,c){if(it(s)){var f=!0;Xs(t)}else f=!1;if(on(t,c),t.stateNode===null)gi(e,t),Bc(t,s,a),va(t,s,a,c),a=!0;else if(e===null){var g=t.stateNode,_=t.memoizedProps;g.props=_;var S=g.context,T=s.contextType;typeof T=="object"&&T!==null?T=xt(T):(T=it(s)?_r:Ye.current,T=Zr(t,T));var U=s.getDerivedStateFromProps,M=typeof U=="function"||typeof g.getSnapshotBeforeUpdate=="function";M||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==a||S!==T)&&Fc(t,g,a,T),ir=!1;var $=t.memoizedState;g.state=$,ai(t,a,g,c),S=t.memoizedState,_!==a||$!==S||st.current||ir?(typeof U=="function"&&(ya(t,s,U,a),S=t.memoizedState),(_=ir||Mc(t,s,_,a,$,S,T))?(M||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),g.props=a,g.state=S,g.context=T,a=_):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,pc(e,t),_=t.memoizedProps,T=t.type===t.elementType?_:Pt(t.type,_),g.props=T,M=t.pendingProps,$=g.context,S=s.contextType,typeof S=="object"&&S!==null?S=xt(S):(S=it(s)?_r:Ye.current,S=Zr(t,S));var K=s.getDerivedStateFromProps;(U=typeof K=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==M||$!==S)&&Fc(t,g,a,S),ir=!1,$=t.memoizedState,g.state=$,ai(t,a,g,c);var G=t.memoizedState;_!==M||$!==G||st.current||ir?(typeof K=="function"&&(ya(t,s,K,a),G=t.memoizedState),(T=ir||Mc(t,s,T,a,$,G,S)||!1)?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,G,S),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,G,S)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=G),g.props=a,g.state=G,g.context=S,a=T):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),a=!1)}return ba(e,t,s,a,f,c)}function ba(e,t,s,a,c,f){Qc(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&nc(t,s,!1),Jt(e,t,f);a=t.stateNode,wm.current=t;var _=g&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=nn(t,e.child,null,f),t.child=nn(t,null,_,f)):rt(e,t,_,f),t.memoizedState=a.state,c&&nc(t,s,!0),t.child}function Zc(e){var t=e.stateNode;t.pendingContext?tc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tc(e,t.context,!1),ia(e,t.containerInfo)}function ed(e,t,s,a,c){return rn(),Xo(c),t.flags|=256,rt(e,t,s,a),t.child}var Sa={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function td(e,t,s){var a=t.pendingProps,c=Re.current,f=!1,g=(t.flags&128)!==0,_;if((_=g)||(_=e!==null&&e.memoizedState===null?!1:(c&2)!==0),_?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Ee(Re,c&1),e===null)return Qo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=a.children,e=a.fallback,f?(a=t.mode,f=t.child,g={mode:"hidden",children:g},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=Pi(g,a,0,null),e=Tr(e,a,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=ja(s),t.memoizedState=Sa,e):ka(t,g));if(c=e.memoizedState,c!==null&&(_=c.dehydrated,_!==null))return xm(e,t,g,a,_,c,s);if(f){f=a.fallback,g=t.mode,c=e.child,_=c.sibling;var S={mode:"hidden",children:a.children};return(g&1)===0&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=hr(c,S),a.subtreeFlags=c.subtreeFlags&14680064),_!==null?f=hr(_,f):(f=Tr(f,g,s,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,g=e.child.memoizedState,g=g===null?ja(s):{baseLanes:g.baseLanes|s,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~s,t.memoizedState=Sa,a}return f=e.child,e=f.sibling,a=hr(f,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function ka(e,t){return t=Pi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mi(e,t,s,a){return a!==null&&Xo(a),nn(t,e.child,null,s),e=ka(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xm(e,t,s,a,c,f,g){if(s)return t.flags&256?(t.flags&=-257,a=wa(Error(n(422))),mi(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,c=t.mode,a=Pi({mode:"visible",children:a.children},c,0,null),f=Tr(f,c,g,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,(t.mode&1)!==0&&nn(t,e.child,null,g),t.child.memoizedState=ja(g),t.memoizedState=Sa,f);if((t.mode&1)===0)return mi(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var _=a.dgst;return a=_,f=Error(n(419)),a=wa(f,a,void 0),mi(e,t,g,a)}if(_=(g&e.childLanes)!==0,ot||_){if(a=He,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|g))!==0?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,Ht(e,c),Tt(a,e,c,-1))}return Fa(),a=wa(Error(n(421))),mi(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Am.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,ft=tr(c.nextSibling),ht=t,Te=!0,Nt=null,e!==null&&(vt[wt++]=zt,vt[wt++]=Vt,vt[wt++]=br,zt=e.id,Vt=e.overflow,br=t),t=ka(t,a.children),t.flags|=4096,t)}function rd(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ra(e.return,t,s)}function Ea(e,t,s,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=s,f.tailMode=c)}function nd(e,t,s){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(rt(e,t,a.children,s),a=Re.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rd(e,s,t);else if(e.tag===19)rd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ee(Re,a),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&li(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),Ea(t,!1,c,s,f);break;case"backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&li(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Ea(t,!0,s,null,f);break;case"together":Ea(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Nr|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,s=hr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=hr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function _m(e,t,s){switch(t.tag){case 3:Zc(t),rn();break;case 5:yc(t);break;case 1:it(t.type)&&Xs(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;Ee(si,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Ee(Re,Re.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?td(e,t,s):(Ee(Re,Re.current&1),e=Jt(e,t,s),e!==null?e.sibling:null);Ee(Re,Re.current&1);break;case 19:if(a=(s&t.childLanes)!==0,(e.flags&128)!==0){if(a)return nd(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ee(Re,Re.current),a)break;return null;case 22:case 23:return t.lanes=0,Gc(e,t,s)}return Jt(e,t,s)}var sd,Na,id,od;sd=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Na=function(){},id=function(e,t,s,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,kr($t.current);var f=null;switch(s){case"input":c=to(e,c),a=to(e,a),f=[];break;case"select":c=V({},c,{value:void 0}),a=V({},a,{value:void 0}),f=[];break;case"textarea":c=so(e,c),a=so(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Ys)}oo(s,a);var g;s=null;for(T in c)if(!a.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var _=c[T];for(g in _)_.hasOwnProperty(g)&&(s||(s={}),s[g]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(l.hasOwnProperty(T)?f||(f=[]):(f=f||[]).push(T,null));for(T in a){var S=a[T];if(_=c?.[T],a.hasOwnProperty(T)&&S!==_&&(S!=null||_!=null))if(T==="style")if(_){for(g in _)!_.hasOwnProperty(g)||S&&S.hasOwnProperty(g)||(s||(s={}),s[g]="");for(g in S)S.hasOwnProperty(g)&&_[g]!==S[g]&&(s||(s={}),s[g]=S[g])}else s||(f||(f=[]),f.push(T,s)),s=S;else T==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,_=_?_.__html:void 0,S!=null&&_!==S&&(f=f||[]).push(T,S)):T==="children"?typeof S!="string"&&typeof S!="number"||(f=f||[]).push(T,""+S):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(l.hasOwnProperty(T)?(S!=null&&T==="onScroll"&&Pe("scroll",e),f||_===S||(f=[])):(f=f||[]).push(T,S))}s&&(f=f||[]).push("style",s);var T=f;(t.updateQueue=T)&&(t.flags|=4)}},od=function(e,t,s,a){s!==a&&(t.flags|=4)};function ss(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function bm(e,t,s){var a=t.pendingProps;switch(Yo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return it(t.type)&&Qs(),Qe(t),null;case 3:return a=t.stateNode,an(),Ce(st),Ce(Ye),la(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nt!==null&&(Ua(Nt),Nt=null))),Na(e,t),Qe(t),null;case 5:oa(t);var c=kr(Zn.current);if(s=t.type,e!==null&&t.stateNode!=null)id(e,t,s,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(n(166));return Qe(t),null}if(e=kr($t.current),ri(t)){a=t.stateNode,s=t.type;var f=t.memoizedProps;switch(a[Lt]=t,a[qn]=f,e=(t.mode&1)!==0,s){case"dialog":Pe("cancel",a),Pe("close",a);break;case"iframe":case"object":case"embed":Pe("load",a);break;case"video":case"audio":for(c=0;c<Wn.length;c++)Pe(Wn[c],a);break;case"source":Pe("error",a);break;case"img":case"image":case"link":Pe("error",a),Pe("load",a);break;case"details":Pe("toggle",a);break;case"input":Bl(a,f),Pe("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Pe("invalid",a);break;case"textarea":Vl(a,f),Pe("invalid",a)}oo(s,f),c=null;for(var g in f)if(f.hasOwnProperty(g)){var _=f[g];g==="children"?typeof _=="string"?a.textContent!==_&&(f.suppressHydrationWarning!==!0&&qs(a.textContent,_,e),c=["children",_]):typeof _=="number"&&a.textContent!==""+_&&(f.suppressHydrationWarning!==!0&&qs(a.textContent,_,e),c=["children",""+_]):l.hasOwnProperty(g)&&_!=null&&g==="onScroll"&&Pe("scroll",a)}switch(s){case"input":ks(a),zl(a,f,!0);break;case"textarea":ks(a),Wl(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Ys)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jl(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(s,{is:a.is}):(e=g.createElement(s),s==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,s),e[Lt]=t,e[qn]=a,sd(e,t,!1,!1),t.stateNode=e;e:{switch(g=ao(s,a),s){case"dialog":Pe("cancel",e),Pe("close",e),c=a;break;case"iframe":case"object":case"embed":Pe("load",e),c=a;break;case"video":case"audio":for(c=0;c<Wn.length;c++)Pe(Wn[c],e);c=a;break;case"source":Pe("error",e),c=a;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),c=a;break;case"details":Pe("toggle",e),c=a;break;case"input":Bl(e,a),c=to(e,a),Pe("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=V({},a,{value:void 0}),Pe("invalid",e);break;case"textarea":Vl(e,a),c=so(e,a),Pe("invalid",e);break;default:c=a}oo(s,c),_=c;for(f in _)if(_.hasOwnProperty(f)){var S=_[f];f==="style"?Yl(e,S):f==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&Kl(e,S)):f==="children"?typeof S=="string"?(s!=="textarea"||S!=="")&&En(e,S):typeof S=="number"&&En(e,""+S):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?S!=null&&f==="onScroll"&&Pe("scroll",e):S!=null&&I(e,f,S,g))}switch(s){case"input":ks(e),zl(e,a,!1);break;case"textarea":ks(e),Wl(e);break;case"option":a.value!=null&&e.setAttribute("value",""+je(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Fr(e,!!a.multiple,f,!1):a.defaultValue!=null&&Fr(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Ys)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qe(t),null;case 6:if(e&&t.stateNode!=null)od(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(n(166));if(s=kr(Zn.current),kr($t.current),ri(t)){if(a=t.stateNode,s=t.memoizedProps,a[Lt]=t,(f=a.nodeValue!==s)&&(e=ht,e!==null))switch(e.tag){case 3:qs(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qs(a.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Lt]=t,t.stateNode=a}return Qe(t),null;case 13:if(Ce(Re),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&ft!==null&&(t.mode&1)!==0&&(t.flags&128)===0)uc(),rn(),t.flags|=98560,f=!1;else if(f=ri(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Lt]=t}else rn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),f=!1}else Nt!==null&&(Ua(Nt),Nt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Re.current&1)!==0?Fe===0&&(Fe=3):Fa())),t.updateQueue!==null&&(t.flags|=4),Qe(t),null);case 4:return an(),Na(e,t),e===null&&Jn(t.stateNode.containerInfo),Qe(t),null;case 10:return ta(t.type._context),Qe(t),null;case 17:return it(t.type)&&Qs(),Qe(t),null;case 19:if(Ce(Re),f=t.memoizedState,f===null)return Qe(t),null;if(a=(t.flags&128)!==0,g=f.rendering,g===null)if(a)ss(f,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=li(e),g!==null){for(t.flags|=128,ss(f,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)f=s,e=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ee(Re,Re.current&1|2),t.child}e=e.sibling}f.tail!==null&&Le()>dn&&(t.flags|=128,a=!0,ss(f,!1),t.lanes=4194304)}else{if(!a)if(e=li(g),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),ss(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Te)return Qe(t),null}else 2*Le()-f.renderingStartTime>dn&&s!==1073741824&&(t.flags|=128,a=!0,ss(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(s=f.last,s!==null?s.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Le(),t.sibling=null,s=Re.current,Ee(Re,a?s&1|2:s&1),t):(Qe(t),null);case 22:case 23:return Ba(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(pt&1073741824)!==0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function Sm(e,t){switch(Yo(t),t.tag){case 1:return it(t.type)&&Qs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return an(),Ce(st),Ce(Ye),la(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return oa(t),null;case 13:if(Ce(Re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));rn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Re),null;case 4:return an(),null;case 10:return ta(t.type._context),null;case 22:case 23:return Ba(),null;case 24:return null;default:return null}}var yi=!1,Xe=!1,jm=typeof WeakSet=="function"?WeakSet:Set,q=null;function un(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){De(e,t,a)}else s.current=null}function Pa(e,t,s){try{s()}catch(a){De(e,t,a)}}var ad=!1;function km(e,t){if(Bo=$s,e=Mu(),Ro(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var g=0,_=-1,S=-1,T=0,U=0,M=e,$=null;t:for(;;){for(var K;M!==s||c!==0&&M.nodeType!==3||(_=g+c),M!==f||a!==0&&M.nodeType!==3||(S=g+a),M.nodeType===3&&(g+=M.nodeValue.length),(K=M.firstChild)!==null;)$=M,M=K;for(;;){if(M===e)break t;if($===s&&++T===c&&(_=g),$===f&&++U===a&&(S=g),(K=M.nextSibling)!==null)break;M=$,$=M.parentNode}M=K}s=_===-1||S===-1?null:{start:_,end:S}}else s=null}s=s||{start:0,end:0}}else s=null;for(Fo={focusedElem:e,selectionRange:s},$s=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var G=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var X=G.memoizedProps,$e=G.memoizedState,C=t.stateNode,j=C.getSnapshotBeforeUpdate(t.elementType===t.type?X:Pt(t.type,X),$e);C.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(B){De(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return G=ad,ad=!1,G}function is(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&Pa(t,s,f)}c=c.next}while(c!==a)}}function vi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function Ca(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function ld(e){var t=e.alternate;t!==null&&(e.alternate=null,ld(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[qn],delete t[Wo],delete t[am],delete t[lm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ud(e){return e.tag===5||e.tag===3||e.tag===4}function cd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ud(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oa(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ys));else if(a!==4&&(e=e.child,e!==null))for(Oa(e,t,s),e=e.sibling;e!==null;)Oa(e,t,s),e=e.sibling}function Ta(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Ta(e,t,s),e=e.sibling;e!==null;)Ta(e,t,s),e=e.sibling}var Je=null,Ct=!1;function ar(e,t,s){for(s=s.child;s!==null;)dd(e,t,s),s=s.sibling}function dd(e,t,s){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Ts,s)}catch{}switch(s.tag){case 5:Xe||un(s,t);case 6:var a=Je,c=Ct;Je=null,ar(e,t,s),Je=a,Ct=c,Je!==null&&(Ct?(e=Je,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Je.removeChild(s.stateNode));break;case 18:Je!==null&&(Ct?(e=Je,s=s.stateNode,e.nodeType===8?Ho(e.parentNode,s):e.nodeType===1&&Ho(e,s),$n(e)):Ho(Je,s.stateNode));break;case 4:a=Je,c=Ct,Je=s.stateNode.containerInfo,Ct=!0,ar(e,t,s),Je=a,Ct=c;break;case 0:case 11:case 14:case 15:if(!Xe&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&Pa(s,t,g),c=c.next}while(c!==a)}ar(e,t,s);break;case 1:if(!Xe&&(un(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(_){De(s,t,_)}ar(e,t,s);break;case 21:ar(e,t,s);break;case 22:s.mode&1?(Xe=(a=Xe)||s.memoizedState!==null,ar(e,t,s),Xe=a):ar(e,t,s);break;default:ar(e,t,s)}}function hd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new jm),t.forEach(function(a){var c=Im.bind(null,e,a);s.has(a)||(s.add(a),a.then(c,c))})}}function Ot(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];try{var f=e,g=t,_=g;e:for(;_!==null;){switch(_.tag){case 5:Je=_.stateNode,Ct=!1;break e;case 3:Je=_.stateNode.containerInfo,Ct=!0;break e;case 4:Je=_.stateNode.containerInfo,Ct=!0;break e}_=_.return}if(Je===null)throw Error(n(160));dd(f,g,c),Je=null,Ct=!1;var S=c.alternate;S!==null&&(S.return=null),c.return=null}catch(T){De(c,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fd(t,e),t=t.sibling}function fd(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Mt(e),a&4){try{is(3,e,e.return),vi(3,e)}catch(X){De(e,e.return,X)}try{is(5,e,e.return)}catch(X){De(e,e.return,X)}}break;case 1:Ot(t,e),Mt(e),a&512&&s!==null&&un(s,s.return);break;case 5:if(Ot(t,e),Mt(e),a&512&&s!==null&&un(s,s.return),e.flags&32){var c=e.stateNode;try{En(c,"")}catch(X){De(e,e.return,X)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,g=s!==null?s.memoizedProps:f,_=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{_==="input"&&f.type==="radio"&&f.name!=null&&Fl(c,f),ao(_,g);var T=ao(_,f);for(g=0;g<S.length;g+=2){var U=S[g],M=S[g+1];U==="style"?Yl(c,M):U==="dangerouslySetInnerHTML"?Kl(c,M):U==="children"?En(c,M):I(c,U,M,T)}switch(_){case"input":ro(c,f);break;case"textarea":Hl(c,f);break;case"select":var $=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var K=f.value;K!=null?Fr(c,!!f.multiple,K,!1):$!==!!f.multiple&&(f.defaultValue!=null?Fr(c,!!f.multiple,f.defaultValue,!0):Fr(c,!!f.multiple,f.multiple?[]:"",!1))}c[qn]=f}catch(X){De(e,e.return,X)}}break;case 6:if(Ot(t,e),Mt(e),a&4){if(e.stateNode===null)throw Error(n(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(X){De(e,e.return,X)}}break;case 3:if(Ot(t,e),Mt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{$n(t.containerInfo)}catch(X){De(e,e.return,X)}break;case 4:Ot(t,e),Mt(e);break;case 13:Ot(t,e),Mt(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(Ia=Le())),a&4&&hd(e);break;case 22:if(U=s!==null&&s.memoizedState!==null,e.mode&1?(Xe=(T=Xe)||U,Ot(t,e),Xe=T):Ot(t,e),Mt(e),a&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!U&&(e.mode&1)!==0)for(q=e,U=e.child;U!==null;){for(M=q=U;q!==null;){switch($=q,K=$.child,$.tag){case 0:case 11:case 14:case 15:is(4,$,$.return);break;case 1:un($,$.return);var G=$.stateNode;if(typeof G.componentWillUnmount=="function"){a=$,s=$.return;try{t=a,G.props=t.memoizedProps,G.state=t.memoizedState,G.componentWillUnmount()}catch(X){De(a,s,X)}}break;case 5:un($,$.return);break;case 22:if($.memoizedState!==null){gd(M);continue}}K!==null?(K.return=$,q=K):gd(M)}U=U.sibling}e:for(U=null,M=e;;){if(M.tag===5){if(U===null){U=M;try{c=M.stateNode,T?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(_=M.stateNode,S=M.memoizedProps.style,g=S!=null&&S.hasOwnProperty("display")?S.display:null,_.style.display=ql("display",g))}catch(X){De(e,e.return,X)}}}else if(M.tag===6){if(U===null)try{M.stateNode.nodeValue=T?"":M.memoizedProps}catch(X){De(e,e.return,X)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;U===M&&(U=null),M=M.return}U===M&&(U=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:Ot(t,e),Mt(e),a&4&&hd(e);break;case 21:break;default:Ot(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(ud(s)){var a=s;break e}s=s.return}throw Error(n(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(En(c,""),a.flags&=-33);var f=cd(e);Ta(e,f,c);break;case 3:case 4:var g=a.stateNode.containerInfo,_=cd(e);Oa(e,_,g);break;default:throw Error(n(161))}}catch(S){De(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Em(e,t,s){q=e,pd(e)}function pd(e,t,s){for(var a=(e.mode&1)!==0;q!==null;){var c=q,f=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||yi;if(!g){var _=c.alternate,S=_!==null&&_.memoizedState!==null||Xe;_=yi;var T=Xe;if(yi=g,(Xe=S)&&!T)for(q=c;q!==null;)g=q,S=g.child,g.tag===22&&g.memoizedState!==null?yd(c):S!==null?(S.return=g,q=S):yd(c);for(;f!==null;)q=f,pd(f),f=f.sibling;q=c,yi=_,Xe=T}md(e)}else(c.subtreeFlags&8772)!==0&&f!==null?(f.return=c,q=f):md(e)}}function md(e){for(;q!==null;){var t=q;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Xe||vi(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Xe)if(s===null)a.componentDidMount();else{var c=t.elementType===t.type?s.memoizedProps:Pt(t.type,s.memoizedProps);a.componentDidUpdate(c,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&gc(t,f,a);break;case 3:var g=t.updateQueue;if(g!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}gc(t,g,s)}break;case 5:var _=t.stateNode;if(s===null&&t.flags&4){s=_;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&s.focus();break;case"img":S.src&&(s.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var U=T.memoizedState;if(U!==null){var M=U.dehydrated;M!==null&&$n(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Xe||t.flags&512&&Ca(t)}catch($){De(t,t.return,$)}}if(t===e){q=null;break}if(s=t.sibling,s!==null){s.return=t.return,q=s;break}q=t.return}}function gd(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var s=t.sibling;if(s!==null){s.return=t.return,q=s;break}q=t.return}}function yd(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{vi(4,t)}catch(S){De(t,s,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(S){De(t,c,S)}}var f=t.return;try{Ca(t)}catch(S){De(t,f,S)}break;case 5:var g=t.return;try{Ca(t)}catch(S){De(t,g,S)}}}catch(S){De(t,t.return,S)}if(t===e){q=null;break}var _=t.sibling;if(_!==null){_.return=t.return,q=_;break}q=t.return}}var Nm=Math.ceil,wi=H.ReactCurrentDispatcher,Ra=H.ReactCurrentOwner,bt=H.ReactCurrentBatchConfig,_e=0,He=null,Ue=null,Ke=0,pt=0,cn=rr(0),Fe=0,os=null,Nr=0,xi=0,Aa=0,as=null,at=null,Ia=0,dn=1/0,Kt=null,_i=!1,Da=null,lr=null,bi=!1,ur=null,Si=0,ls=0,La=null,ji=-1,ki=0;function nt(){return(_e&6)!==0?Le():ji!==-1?ji:ji=Le()}function cr(e){return(e.mode&1)===0?1:(_e&2)!==0&&Ke!==0?Ke&-Ke:cm.transition!==null?(ki===0&&(ki=cu()),ki):(e=ke,e!==0||(e=window.event,e=e===void 0?16:wu(e.type)),e)}function Tt(e,t,s,a){if(50<ls)throw ls=0,La=null,Error(n(185));Rn(e,s,a),((_e&2)===0||e!==He)&&(e===He&&((_e&2)===0&&(xi|=s),Fe===4&&dr(e,Ke)),lt(e,a),s===1&&_e===0&&(t.mode&1)===0&&(dn=Le()+500,Zs&&sr()))}function lt(e,t){var s=e.callbackNode;cp(e,t);var a=Is(e,e===He?Ke:0);if(a===0)s!==null&&au(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&au(s),t===1)e.tag===0?um(wd.bind(null,e)):sc(wd.bind(null,e)),im(function(){(_e&6)===0&&sr()}),s=null;else{switch(du(a)){case 1:s=mo;break;case 4:s=lu;break;case 16:s=Os;break;case 536870912:s=uu;break;default:s=Os}s=Nd(s,vd.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function vd(e,t){if(ji=-1,ki=0,(_e&6)!==0)throw Error(n(327));var s=e.callbackNode;if(hn()&&e.callbackNode!==s)return null;var a=Is(e,e===He?Ke:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Ei(e,a);else{t=a;var c=_e;_e|=2;var f=_d();(He!==e||Ke!==t)&&(Kt=null,dn=Le()+500,Cr(e,t));do try{Om();break}catch(_){xd(e,_)}while(!0);ea(),wi.current=f,_e=c,Ue!==null?t=0:(He=null,Ke=0,t=Fe)}if(t!==0){if(t===2&&(c=go(e),c!==0&&(a=c,t=$a(e,c))),t===1)throw s=os,Cr(e,0),dr(e,a),lt(e,Le()),s;if(t===6)dr(e,a);else{if(c=e.current.alternate,(a&30)===0&&!Pm(c)&&(t=Ei(e,a),t===2&&(f=go(e),f!==0&&(a=f,t=$a(e,f))),t===1))throw s=os,Cr(e,0),dr(e,a),lt(e,Le()),s;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(n(345));case 2:Or(e,at,Kt);break;case 3:if(dr(e,a),(a&130023424)===a&&(t=Ia+500-Le(),10<t)){if(Is(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){nt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Vo(Or.bind(null,e,at,Kt),t);break}Or(e,at,Kt);break;case 4:if(dr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-kt(a);f=1<<g,g=t[g],g>c&&(c=g),a&=~f}if(a=c,a=Le()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Nm(a/1960))-a,10<a){e.timeoutHandle=Vo(Or.bind(null,e,at,Kt),a);break}Or(e,at,Kt);break;case 5:Or(e,at,Kt);break;default:throw Error(n(329))}}}return lt(e,Le()),e.callbackNode===s?vd.bind(null,e):null}function $a(e,t){var s=as;return e.current.memoizedState.isDehydrated&&(Cr(e,t).flags|=256),e=Ei(e,t),e!==2&&(t=at,at=s,t!==null&&Ua(t)),e}function Ua(e){at===null?at=e:at.push.apply(at,e)}function Pm(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var c=s[a],f=c.getSnapshot;c=c.value;try{if(!Et(f(),c))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dr(e,t){for(t&=~Aa,t&=~xi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-kt(t),a=1<<s;e[s]=-1,t&=~a}}function wd(e){if((_e&6)!==0)throw Error(n(327));hn();var t=Is(e,0);if((t&1)===0)return lt(e,Le()),null;var s=Ei(e,t);if(e.tag!==0&&s===2){var a=go(e);a!==0&&(t=a,s=$a(e,a))}if(s===1)throw s=os,Cr(e,0),dr(e,t),lt(e,Le()),s;if(s===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Or(e,at,Kt),lt(e,Le()),null}function Ma(e,t){var s=_e;_e|=1;try{return e(t)}finally{_e=s,_e===0&&(dn=Le()+500,Zs&&sr())}}function Pr(e){ur!==null&&ur.tag===0&&(_e&6)===0&&hn();var t=_e;_e|=1;var s=bt.transition,a=ke;try{if(bt.transition=null,ke=1,e)return e()}finally{ke=a,bt.transition=s,_e=t,(_e&6)===0&&sr()}}function Ba(){pt=cn.current,Ce(cn)}function Cr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,sm(s)),Ue!==null)for(s=Ue.return;s!==null;){var a=s;switch(Yo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Qs();break;case 3:an(),Ce(st),Ce(Ye),la();break;case 5:oa(a);break;case 4:an();break;case 13:Ce(Re);break;case 19:Ce(Re);break;case 10:ta(a.type._context);break;case 22:case 23:Ba()}s=s.return}if(He=e,Ue=e=hr(e.current,null),Ke=pt=t,Fe=0,os=null,Aa=xi=Nr=0,at=as=null,jr!==null){for(t=0;t<jr.length;t++)if(s=jr[t],a=s.interleaved,a!==null){s.interleaved=null;var c=a.next,f=s.pending;if(f!==null){var g=f.next;f.next=c,a.next=g}s.pending=a}jr=null}return e}function xd(e,t){do{var s=Ue;try{if(ea(),ui.current=fi,ci){for(var a=Ae.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}ci=!1}if(Er=0,Ve=Be=Ae=null,es=!1,ts=0,Ra.current=null,s===null||s.return===null){Fe=1,os=t,Ue=null;break}e:{var f=e,g=s.return,_=s,S=t;if(t=Ke,_.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var T=S,U=_,M=U.tag;if((U.mode&1)===0&&(M===0||M===11||M===15)){var $=U.alternate;$?(U.updateQueue=$.updateQueue,U.memoizedState=$.memoizedState,U.lanes=$.lanes):(U.updateQueue=null,U.memoizedState=null)}var K=Wc(g);if(K!==null){K.flags&=-257,Jc(K,g,_,f,t),K.mode&1&&Hc(f,T,t),t=K,S=T;var G=t.updateQueue;if(G===null){var X=new Set;X.add(S),t.updateQueue=X}else G.add(S);break e}else{if((t&1)===0){Hc(f,T,t),Fa();break e}S=Error(n(426))}}else if(Te&&_.mode&1){var $e=Wc(g);if($e!==null){($e.flags&65536)===0&&($e.flags|=256),Jc($e,g,_,f,t),Xo(ln(S,_));break e}}f=S=ln(S,_),Fe!==4&&(Fe=2),as===null?as=[f]:as.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var C=zc(f,S,t);mc(f,C);break e;case 1:_=S;var j=f.type,O=f.stateNode;if((f.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(lr===null||!lr.has(O)))){f.flags|=65536,t&=-t,f.lanes|=t;var B=Vc(f,_,t);mc(f,B);break e}}f=f.return}while(f!==null)}Sd(s)}catch(Z){t=Z,Ue===s&&s!==null&&(Ue=s=s.return);continue}break}while(!0)}function _d(){var e=wi.current;return wi.current=fi,e===null?fi:e}function Fa(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||(Nr&268435455)===0&&(xi&268435455)===0||dr(He,Ke)}function Ei(e,t){var s=_e;_e|=2;var a=_d();(He!==e||Ke!==t)&&(Kt=null,Cr(e,t));do try{Cm();break}catch(c){xd(e,c)}while(!0);if(ea(),_e=s,wi.current=a,Ue!==null)throw Error(n(261));return He=null,Ke=0,Fe}function Cm(){for(;Ue!==null;)bd(Ue)}function Om(){for(;Ue!==null&&!tp();)bd(Ue)}function bd(e){var t=Ed(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Sd(e):Ue=t,Ra.current=null}function Sd(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=bm(s,t,pt),s!==null){Ue=s;return}}else{if(s=Sm(s,t),s!==null){s.flags&=32767,Ue=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Ue=null;return}}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Fe===0&&(Fe=5)}function Or(e,t,s){var a=ke,c=bt.transition;try{bt.transition=null,ke=1,Tm(e,t,s,a)}finally{bt.transition=c,ke=a}return null}function Tm(e,t,s,a){do hn();while(ur!==null);if((_e&6)!==0)throw Error(n(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(dp(e,f),e===He&&(Ue=He=null,Ke=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||bi||(bi=!0,Nd(Os,function(){return hn(),null})),f=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||f){f=bt.transition,bt.transition=null;var g=ke;ke=1;var _=_e;_e|=4,Ra.current=null,km(e,s),fd(s,e),Qp(Fo),$s=!!Bo,Fo=Bo=null,e.current=s,Em(s),rp(),_e=_,ke=g,bt.transition=f}else e.current=s;if(bi&&(bi=!1,ur=e,Si=c),f=e.pendingLanes,f===0&&(lr=null),ip(s.stateNode),lt(e,Le()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)c=t[s],a(c.value,{componentStack:c.stack,digest:c.digest});if(_i)throw _i=!1,e=Da,Da=null,e;return(Si&1)!==0&&e.tag!==0&&hn(),f=e.pendingLanes,(f&1)!==0?e===La?ls++:(ls=0,La=e):ls=0,sr(),null}function hn(){if(ur!==null){var e=du(Si),t=bt.transition,s=ke;try{if(bt.transition=null,ke=16>e?16:e,ur===null)var a=!1;else{if(e=ur,ur=null,Si=0,(_e&6)!==0)throw Error(n(331));var c=_e;for(_e|=4,q=e.current;q!==null;){var f=q,g=f.child;if((q.flags&16)!==0){var _=f.deletions;if(_!==null){for(var S=0;S<_.length;S++){var T=_[S];for(q=T;q!==null;){var U=q;switch(U.tag){case 0:case 11:case 15:is(8,U,f)}var M=U.child;if(M!==null)M.return=U,q=M;else for(;q!==null;){U=q;var $=U.sibling,K=U.return;if(ld(U),U===T){q=null;break}if($!==null){$.return=K,q=$;break}q=K}}}var G=f.alternate;if(G!==null){var X=G.child;if(X!==null){G.child=null;do{var $e=X.sibling;X.sibling=null,X=$e}while(X!==null)}}q=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,q=g;else e:for(;q!==null;){if(f=q,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:is(9,f,f.return)}var C=f.sibling;if(C!==null){C.return=f.return,q=C;break e}q=f.return}}var j=e.current;for(q=j;q!==null;){g=q;var O=g.child;if((g.subtreeFlags&2064)!==0&&O!==null)O.return=g,q=O;else e:for(g=j;q!==null;){if(_=q,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:vi(9,_)}}catch(Z){De(_,_.return,Z)}if(_===g){q=null;break e}var B=_.sibling;if(B!==null){B.return=_.return,q=B;break e}q=_.return}}if(_e=c,sr(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Ts,e)}catch{}a=!0}return a}finally{ke=s,bt.transition=t}}return!1}function jd(e,t,s){t=ln(s,t),t=zc(e,t,1),e=or(e,t,1),t=nt(),e!==null&&(Rn(e,1,t),lt(e,t))}function De(e,t,s){if(e.tag===3)jd(e,e,s);else for(;t!==null;){if(t.tag===3){jd(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(lr===null||!lr.has(a))){e=ln(s,e),e=Vc(t,e,1),t=or(t,e,1),e=nt(),t!==null&&(Rn(t,1,e),lt(t,e));break}}t=t.return}}function Rm(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&s,He===e&&(Ke&s)===s&&(Fe===4||Fe===3&&(Ke&130023424)===Ke&&500>Le()-Ia?Cr(e,0):Aa|=s),lt(e,t)}function kd(e,t){t===0&&((e.mode&1)===0?t=1:(t=As,As<<=1,(As&130023424)===0&&(As=4194304)));var s=nt();e=Ht(e,t),e!==null&&(Rn(e,t,s),lt(e,s))}function Am(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),kd(e,s)}function Im(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(n(314))}a!==null&&a.delete(t),kd(e,s)}var Ed;Ed=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||st.current)ot=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return ot=!1,_m(e,t,s);ot=(e.flags&131072)!==0}else ot=!1,Te&&(t.flags&1048576)!==0&&ic(t,ti,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;gi(e,t),e=t.pendingProps;var c=Zr(t,Ye.current);on(t,s),c=da(null,t,a,e,c,s);var f=ha();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(a)?(f=!0,Xs(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,sa(t),c.updater=pi,t.stateNode=c,c._reactInternals=t,va(t,a,e,s),t=ba(null,t,a,!0,f,s)):(t.tag=0,Te&&f&&qo(t),rt(null,t,c,s),t=t.child),t;case 16:a=t.elementType;e:{switch(gi(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=Lm(a),e=Pt(a,e),c){case 0:t=_a(null,t,a,e,s);break e;case 1:t=Xc(null,t,a,e,s);break e;case 11:t=Kc(null,t,a,e,s);break e;case 14:t=qc(null,t,a,Pt(a.type,e),s);break e}throw Error(n(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Pt(a,c),_a(e,t,a,c,s);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Pt(a,c),Xc(e,t,a,c,s);case 3:e:{if(Zc(t),e===null)throw Error(n(387));a=t.pendingProps,f=t.memoizedState,c=f.element,pc(e,t),ai(t,a,null,s);var g=t.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=ln(Error(n(423)),t),t=ed(e,t,a,s,c);break e}else if(a!==c){c=ln(Error(n(424)),t),t=ed(e,t,a,s,c);break e}else for(ft=tr(t.stateNode.containerInfo.firstChild),ht=t,Te=!0,Nt=null,s=hc(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(rn(),a===c){t=Jt(e,t,s);break e}rt(e,t,a,s)}t=t.child}return t;case 5:return yc(t),e===null&&Qo(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,g=c.children,zo(a,c)?g=null:f!==null&&zo(a,f)&&(t.flags|=32),Qc(e,t),rt(e,t,g,s),t.child;case 6:return e===null&&Qo(t),null;case 13:return td(e,t,s);case 4:return ia(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=nn(t,null,a,s):rt(e,t,a,s),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Pt(a,c),Kc(e,t,a,c,s);case 7:return rt(e,t,t.pendingProps,s),t.child;case 8:return rt(e,t,t.pendingProps.children,s),t.child;case 12:return rt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,f=t.memoizedProps,g=c.value,Ee(si,a._currentValue),a._currentValue=g,f!==null)if(Et(f.value,g)){if(f.children===c.children&&!st.current){t=Jt(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var _=f.dependencies;if(_!==null){g=f.child;for(var S=_.firstContext;S!==null;){if(S.context===a){if(f.tag===1){S=Wt(-1,s&-s),S.tag=2;var T=f.updateQueue;if(T!==null){T=T.shared;var U=T.pending;U===null?S.next=S:(S.next=U.next,U.next=S),T.pending=S}}f.lanes|=s,S=f.alternate,S!==null&&(S.lanes|=s),ra(f.return,s,t),_.lanes|=s;break}S=S.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(n(341));g.lanes|=s,_=g.alternate,_!==null&&(_.lanes|=s),ra(g,s,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}rt(e,t,c.children,s),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,on(t,s),c=xt(c),a=a(c),t.flags|=1,rt(e,t,a,s),t.child;case 14:return a=t.type,c=Pt(a,t.pendingProps),c=Pt(a.type,c),qc(e,t,a,c,s);case 15:return Yc(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Pt(a,c),gi(e,t),t.tag=1,it(a)?(e=!0,Xs(t)):e=!1,on(t,s),Bc(t,a,c),va(t,a,c,s),ba(null,t,a,!0,e,s);case 19:return nd(e,t,s);case 22:return Gc(e,t,s)}throw Error(n(156,t.tag))};function Nd(e,t){return ou(e,t)}function Dm(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,s,a){return new Dm(e,t,s,a)}function za(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lm(e){if(typeof e=="function")return za(e)?1:0;if(e!=null){if(e=e.$$typeof,e===se)return 11;if(e===he)return 14}return 2}function hr(e,t){var s=e.alternate;return s===null?(s=St(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Ni(e,t,s,a,c,f){var g=2;if(a=e,typeof e=="function")za(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case W:return Tr(s.children,c,f,t);case ce:g=8,c|=8;break;case ge:return e=St(12,s,t,c|2),e.elementType=ge,e.lanes=f,e;case z:return e=St(13,s,t,c),e.elementType=z,e.lanes=f,e;case ae:return e=St(19,s,t,c),e.elementType=ae,e.lanes=f,e;case Q:return Pi(s,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case J:g=10;break e;case ue:g=9;break e;case se:g=11;break e;case he:g=14;break e;case pe:g=16,a=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=St(g,s,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function Tr(e,t,s,a){return e=St(7,e,a,t),e.lanes=s,e}function Pi(e,t,s,a){return e=St(22,e,a,t),e.elementType=Q,e.lanes=s,e.stateNode={isHidden:!1},e}function Va(e,t,s){return e=St(6,e,null,t),e.lanes=s,e}function Ha(e,t,s){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $m(e,t,s,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yo(0),this.expirationTimes=yo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yo(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Wa(e,t,s,a,c,f,g,_,S){return e=new $m(e,t,s,_,S),t===1?(t=1,f===!0&&(t|=8)):t=0,f=St(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},sa(f),e}function Um(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function Pd(e){if(!e)return nr;e=e._reactInternals;e:{if(wr(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(it(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var s=e.type;if(it(s))return rc(e,s,t)}return t}function Cd(e,t,s,a,c,f,g,_,S){return e=Wa(s,a,!0,e,c,f,g,_,S),e.context=Pd(null),s=e.current,a=nt(),c=cr(s),f=Wt(a,c),f.callback=t??null,or(s,f,c),e.current.lanes=c,Rn(e,c,a),lt(e,a),e}function Ci(e,t,s,a){var c=t.current,f=nt(),g=cr(c);return s=Pd(s),t.context===null?t.context=s:t.pendingContext=s,t=Wt(f,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=or(c,t,g),e!==null&&(Tt(e,c,g,f),oi(e,c,g)),g}function Oi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Od(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Ja(e,t){Od(e,t),(e=e.alternate)&&Od(e,t)}function Mm(){return null}var Td=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ka(e){this._internalRoot=e}Ti.prototype.render=Ka.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));Ci(e,t,null,null)},Ti.prototype.unmount=Ka.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pr(function(){Ci(null,e,null,null)}),t[Bt]=null}};function Ti(e){this._internalRoot=e}Ti.prototype.unstable_scheduleHydration=function(e){if(e){var t=pu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Xt.length&&t!==0&&t<Xt[s].priority;s++);Xt.splice(s,0,e),s===0&&yu(e)}};function qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ri(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rd(){}function Bm(e,t,s,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var T=Oi(g);f.call(T)}}var g=Cd(t,a,e,0,null,!1,!1,"",Rd);return e._reactRootContainer=g,e[Bt]=g.current,Jn(e.nodeType===8?e.parentNode:e),Pr(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var _=a;a=function(){var T=Oi(S);_.call(T)}}var S=Wa(e,0,!1,null,null,!1,!1,"",Rd);return e._reactRootContainer=S,e[Bt]=S.current,Jn(e.nodeType===8?e.parentNode:e),Pr(function(){Ci(t,S,s,a)}),S}function Ai(e,t,s,a,c){var f=s._reactRootContainer;if(f){var g=f;if(typeof c=="function"){var _=c;c=function(){var S=Oi(g);_.call(S)}}Ci(t,g,e,c)}else g=Bm(s,t,e,c,a);return Oi(g)}hu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Tn(t.pendingLanes);s!==0&&(vo(t,s|1),lt(t,Le()),(_e&6)===0&&(dn=Le()+500,sr()))}break;case 13:Pr(function(){var a=Ht(e,1);if(a!==null){var c=nt();Tt(a,e,1,c)}}),Ja(e,1)}},wo=function(e){if(e.tag===13){var t=Ht(e,134217728);if(t!==null){var s=nt();Tt(t,e,134217728,s)}Ja(e,134217728)}},fu=function(e){if(e.tag===13){var t=cr(e),s=Ht(e,t);if(s!==null){var a=nt();Tt(s,e,t,a)}Ja(e,t)}},pu=function(){return ke},mu=function(e,t){var s=ke;try{return ke=e,t()}finally{ke=s}},co=function(e,t,s){switch(t){case"input":if(ro(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var c=Gs(a);if(!c)throw Error(n(90));Ml(a),ro(a,c)}}}break;case"textarea":Hl(e,s);break;case"select":t=s.value,t!=null&&Fr(e,!!s.multiple,t,!1)}},Zl=Ma,eu=Pr;var Fm={usingClientEntryPoint:!1,Events:[Yn,Qr,Gs,Ql,Xl,Ma]},us={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zm={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=su(e),e===null?null:e.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||Mm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ii.isDisabled&&Ii.supportsFiber)try{Ts=Ii.inject(zm),Dt=Ii}catch{}}return ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fm,ut.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qa(t))throw Error(n(200));return Um(e,t,null,s)},ut.createRoot=function(e,t){if(!qa(e))throw Error(n(299));var s=!1,a="",c=Td;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Wa(e,1,!1,null,null,s,!1,a,c),e[Bt]=t.current,Jn(e.nodeType===8?e.parentNode:e),new Ka(t)},ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=su(t),e=e===null?null:e.stateNode,e},ut.flushSync=function(e){return Pr(e)},ut.hydrate=function(e,t,s){if(!Ri(t))throw Error(n(200));return Ai(null,e,t,!0,s)},ut.hydrateRoot=function(e,t,s){if(!qa(e))throw Error(n(405));var a=s!=null&&s.hydratedSources||null,c=!1,f="",g=Td;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),t=Cd(t,null,e,1,s??null,c,!1,f,g),e[Bt]=t.current,Jn(e),a)for(e=0;e<a.length;e++)s=a[e],c=s._getVersion,c=c(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,c]:t.mutableSourceEagerHydrationData.push(s,c);return new Ti(t)},ut.render=function(e,t,s){if(!Ri(t))throw Error(n(200));return Ai(null,e,t,!1,s)},ut.unmountComponentAtNode=function(e){if(!Ri(e))throw Error(n(40));return e._reactRootContainer?(Pr(function(){Ai(null,null,e,!1,function(){e._reactRootContainer=null,e[Bt]=null})}),!0):!1},ut.unstable_batchedUpdates=Ma,ut.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Ri(s))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return Ai(e,t,s,!1,a)},ut.version="18.3.1-next-f1338f8080-20240426",ut}var Bd;function Zm(){if(Bd)return Qa.exports;Bd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),Qa.exports=Xm(),Qa.exports}var Fd;function eg(){if(Fd)return Di;Fd=1;var i=Zm();return Di.createRoot=i.createRoot,Di.hydrateRoot=i.hydrateRoot,Di}var tg=eg(),te=jl(),dl=function(i,r){return dl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(n[l]=o[l])},dl(i,r)};function Fh(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");dl(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Ji=function(){return Ji=Object.assign||function(r){for(var n,o=1,l=arguments.length;o<l;o++){n=arguments[o];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u])}return r},Ji.apply(this,arguments)};function Sn(i,r){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)r.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(n[o[l]]=i[o[l]]);return n}function zh(i,r,n,o){var l=arguments.length,u=l<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,n):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,n,o);else for(var p=i.length-1;p>=0;p--)(d=i[p])&&(u=(l<3?d(u):l>3?d(r,n,u):d(r,n))||u);return l>3&&u&&Object.defineProperty(r,n,u),u}function Vh(i,r){return function(n,o){r(n,o,i)}}function Hh(i,r,n,o,l,u){function d(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var p=o.kind,m=p==="getter"?"get":p==="setter"?"set":"value",y=!r&&i?o.static?i:i.prototype:null,x=r||(y?Object.getOwnPropertyDescriptor(y,o.name):{}),w,b=!1,v=n.length-1;v>=0;v--){var N={};for(var k in o)N[k]=k==="access"?{}:o[k];for(var k in o.access)N.access[k]=o.access[k];N.addInitializer=function(D){if(b)throw new TypeError("Cannot add initializers after decoration has completed");u.push(d(D||null))};var E=(0,n[v])(p==="accessor"?{get:x.get,set:x.set}:x[m],N);if(p==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(w=d(E.get))&&(x.get=w),(w=d(E.set))&&(x.set=w),(w=d(E.init))&&l.unshift(w)}else(w=d(E))&&(p==="field"?l.unshift(w):x[m]=w)}y&&Object.defineProperty(y,o.name,x),b=!0}function Wh(i,r,n){for(var o=arguments.length>2,l=0;l<r.length;l++)n=o?r[l].call(i,n):r[l].call(i);return o?n:void 0}function Jh(i){return typeof i=="symbol"?i:"".concat(i)}function Kh(i,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function qh(i,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,r)}function ee(i,r,n,o){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function p(x){try{y(o.next(x))}catch(w){d(w)}}function m(x){try{y(o.throw(x))}catch(w){d(w)}}function y(x){x.done?u(x.value):l(x.value).then(p,m)}y((o=o.apply(i,r||[])).next())})}function Yh(i,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=p(0),d.throw=p(1),d.return=p(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function p(y){return function(x){return m([y,x])}}function m(y){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(n=0)),n;)try{if(o=1,l&&(u=y[0]&2?l.return:y[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,y[1])).done)return u;switch(l=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,l=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=r.call(i,n)}catch(x){y=[6,x],l=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var Xi=Object.create?(function(i,r,n,o){o===void 0&&(o=n);var l=Object.getOwnPropertyDescriptor(r,n);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(i,o,l)}):(function(i,r,n,o){o===void 0&&(o=n),i[o]=r[n]});function Gh(i,r){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&Xi(r,i,n)}function Ki(i){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&i[r],o=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function kl(i,r){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var o=n.call(i),l,u=[],d;try{for(;(r===void 0||r-- >0)&&!(l=o.next()).done;)u.push(l.value)}catch(p){d={error:p}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return u}function Qh(){for(var i=[],r=0;r<arguments.length;r++)i=i.concat(kl(arguments[r]));return i}function Xh(){for(var i=0,r=0,n=arguments.length;r<n;r++)i+=arguments[r].length;for(var o=Array(i),l=0,r=0;r<n;r++)for(var u=arguments[r],d=0,p=u.length;d<p;d++,l++)o[l]=u[d];return o}function Zh(i,r,n){if(n||arguments.length===2)for(var o=0,l=r.length,u;o<l;o++)(u||!(o in r))&&(u||(u=Array.prototype.slice.call(r,0,o)),u[o]=r[o]);return i.concat(u||Array.prototype.slice.call(r))}function bn(i){return this instanceof bn?(this.v=i,this):new bn(i)}function ef(i,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,r||[]),l,u=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(v){return function(N){return Promise.resolve(N).then(v,w)}}function p(v,N){o[v]&&(l[v]=function(k){return new Promise(function(E,D){u.push([v,k,E,D])>1||m(v,k)})},N&&(l[v]=N(l[v])))}function m(v,N){try{y(o[v](N))}catch(k){b(u[0][3],k)}}function y(v){v.value instanceof bn?Promise.resolve(v.value.v).then(x,w):b(u[0][2],v)}function x(v){m("next",v)}function w(v){m("throw",v)}function b(v,N){v(N),u.shift(),u.length&&m(u[0][0],u[0][1])}}function tf(i){var r,n;return r={},o("next"),o("throw",function(l){throw l}),o("return"),r[Symbol.iterator]=function(){return this},r;function o(l,u){r[l]=i[l]?function(d){return(n=!n)?{value:bn(i[l](d)),done:!1}:u?u(d):d}:u}}function rf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i[Symbol.asyncIterator],n;return r?r.call(i):(i=typeof Ki=="function"?Ki(i):i[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(u){n[u]=i[u]&&function(d){return new Promise(function(p,m){d=i[u](d),l(p,m,d.done,d.value)})}}function l(u,d,p,m){Promise.resolve(m).then(function(y){u({value:y,done:p})},d)}}function nf(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i}var rg=Object.create?(function(i,r){Object.defineProperty(i,"default",{enumerable:!0,value:r})}):function(i,r){i.default=r},hl=function(i){return hl=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},hl(i)};function sf(i){if(i&&i.__esModule)return i;var r={};if(i!=null)for(var n=hl(i),o=0;o<n.length;o++)n[o]!=="default"&&Xi(r,i,n[o]);return rg(r,i),r}function of(i){return i&&i.__esModule?i:{default:i}}function af(i,r,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?i!==r||!o:!r.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(i):o?o.value:r.get(i)}function lf(i,r,n,o,l){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?i!==r||!l:!r.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?l.call(i,n):l?l.value=n:r.set(i,n),n}function uf(i,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?r===i:i.has(r)}function cf(i,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var o,l;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=r[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose],n&&(l=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");l&&(o=function(){try{l.call(this)}catch(u){return Promise.reject(u)}}),i.stack.push({value:r,dispose:o,async:n})}else n&&i.stack.push({async:!0});return r}var ng=typeof SuppressedError=="function"?SuppressedError:function(i,r,n){var o=new Error(n);return o.name="SuppressedError",o.error=i,o.suppressed=r,o};function df(i){function r(u){i.error=i.hasError?new ng(u,i.error,"An error was suppressed during disposal."):u,i.hasError=!0}var n,o=0;function l(){for(;n=i.stack.pop();)try{if(!n.async&&o===1)return o=0,i.stack.push(n),Promise.resolve().then(l);if(n.dispose){var u=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(u).then(l,function(d){return r(d),l()})}else o|=1}catch(d){r(d)}if(o===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return l()}function hf(i,r){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,l,u,d){return o?r?".jsx":".js":l&&(!u||!d)?n:l+u+"."+d.toLowerCase()+"js"}):i}const sg={__extends:Fh,__assign:Ji,__rest:Sn,__decorate:zh,__param:Vh,__esDecorate:Hh,__runInitializers:Wh,__propKey:Jh,__setFunctionName:Kh,__metadata:qh,__awaiter:ee,__generator:Yh,__createBinding:Xi,__exportStar:Gh,__values:Ki,__read:kl,__spread:Qh,__spreadArrays:Xh,__spreadArray:Zh,__await:bn,__asyncGenerator:ef,__asyncDelegator:tf,__asyncValues:rf,__makeTemplateObject:nf,__importStar:sf,__importDefault:of,__classPrivateFieldGet:af,__classPrivateFieldSet:lf,__classPrivateFieldIn:uf,__addDisposableResource:cf,__disposeResources:df,__rewriteRelativeImportExtension:hf},ig=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:cf,get __assign(){return Ji},__asyncDelegator:tf,__asyncGenerator:ef,__asyncValues:rf,__await:bn,__awaiter:ee,__classPrivateFieldGet:af,__classPrivateFieldIn:uf,__classPrivateFieldSet:lf,__createBinding:Xi,__decorate:zh,__disposeResources:df,__esDecorate:Hh,__exportStar:Gh,__extends:Fh,__generator:Yh,__importDefault:of,__importStar:sf,__makeTemplateObject:nf,__metadata:qh,__param:Vh,__propKey:Jh,__read:kl,__rest:Sn,__rewriteRelativeImportExtension:hf,__runInitializers:Wh,__setFunctionName:Kh,__spread:Qh,__spreadArray:Zh,__spreadArrays:Xh,__values:Ki,default:sg},Symbol.toStringTag,{value:"Module"})),og=i=>i?(...r)=>i(...r):(...r)=>fetch(...r);class El extends Error{constructor(r,n="FunctionsError",o){super(r),this.name=n,this.context=o}}class ag extends El{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class zd extends El{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Vd extends El{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var fl;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(fl||(fl={}));class lg{constructor(r,{headers:n={},customFetch:o,region:l=fl.Any}={}){this.url=r,this.headers=n,this.region=l,this.fetch=og(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return ee(this,arguments,void 0,function*(n,o={}){var l;let u,d;try{const{headers:p,method:m,body:y,signal:x,timeout:w}=o;let b={},{region:v}=o;v||(v=this.region);const N=new URL(`${this.url}/${n}`);v&&v!=="any"&&(b["x-region"]=v,N.searchParams.set("forceFunctionRegion",v));let k;y&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",k=y):typeof y=="string"?(b["Content-Type"]="text/plain",k=y):typeof FormData<"u"&&y instanceof FormData?k=y:(b["Content-Type"]="application/json",k=JSON.stringify(y)):k=y;let E=x;w&&(d=new AbortController,u=setTimeout(()=>d.abort(),w),x?(E=d.signal,x.addEventListener("abort",()=>d.abort())):E=d.signal);const D=yield this.fetch(N.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),p),body:k,signal:E}).catch(ne=>{throw new ag(ne)}),L=D.headers.get("x-relay-error");if(L&&L==="true")throw new zd(D);if(!D.ok)throw new Vd(D);let I=((l=D.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),H;return I==="application/json"?H=yield D.json():I==="application/octet-stream"||I==="application/pdf"?H=yield D.blob():I==="text/event-stream"?H=D:I==="multipart/form-data"?H=yield D.formData():H=yield D.text(),{data:H,error:null,response:D}}catch(p){return{data:null,error:p,response:p instanceof Vd||p instanceof zd?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var Ze={};const jn=Jm(ig);var Li={},$i={},Ui={},Mi={},Bi={},Fi={},Hd;function ff(){if(Hd)return Fi;Hd=1,Object.defineProperty(Fi,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Fi.default=i,Fi}var Wd;function pf(){if(Wd)return Bi;Wd=1,Object.defineProperty(Bi,"__esModule",{value:!0});const r=jn.__importDefault(ff());class n{constructor(l){var u,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let p=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var y,x,w,b;let v=null,N=null,k=null,E=m.status,D=m.statusText;if(m.ok){if(this.method!=="HEAD"){const ne=await m.text();ne===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?N=ne:N=JSON.parse(ne))}const I=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),H=(w=m.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");I&&H&&H.length>1&&(k=parseInt(H[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(v={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,k=null,E=406,D="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const I=await m.text();try{v=JSON.parse(I),Array.isArray(v)&&m.status===404&&(N=[],v=null,E=200,D="OK")}catch{m.status===404&&I===""?(E=204,D="No Content"):v={message:I}}if(v&&this.isMaybeSingle&&(!((b=v?.details)===null||b===void 0)&&b.includes("0 rows"))&&(v=null,E=200,D="OK"),v&&this.shouldThrowOnError)throw new r.default(v)}return{error:v,data:N,count:k,status:E,statusText:D}});return this.shouldThrowOnError||(p=p.catch(m=>{var y,x,w,b,v,N;let k="";const E=m?.cause;if(E){const D=(y=E?.message)!==null&&y!==void 0?y:"",L=(x=E?.code)!==null&&x!==void 0?x:"";k=`${(w=m?.name)!==null&&w!==void 0?w:"FetchError"}: ${m?.message}`,k+=`

Caused by: ${(b=E?.name)!==null&&b!==void 0?b:"Error"}: ${D}`,L&&(k+=` (${L})`),E?.stack&&(k+=`
${E.stack}`)}else k=(v=m?.stack)!==null&&v!==void 0?v:"";return{error:{message:`${(N=m?.name)!==null&&N!==void 0?N:"FetchError"}: ${m?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(l,u)}returns(){return this}overrideTypes(){return this}}return Bi.default=n,Bi}var Jd;function mf(){if(Jd)return Mi;Jd=1,Object.defineProperty(Mi,"__esModule",{value:!0});const r=jn.__importDefault(pf());class n extends r.default{select(l){let u=!1;const d=(l??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:d,foreignTable:p,referencedTable:m=p}={}){const y=m?`${m}.order`:"order",x=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${x?`${x},`:""}${l}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${l}`),this}range(l,u,{foreignTable:d,referencedTable:p=d}={}){const m=typeof p>"u"?"offset":`${p}.offset`,y=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(m,`${l}`),this.url.searchParams.set(y,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:d=!1,buffers:p=!1,wal:m=!1,format:y="text"}={}){var x;const w=[l?"analyze":null,u?"verbose":null,d?"settings":null,p?"buffers":null,m?"wal":null].filter(Boolean).join("|"),b=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${b}"; options=${w};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Mi.default=n,Mi}var Kd;function Nl(){if(Kd)return Ui;Kd=1,Object.defineProperty(Ui,"__esModule",{value:!0});const r=jn.__importDefault(mf()),n=new RegExp("[,()]");class o extends r.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}regexMatch(u,d){return this.url.searchParams.append(u,`match.${d}`),this}regexIMatch(u,d){return this.url.searchParams.append(u,`imatch.${d}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}isDistinct(u,d){return this.url.searchParams.append(u,`isdistinct.${d}`),this}in(u,d){const p=Array.from(new Set(d)).map(m=>typeof m=="string"&&n.test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(u,`in.(${p})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:p,type:m}={}){let y="";m==="plain"?y="pl":m==="phrase"?y="ph":m==="websearch"&&(y="w");const x=p===void 0?"":`(${p})`;return this.url.searchParams.append(u,`${y}fts${x}.${d}`),this}match(u){return Object.entries(u).forEach(([d,p])=>{this.url.searchParams.append(d,`eq.${p}`)}),this}not(u,d,p){return this.url.searchParams.append(u,`not.${d}.${p}`),this}or(u,{foreignTable:d,referencedTable:p=d}={}){const m=p?`${p}.or`:"or";return this.url.searchParams.append(m,`(${u})`),this}filter(u,d,p){return this.url.searchParams.append(u,`${d}.${p}`),this}}return Ui.default=o,Ui}var qd;function gf(){if(qd)return $i;qd=1,Object.defineProperty($i,"__esModule",{value:!0});const r=jn.__importDefault(Nl());class n{constructor(l,{headers:u={},schema:d,fetch:p}){this.url=l,this.headers=new Headers(u),this.schema=d,this.fetch=p}select(l,u){const{head:d=!1,count:p}=u??{},m=d?"HEAD":"GET";let y=!1;const x=(l??"*").split("").map(w=>/\s/.test(w)&&!y?"":(w==='"'&&(y=!y),w)).join("");return this.url.searchParams.set("select",x),p&&this.headers.append("Prefer",`count=${p}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:d=!0}={}){var p;const m="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(y.length>0){const x=[...new Set(y)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:d=!1,count:p,defaultToNull:m=!0}={}){var y;const x="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const w=l.reduce((b,v)=>b.concat(Object.keys(v)),[]);if(w.length>0){const b=[...new Set(w)].map(v=>`"${v}"`);this.url.searchParams.set("columns",b.join(","))}}return new r.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(l,{count:u}={}){var d;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var u;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new r.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return $i.default=n,$i}var Yd;function ug(){if(Yd)return Li;Yd=1,Object.defineProperty(Li,"__esModule",{value:!0});const i=jn,r=i.__importDefault(gf()),n=i.__importDefault(Nl());class o{constructor(u,{headers:d={},schema:p,fetch:m}={}){this.url=u,this.headers=new Headers(d),this.schemaName=p,this.fetch=m}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const d=new URL(`${this.url}/${u}`);return new r.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:p=!1,get:m=!1,count:y}={}){var x;let w;const b=new URL(`${this.url}/rpc/${u}`);let v;p||m?(w=p?"HEAD":"GET",Object.entries(d).filter(([k,E])=>E!==void 0).map(([k,E])=>[k,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([k,E])=>{b.searchParams.append(k,E)})):(w="POST",v=d);const N=new Headers(this.headers);return y&&N.set("Prefer",`count=${y}`),new n.default({method:w,url:b,headers:N,schema:this.schemaName,body:v,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Li.default=o,Li}var Gd;function cg(){if(Gd)return Ze;Gd=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.PostgrestError=Ze.PostgrestBuilder=Ze.PostgrestTransformBuilder=Ze.PostgrestFilterBuilder=Ze.PostgrestQueryBuilder=Ze.PostgrestClient=void 0;const i=jn,r=i.__importDefault(ug());Ze.PostgrestClient=r.default;const n=i.__importDefault(gf());Ze.PostgrestQueryBuilder=n.default;const o=i.__importDefault(Nl());Ze.PostgrestFilterBuilder=o.default;const l=i.__importDefault(mf());Ze.PostgrestTransformBuilder=l.default;const u=i.__importDefault(pf());Ze.PostgrestBuilder=u.default;const d=i.__importDefault(ff());return Ze.PostgrestError=d.default,Ze.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:d.default},Ze}var yf=cg();const vf=Wm(yf),dg=Hm({__proto__:null,default:vf},[yf]),{PostgrestClient:hg,PostgrestQueryBuilder:Sw,PostgrestFilterBuilder:jw,PostgrestTransformBuilder:kw,PostgrestBuilder:Ew,PostgrestError:Nw}=vf||dg;class fg{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const o=this.getWebSocketConstructor();return new o(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const pg="2.84.0",mg=`realtime-js/${pg}`,wf="1.0.0",gg="2.0.0",Qd=wf,pl=1e4,yg=1e3,vg=100;var Dr;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Dr||(Dr={}));var ze;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ze||(ze={}));var It;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(It||(It={}));var ml;(function(i){i.websocket="websocket"})(ml||(ml={}));var Lr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Lr||(Lr={}));class wg{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,o,l,u;const d=r.topic,p=(n=r.ref)!==null&&n!==void 0?n:"",m=(o=r.join_ref)!==null&&o!==void 0?o:"",y=r.payload.event,x=(u=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&u!==void 0?u:new ArrayBuffer(0),w=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+d.length+y.length,b=new ArrayBuffer(this.HEADER_LENGTH+w);let v=new DataView(b),N=0;v.setUint8(N++,this.KINDS.userBroadcastPush),v.setUint8(N++,m.length),v.setUint8(N++,p.length),v.setUint8(N++,d.length),v.setUint8(N++,y.length),v.setUint8(N++,this.BINARY_ENCODING),Array.from(m,E=>v.setUint8(N++,E.charCodeAt(0))),Array.from(p,E=>v.setUint8(N++,E.charCodeAt(0))),Array.from(d,E=>v.setUint8(N++,E.charCodeAt(0))),Array.from(y,E=>v.setUint8(N++,E.charCodeAt(0)));var k=new Uint8Array(b.byteLength+x.byteLength);return k.set(new Uint8Array(b),0),k.set(new Uint8Array(x),b.byteLength),k.buffer}_encodeJsonUserBroadcastPush(r){var n,o,l,u;const d=r.topic,p=(n=r.ref)!==null&&n!==void 0?n:"",m=(o=r.join_ref)!==null&&o!==void 0?o:"",y=r.payload.event,x=(u=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&u!==void 0?u:{},b=new TextEncoder().encode(JSON.stringify(x)).buffer,v=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+d.length+y.length,N=new ArrayBuffer(this.HEADER_LENGTH+v);let k=new DataView(N),E=0;k.setUint8(E++,this.KINDS.userBroadcastPush),k.setUint8(E++,m.length),k.setUint8(E++,p.length),k.setUint8(E++,d.length),k.setUint8(E++,y.length),k.setUint8(E++,this.JSON_ENCODING),Array.from(m,L=>k.setUint8(E++,L.charCodeAt(0))),Array.from(p,L=>k.setUint8(E++,L.charCodeAt(0))),Array.from(d,L=>k.setUint8(E++,L.charCodeAt(0))),Array.from(y,L=>k.setUint8(E++,L.charCodeAt(0)));var D=new Uint8Array(N.byteLength+b.byteLength);return D.set(new Uint8Array(N),0),D.set(new Uint8Array(b),N.byteLength),D.buffer}decode(r,n){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return n(o)}if(typeof r=="string"){const o=JSON.parse(r),[l,u,d,p,m]=o;return n({join_ref:l,ref:u,topic:d,event:p,payload:m})}return n({})}_binaryDecode(r){const n=new DataView(r),o=n.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,l)}}_decodeUserBroadcast(r,n,o){const l=n.getUint8(1),u=n.getUint8(2),d=n.getUint8(3),p=n.getUint8(4);let m=this.HEADER_LENGTH+4;const y=o.decode(r.slice(m,m+l));m=m+l;const x=o.decode(r.slice(m,m+u));m=m+u;const w=o.decode(r.slice(m,m+d));m=m+d;const b=r.slice(m,r.byteLength),v=p===this.JSON_ENCODING?JSON.parse(o.decode(b)):b,N={type:this.BROADCAST_EVENT,event:x,payload:v};return d>0&&(N.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class xf{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ne||(Ne={}));const Xd=(i,r,n={})=>{var o;const l=(o=n.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((u,d)=>(u[d]=xg(d,i,r,l),u),{}):{}},xg=(i,r,n,o)=>{const l=r.find(p=>p.name===i),u=l?.type,d=n[i];return u&&!o.includes(u)?_f(u,d):gl(d)},_f=(i,r)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return jg(r,n)}switch(i){case Ne.bool:return _g(r);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return bg(r);case Ne.json:case Ne.jsonb:return Sg(r);case Ne.timestamp:return kg(r);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return gl(r);default:return gl(r)}},gl=i=>i,_g=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},bg=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},Sg=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(r){return console.log(`JSON parse error: ${r}`),i}return i},jg=(i,r)=>{if(typeof i!="string")return i;const n=i.length-1,o=i[n];if(i[0]==="{"&&o==="}"){let u;const d=i.slice(1,n);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(p=>_f(r,p))}return i},kg=i=>typeof i=="string"?i.replace(" ","T"):i,bf=i=>{const r=new URL(i);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class el{constructor(r,n,o={},l=pl){this.channel=r,this.event=n,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var o;return this._hasReceived(r)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Zd;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Zd||(Zd={}));class hs{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hs.syncState(this.state,l,u,d),this.pendingDiffs.forEach(m=>{this.state=hs.syncDiff(this.state,m,u,d)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},l=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=hs.syncDiff(this.state,l,u,d),p())}),this.onJoin((l,u,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:d})}),this.onLeave((l,u,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,o,l){const u=this.cloneDeep(r),d=this.transformState(n),p={},m={};return this.map(u,(y,x)=>{d[y]||(m[y]=x)}),this.map(d,(y,x)=>{const w=u[y];if(w){const b=x.map(E=>E.presence_ref),v=w.map(E=>E.presence_ref),N=x.filter(E=>v.indexOf(E.presence_ref)<0),k=w.filter(E=>b.indexOf(E.presence_ref)<0);N.length>0&&(p[y]=N),k.length>0&&(m[y]=k)}else p[y]=x}),this.syncDiff(u,{joins:p,leaves:m},o,l)}static syncDiff(r,n,o,l){const{joins:u,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(u,(p,m)=>{var y;const x=(y=r[p])!==null&&y!==void 0?y:[];if(r[p]=this.cloneDeep(m),x.length>0){const w=r[p].map(v=>v.presence_ref),b=x.filter(v=>w.indexOf(v.presence_ref)<0);r[p].unshift(...b)}o(p,x,m)}),this.map(d,(p,m)=>{let y=r[p];if(!y)return;const x=m.map(w=>w.presence_ref);y=y.filter(w=>x.indexOf(w.presence_ref)<0),r[p]=y,l(p,y,m),y.length===0&&delete r[p]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(o=>n(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,o)=>{const l=r[o];return"metas"in l?n[o]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[o]=l,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var eh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(eh||(eh={}));var fs;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(fs||(fs={}));var qt;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(qt||(qt={}));class Pl{constructor(r,n={config:{}},o){var l,u;if(this.topic=r,this.params=n,this.socket=o,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new el(this,It.join,this.params,this.timeout),this.rejoinTimer=new xf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(It.reply,{},(d,p)=>{this._trigger(this._replyEventName(p),d)}),this.presence=new hs(this),this.broadcastEndpointURL=bf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var o,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){const{config:{broadcast:d,presence:p,private:m}}=this.params,y=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(v=>v.filter))!==null&&l!==void 0?l:[],x=!!this.bindings[fs.PRESENCE]&&this.bindings[fs.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},b={broadcast:d,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:y,private:m};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(v=>r?.(qt.CHANNEL_ERROR,v)),this._onClose(()=>r?.(qt.CLOSED)),this.updateJoinPayload(Object.assign({config:b},w)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var N;if(this.socket.setAuth(),v===void 0){r?.(qt.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,E=(N=k?.length)!==null&&N!==void 0?N:0,D=[];for(let L=0;L<E;L++){const I=k[L],{filter:{event:H,schema:ne,table:F,filter:W}}=I,ce=v&&v[L];if(ce&&ce.event===H&&ce.schema===ne&&ce.table===F&&ce.filter===W)D.push(Object.assign(Object.assign({},I),{id:ce.id}));else{this.unsubscribe(),this.state=ze.errored,r?.(qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,r&&r(qt.SUBSCRIBED);return}}).receive("error",v=>{this.state=ze.errored,r?.(qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{r?.(qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,o){return this.state===ze.joined&&r===fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,n,o)}async httpSend(r,n,o={}){var l;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const y=await p.json();m=y.error||y.message||m}catch{}return Promise.reject(new Error(m))}async send(r,n={}){var o,l;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=r,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=y.body)===null||l===void 0?void 0:l.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,p,m;const y=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((m=(p=(d=this.params)===null||d===void 0?void 0:d.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=ze.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(It.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new el(this,It.leave,{},r),o.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ze.closed,this.bindings={}}async _fetchWithTimeout(r,n,o){const l=new AbortController,u=setTimeout(()=>l.abort(),o),d=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),d}_push(r,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new el(this,r,n,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>vg){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,o){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,o){var l,u;const d=r.toLocaleLowerCase(),{close:p,error:m,leave:y,join:x}=It;if(o&&[p,m,y,x].indexOf(d)>=0&&o!==this._joinRef())return;let b=this._onMessage(d,n,o);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(v=>{var N,k,E;return((N=v.filter)===null||N===void 0?void 0:N.event)==="*"||((E=(k=v.filter)===null||k===void 0?void 0:k.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===d}).map(v=>v.callback(b,o)):(u=this.bindings[d])===null||u===void 0||u.filter(v=>{var N,k,E,D,L,I;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in v){const H=v.id,ne=(N=v.filter)===null||N===void 0?void 0:N.event;return H&&((k=n.ids)===null||k===void 0?void 0:k.includes(H))&&(ne==="*"||ne?.toLocaleLowerCase()===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const H=(L=(D=v?.filter)===null||D===void 0?void 0:D.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return H==="*"||H===((I=n?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===d}).map(v=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:k,table:E,commit_timestamp:D,type:L,errors:I}=N;b=Object.assign(Object.assign({},{schema:k,table:E,commit_timestamp:D,eventType:L,new:{},old:{},errors:I}),this._getPayloadRecords(N))}v.callback(b,o)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,o){const l=r.toLocaleLowerCase(),u={type:l,filter:n,callback:o};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(r,n){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&Pl.isEqual(l.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const o in r)if(r[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(It.close,{},r)}_onError(r){this._on(It.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=Xd(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=Xd(r.columns,r.old_record)),n}}const tl=()=>{},zi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Eg=[1e3,2e3,5e3,1e4],Ng=1e4,Pg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Cg{constructor(r,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pl,this.transport=null,this.heartbeatIntervalMs=zi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tl,this.ref=0,this.reconnectTimer=null,this.vsn=Qd,this.logger=tl,this.conn=null,this.sendBuffer=[],this.serializer=new wg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...u)=>l(...u):(...u)=>fetch(...u),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${ml.websocket}`,this.httpEndpoint=bf(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fg.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,o){this.logger(r,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Dr.connecting:return Lr.Connecting;case Dr.open:return Lr.Open;case Dr.closing:return Lr.Closing;default:return Lr.Closed}}isConnected(){return this.connectionState()===Lr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const o=`realtime:${r}`,l=this.getChannels().find(u=>u.topic===o);if(l)return l;{const u=new Pl(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:o,payload:l,ref:u}=r,d=()=>{this.encode(r,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${n} ${o} (${u})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(yg,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:u,ref:d}=n,p=d?`(${d})`:"",m=u.status||"";this.log("receive",`${m} ${o} ${l} ${p}`.trim(),u),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(l,u,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Dr.open||this.conn.readyState===Dr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(It.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const o=r.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${r}${o}${l}`}_workerObjectUrl(r){let n;if(r)n=r;else{const o=new Blob([Pg],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n;r?n=r:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const l={access_token:n,version:mg};n&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(It.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(n)}catch(l){this.log("error",`error in ${r} callback`,l)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new xf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,o,l,u,d,p,m,y,x,w,b,v;switch(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:pl,this.heartbeatIntervalMs=(l=r?.heartbeatIntervalMs)!==null&&l!==void 0?l:zi.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=r?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(p=r?.heartbeatCallback)!==null&&p!==void 0?p:tl,this.vsn=(m=r?.vsn)!==null&&m!==void 0?m:Qd,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=r?.reconnectAfterMs)!==null&&y!==void 0?y:(N=>Eg[N-1]||Ng),this.vsn){case wf:this.encode=(x=r?.encode)!==null&&x!==void 0?x:((N,k)=>k(JSON.stringify(N))),this.decode=(w=r?.decode)!==null&&w!==void 0?w:((N,k)=>k(JSON.parse(N)));break;case gg:this.encode=(b=r?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(v=r?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class Cl extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function Ie(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Og extends Cl{constructor(r,n,o){super(r),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yl extends Cl{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}const Ol=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Tg=()=>Response,vl=i=>{if(Array.isArray(i))return i.map(n=>vl(n));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([n,o])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[l]=vl(o)}),r},Rg=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},rl=i=>{var r;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(r=i.error)===null||r===void 0?void 0:r.message)||JSON.stringify(i)},Ag=(i,r,n)=>ee(void 0,void 0,void 0,function*(){const o=yield Tg();i instanceof o&&!n?.noResolveJson?i.json().then(l=>{const u=i.status||500,d=l?.statusCode||u+"";r(new Og(rl(l),u,d))}).catch(l=>{r(new yl(rl(l),l))}):r(new yl(rl(i),i))}),Ig=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"||!o?l:(Rg(o)?(l.headers=Object.assign({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(o)):l.body=o,r?.duplex&&(l.duplex=r.duplex),Object.assign(Object.assign({},l),n))};function Ss(i,r,n,o,l,u){return ee(this,void 0,void 0,function*(){return new Promise((d,p)=>{i(n,Ig(r,o,l,u)).then(m=>{if(!m.ok)throw m;return o?.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>Ag(m,p,o))})})}function gs(i,r,n,o){return ee(this,void 0,void 0,function*(){return Ss(i,"GET",r,n,o)})}function At(i,r,n,o,l){return ee(this,void 0,void 0,function*(){return Ss(i,"POST",r,o,l,n)})}function wl(i,r,n,o,l){return ee(this,void 0,void 0,function*(){return Ss(i,"PUT",r,o,l,n)})}function Dg(i,r,n,o){return ee(this,void 0,void 0,function*(){return Ss(i,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function Tl(i,r,n,o,l){return ee(this,void 0,void 0,function*(){return Ss(i,"DELETE",r,o,l,n)})}class Lg{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n}then(r,n){return this.execute().then(r,n)}execute(){return ee(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}}var Sf;class $g{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n,this[Sf]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lg(this.downloadFn,this.shouldThrowOnError)}then(r,n){return this.getPromise().then(r,n)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ee(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ie(r))return{data:null,error:r};throw r}})}}Sf=Symbol.toStringTag;const Ug={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},th={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mg{constructor(r,n={},o,l){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=o,this.fetch=Ol(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,n,o,l){return ee(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},th),l);let p=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",this.encodeMetadata(m)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),m&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(m))):(u=o,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType,m&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),l?.headers&&(p=Object.assign(Object.assign({},p),l.headers));const y=this._removeEmptyFolders(n),x=this._getFinalPath(y),w=yield(r=="PUT"?wl:At)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:p},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:y,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ie(u))return{data:null,error:u};throw u}})}upload(r,n,o){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,o)})}uploadToSignedUrl(r,n,o,l){return ee(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${d}`);p.searchParams.set("token",n);try{let m;const y=Object.assign({upsert:th.upsert},l),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&o instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",o)):typeof FormData<"u"&&o instanceof FormData?(m=o,m.append("cacheControl",y.cacheControl)):(m=o,x["cache-control"]=`max-age=${y.cacheControl}`,x["content-type"]=y.contentType);const w=yield wl(this.fetch,p.toString(),m,{headers:x});return{data:{path:u,fullPath:w.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Ie(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,n){return ee(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const l=Object.assign({},this.headers);n?.upsert&&(l["x-upsert"]="true");const u=yield At(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),d=new URL(this.url+u.url),p=d.searchParams.get("token");if(!p)throw new Cl("No token returned by API");return{data:{signedUrl:d.toString(),path:r,token:p},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}update(r,n,o){return ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,o)})}move(r,n,o){return ee(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ie(l))return{data:null,error:l};throw l}})}copy(r,n,o){return ee(this,void 0,void 0,function*(){try{return{data:{path:(yield At(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ie(l))return{data:null,error:l};throw l}})}createSignedUrl(r,n,o){return ee(this,void 0,void 0,function*(){try{let l=this._getFinalPath(r),u=yield At(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ie(l))return{data:null,error:l};throw l}})}createSignedUrls(r,n,o){return ee(this,void 0,void 0,function*(){try{const l=yield At(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ie(l))return{data:null,error:l};throw l}})}download(r,n){const l=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),d=u?`?${u}`:"",p=this._getFinalPath(r),m=()=>gs(this.fetch,`${this.url}/${l}/${p}${d}`,{headers:this.headers,noResolveJson:!0});return new $g(m,this.shouldThrowOnError)}info(r){return ee(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const o=yield gs(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vl(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}exists(r){return ee(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield Dg(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o)&&o instanceof yl){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,n){const o=this._getFinalPath(r),l=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const p=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&l.push(m);let y=l.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${y}`)}}}remove(r){return ee(this,void 0,void 0,function*(){try{return{data:yield Tl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}list(r,n,o){return ee(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},Ug),n),{prefix:r||""});return{data:yield At(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ie(l))return{data:null,error:l};throw l}})}listV2(r,n){return ee(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield At(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const jf="2.84.0",kf={"X-Client-Info":`storage-js/${jf}`};class Bg{constructor(r,n={},o,l){this.shouldThrowOnError=!1;const u=new URL(r);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kf),n),this.fetch=Ol(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return ee(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(r);return{data:yield gs(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}getBucket(r){return ee(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}createBucket(r){return ee(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ie(l))return{data:null,error:l};throw l}})}updateBucket(r,n){return ee(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ie(o))return{data:null,error:o};throw o}})}emptyBucket(r){return ee(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}deleteBucket(r){return ee(this,void 0,void 0,function*(){try{return{data:yield Tl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(r){const n={};return r&&("limit"in r&&(n.limit=String(r.limit)),"offset"in r&&(n.offset=String(r.offset)),r.search&&(n.search=r.search),r.sortColumn&&(n.sortColumn=r.sortColumn),r.sortOrder&&(n.sortOrder=r.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class Fg{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kf),n),this.fetch=Ol(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return ee(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}listBuckets(r){return ee(this,void 0,void 0,function*(){try{const n=new URLSearchParams;r?.limit!==void 0&&n.set("limit",r.limit.toString()),r?.offset!==void 0&&n.set("offset",r.offset.toString()),r?.sortColumn&&n.set("sortColumn",r.sortColumn),r?.sortOrder&&n.set("sortOrder",r.sortOrder),r?.search&&n.set("search",r.search);const o=n.toString(),l=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield gs(this.fetch,l,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}deleteBucket(r){return ee(this,void 0,void 0,function*(){try{return{data:yield Tl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ie(n))return{data:null,error:n};throw n}})}}const Rl={"X-Client-Info":`storage-js/${jf}`,"Content-Type":"application/json"};class Ef extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function gt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class nl extends Ef{constructor(r,n,o){super(r),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zg extends Ef{constructor(r,n){super(r),this.name="StorageVectorsUnknownError",this.originalError=n}}var rh;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(rh||(rh={}));const Al=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Vg=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},nh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Hg=(i,r,n)=>ee(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!n?.noResolveJson){const l=i.status||500,u=i;if(typeof u.json=="function")u.json().then(d=>{const p=d?.statusCode||d?.code||l+"";r(new nl(nh(d),l,p))}).catch(()=>{const d=l+"",p=u.statusText||`HTTP ${l} error`;r(new nl(p,l,d))});else{const d=l+"",p=u.statusText||`HTTP ${l} error`;r(new nl(p,l,d))}}else r(new zg(nh(i),i))}),Wg=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return o?(Vg(o)?(l.headers=Object.assign({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(o)):l.body=o,Object.assign(Object.assign({},l),n)):l};function Jg(i,r,n,o,l,u){return ee(this,void 0,void 0,function*(){return new Promise((d,p)=>{i(n,Wg(r,o,l,u)).then(m=>{if(!m.ok)throw m;if(o?.noResolveJson)return m;const y=m.headers.get("content-type");return!y||!y.includes("application/json")?{}:m.json()}).then(m=>d(m)).catch(m=>Hg(m,p,o))})})}function yt(i,r,n,o,l){return ee(this,void 0,void 0,function*(){return Jg(i,"POST",r,o,l,n)})}class Kg{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rl),n),this.fetch=Al(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return ee(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}getIndex(r,n){return ee(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}listIndexes(r){return ee(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteIndex(r,n){return ee(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}}class qg{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rl),n),this.fetch=Al(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return ee(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield yt(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}getVectors(r){return ee(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listVectors(r){return ee(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield yt(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}queryVectors(r){return ee(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteVectors(r){return ee(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield yt(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}}class Yg{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rl),n),this.fetch=Al(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return ee(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}getBucket(r){return ee(this,void 0,void 0,function*(){try{return{data:yield yt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBuckets(){return ee(this,arguments,void 0,function*(r={}){try{return{data:yield yt(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(r){return ee(this,void 0,void 0,function*(){try{return{data:(yield yt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}}class Gg extends Yg{constructor(r,n={}){super(r,n.headers||{},n.fetch)}from(r){return new Qg(this.url,this.headers,r,this.fetch)}}class Qg extends Kg{constructor(r,n,o,l){super(r,n,l),this.vectorBucketName=o}createIndex(r){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ee(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ee(this,arguments,void 0,function*(n={}){return r.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ee(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ee(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new Xg(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class Xg extends qg{constructor(r,n,o,l,u){super(r,n,u),this.vectorBucketName=o,this.indexName=l}putVectors(r){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ee(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ee(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ee(this,arguments,void 0,function*(n={}){return r.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ee(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ee(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Zg extends Bg{constructor(r,n={},o,l){super(r,n,o,l)}from(r){return new Mg(this.url,this.headers,r,this.fetch)}get vectors(){return new Gg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Fg(this.url+"/iceberg",this.headers,this.fetch)}}const e0="2.84.0";let ds="";typeof Deno<"u"?ds="deno":typeof document<"u"?ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ds="react-native":ds="node";const t0={"X-Client-Info":`supabase-js-${ds}/${e0}`},r0={headers:t0},n0={schema:"public"},s0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i0={},o0=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),a0=()=>Headers,l0=(i,r,n)=>{const o=o0(n),l=a0();return async(u,d)=>{var p;const m=(p=await r())!==null&&p!==void 0?p:i;let y=new l(d?.headers);return y.has("apikey")||y.set("apikey",i),y.has("Authorization")||y.set("Authorization",`Bearer ${m}`),o(u,Object.assign(Object.assign({},d),{headers:y}))}};function u0(i){return i.endsWith("/")?i:i+"/"}function c0(i,r){var n,o;const{db:l,auth:u,realtime:d,global:p}=i,{db:m,auth:y,realtime:x,global:w}=r,b={db:Object.assign(Object.assign({},m),l),auth:Object.assign(Object.assign({},y),u),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},w),p),{headers:Object.assign(Object.assign({},(n=w?.headers)!==null&&n!==void 0?n:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return i.accessToken?b.accessToken=i.accessToken:delete b.accessToken,b}function d0(i){const r=i?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(u0(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Nf="2.84.0",wn=30*1e3,xl=3,sl=xl*wn,h0="http://localhost:9999",f0="supabase.auth.token",p0={"X-Client-Info":`gotrue-js/${Nf}`},_l="X-Supabase-Api-Version",Pf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},m0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,g0=600*1e3;class ys extends Error{constructor(r,n,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function re(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class y0 extends ys{constructor(r,n,o){super(r,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function v0(i){return re(i)&&i.name==="AuthApiError"}class $r extends ys{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class vr extends ys{constructor(r,n,o,l){super(r,o,l),this.name=n,this.status=o}}class mt extends vr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function w0(i){return re(i)&&i.name==="AuthSessionMissingError"}class fn extends vr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vi extends vr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Hi extends vr{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function x0(i){return re(i)&&i.name==="AuthImplicitGrantRedirectError"}class sh extends vr{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bl extends vr{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function il(i){return re(i)&&i.name==="AuthRetryableFetchError"}class ih extends vr{constructor(r,n,o){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class Sl extends vr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oh=` 	
\r=`.split(""),_0=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<oh.length;r+=1)i[oh[r].charCodeAt(0)]=-2;for(let r=0;r<qi.length;r+=1)i[qi[r].charCodeAt(0)]=r;return i})();function ah(i,r,n){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(qi[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(qi[o]),r.queuedBits-=6}}function Cf(i,r,n){const o=_0[i];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function lh(i){const r=[],n=d=>{r.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=d=>{j0(d,o,n)};for(let d=0;d<i.length;d+=1)Cf(i.charCodeAt(d),l,u);return r.join("")}function b0(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function S0(i,r){for(let n=0;n<i.length;n+=1){let o=i.charCodeAt(n);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(i.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}b0(o,r)}}function j0(i,r,n){if(r.utf8seq===0){if(i<=127){n(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function _n(i){const r=[],n={queue:0,queuedBits:0},o=l=>{r.push(l)};for(let l=0;l<i.length;l+=1)Cf(i.charCodeAt(l),n,o);return new Uint8Array(r)}function k0(i){const r=[];return S0(i,n=>r.push(n)),new Uint8Array(r)}function Ur(i){const r=[],n={queue:0,queuedBits:0},o=l=>{r.push(l)};return i.forEach(l=>ah(l,n,o)),ah(null,n,o),r.join("")}function E0(i){return Math.round(Date.now()/1e3)+i}function N0(){return Symbol("auth-callback")}const qe=()=>typeof window<"u"&&typeof document<"u",Rr={tested:!1,writable:!1},Of=()=>{if(!qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rr.tested)return Rr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Rr.tested=!0,Rr.writable=!0}catch{Rr.tested=!0,Rr.writable=!1}return Rr.writable};function P0(i){const r={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{r[u]=l})}catch{}return n.searchParams.forEach((o,l)=>{r[l]=o}),r}const Tf=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),C0=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",xn=async(i,r,n)=>{await i.setItem(r,JSON.stringify(n))},Ar=async(i,r)=>{const n=await i.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},pr=async(i,r)=>{await i.removeItem(r)};class Zi{constructor(){this.promise=new Zi.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}Zi.promiseConstructor=Promise;function ol(i){const r=i.split(".");if(r.length!==3)throw new Sl("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!m0.test(r[o]))throw new Sl("JWT not in base64url format");return{header:JSON.parse(lh(r[0])),payload:JSON.parse(lh(r[1])),signature:_n(r[2]),raw:{header:r[0],payload:r[1]}}}async function O0(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function T0(i,r){return new Promise((o,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await i(u);if(!r(u,null,d)){o(d);return}}catch(d){if(!r(u,d)){l(d);return}}})()})}function R0(i){return("0"+i.toString(16)).substr(-2)}function A0(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(r),Array.from(r,R0).join("")}async function I0(i){const n=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(o);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function D0(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await I0(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pn(i,r,n=!1){const o=A0();let l=o;n&&(l+="/PASSWORD_RECOVERY"),await xn(i,`${r}-code-verifier`,l);const u=await D0(o);return[u,o===u?"plain":"s256"]}const L0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $0(i){const r=i.headers.get(_l);if(!r||!r.match(L0))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function U0(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function M0(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const B0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mn(i){if(!B0.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function al(){const i={};return new Proxy(i,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function F0(i,r){return new Proxy(i,{get:(n,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,l)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,o,l)}})}function uh(i){return JSON.parse(JSON.stringify(i))}const Ir=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),z0=[502,503,504];async function ch(i){var r;if(!C0(i))throw new bl(Ir(i),0);if(z0.includes(i.status))throw new bl(Ir(i),i.status);let n;try{n=await i.json()}catch(u){throw new $r(Ir(u),u)}let o;const l=$0(i);if(l&&l.getTime()>=Pf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new ih(Ir(n),i.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new mt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new ih(Ir(n),i.status,n.weak_password.reasons);throw new y0(Ir(n),i.status||500,o)}const V0=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),n))};async function le(i,r,n,o){var l;const u=Object.assign({},o?.headers);u[_l]||(u[_l]=Pf["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const d=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(d.redirect_to=o.redirectTo);const p=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await H0(i,r,n+p,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(m):{data:Object.assign({},m),error:null}}async function H0(i,r,n,o,l,u){const d=V0(r,o,l,u);let p;try{p=await i(n,Object.assign({},d))}catch(m){throw console.error(m),new bl(Ir(m),0)}if(p.ok||await ch(p),o?.noResolveJson)return p;try{return await p.json()}catch(m){await ch(m)}}function Rt(i){var r;let n=null;K0(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=E0(i.expires_in)));const o=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:n,user:o},error:null}}function dh(i){const r=Rt(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(r.data.weak_password=i.weak_password),r}function gr(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function W0(i){return{data:i,error:null}}function J0(i){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:l,verification_type:u}=i,d=Sn(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:n,hashed_token:o,redirect_to:l,verification_type:u},m=Object.assign({},d);return{data:{properties:p,user:m},error:null}}function hh(i){return i}function K0(i){return i.access_token&&i.refresh_token&&i.expires_in}const ll=["global","local","others"];class q0{constructor({url:r="",headers:n={},fetch:o}){this.url=r,this.headers=n,this.fetch=Tf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=ll[0]){if(ll.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ll.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,n={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gr})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:n}=r,o=Sn(r,["options"]),l=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:J0,redirectTo:n?.redirectTo})}catch(n){if(re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:gr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,o,l,u,d,p,m;try{const y={nextPage:null,lastPage:0,total:0},x=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:hh});if(x.error)throw x.error;const w=await x.json(),b=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,v=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return v.length>0&&(v.forEach(N=>{const k=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(N.split(";")[1].split("=")[1]);y[`${E}Page`]=k}),y.total=parseInt(b)),{data:Object.assign(Object.assign({},w),y),error:null}}catch(y){if(re(y))return{data:{users:[]},error:y};throw y}}async getUserById(r){mn(r);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:gr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){mn(r);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:gr})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,n=!1){mn(r);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:gr})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){mn(r.userId);try{const{data:n,error:o}=await le(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:o}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteFactor(r){mn(r.userId),mn(r.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,o,l,u,d,p,m;try{const y={nextPage:null,lastPage:0,total:0},x=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:hh});if(x.error)throw x.error;const w=await x.json(),b=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,v=(m=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return v.length>0&&(v.forEach(N=>{const k=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(N.split(";")[1].split("=")[1]);y[`${E}Page`]=k}),y.total=parseInt(b)),{data:Object.assign(Object.assign({},w),y),error:null}}catch(y){if(re(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(r){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(re(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}}function fh(i={}){return{getItem:r=>i[r]||null,setItem:(r,n)=>{i[r]=n},removeItem:r=>{delete i[r]}}}const gn={debug:!!(globalThis&&Of()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rf extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Y0 extends Rf{}async function G0(i,r,n){gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),gn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await n()}finally{gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(r===0)throw gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Y0(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(gn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Q0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Af(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function X0(i){return parseInt(i,16)}function Z0(i){const r=new TextEncoder().encode(i);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function ey(i){var r;const{chainId:n,domain:o,expirationTime:l,issuedAt:u=new Date,nonce:d,notBefore:p,requestId:m,resources:y,scheme:x,uri:w,version:b}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((r=i.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const v=Af(i.address),N=x?`${x}://${o}`:o,k=i.statement?`${i.statement}
`:"",E=`${N} wants you to sign in with your Ethereum account:
${v}

${k}`;let D=`URI: ${w}
Version: ${b}
Chain ID: ${n}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(l&&(D+=`
Expiration Time: ${l.toISOString()}`),p&&(D+=`
Not Before: ${p.toISOString()}`),m&&(D+=`
Request ID: ${m}`),y){let L=`
Resources:`;for(const I of y){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);L+=`
- ${I}`}D+=L}return`${E}
${D}`}class Me extends Error{constructor({message:r,code:n,cause:o,name:l}){var u;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=l??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class Yi extends Me{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function ty({error:i,options:r}){var n,o,l;const{publicKey:u}=r;if(!u)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Me({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Me({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(r.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Me({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Me({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Me({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Me({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Me({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Me({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const d=window.location.hostname;if(If(d)){if(u.rp.id!==d)return new Me({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Me({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Me({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Me({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Me({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function ry({error:i,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Me({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Me({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(If(o)){if(n.rpId!==o)return new Me({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Me({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Me({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Me({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class ny{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const sy=new ny;function iy(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:r,user:n,excludeCredentials:o}=i,l=Sn(i,["challenge","user","excludeCredentials"]),u=_n(r).buffer,d=Object.assign(Object.assign({},n),{id:_n(n.id).buffer}),p=Object.assign(Object.assign({},l),{challenge:u,user:d});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const y=o[m];p.excludeCredentials[m]=Object.assign(Object.assign({},y),{id:_n(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return p}function oy(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:r,allowCredentials:n}=i,o=Sn(i,["challenge","allowCredentials"]),l=_n(r).buffer,u=Object.assign(Object.assign({},o),{challenge:l});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const p=n[d];u.allowCredentials[d]=Object.assign(Object.assign({},p),{id:_n(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function ay(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:Ur(new Uint8Array(i.response.attestationObject)),clientDataJSON:Ur(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function ly(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,o=i.getClientExtensionResults(),l=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Ur(new Uint8Array(l.authenticatorData)),clientDataJSON:Ur(new Uint8Array(l.clientDataJSON)),signature:Ur(new Uint8Array(l.signature)),userHandle:l.userHandle?Ur(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function If(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function ph(){var i,r;return!!(qe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function uy(i){try{const r=await navigator.credentials.create(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Yi("Browser returned unexpected credential type",r)}:{data:null,error:new Yi("Empty credential response",r)}}catch(r){return{data:null,error:ty({error:r,options:i})}}}async function cy(i){try{const r=await navigator.credentials.get(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Yi("Browser returned unexpected credential type",r)}:{data:null,error:new Yi("Empty credential response",r)}}catch(r){return{data:null,error:ry({error:r,options:i})}}}const dy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},hy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Gi(...i){const r=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),n=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of i)if(l)for(const u in l){const d=l[u];if(d!==void 0)if(Array.isArray(d))o[u]=d;else if(n(d))o[u]=d;else if(r(d)){const p=o[u];r(p)?o[u]=Gi(p,d):o[u]=Gi(d)}else o[u]=d}return o}function fy(i,r){return Gi(dy,i,r||{})}function py(i,r){return Gi(hy,i,r||{})}class my{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:o,signal:l},u){try{const{data:d,error:p}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!d)return{data:null,error:p};const m=l??sy.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:y}=d.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(d.webauthn.type){case"create":{const y=fy(d.webauthn.credential_options.publicKey,u?.create),{data:x,error:w}=await uy({publicKey:y,signal:m});return x?{data:{factorId:r,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}case"request":{const y=py(d.webauthn.credential_options.publicKey,u?.request),{data:x,error:w}=await cy(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:y,signal:m}));return x?{data:{factorId:r,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}}}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new $r("Unexpected error in challenge",d)}}}async _verify({challengeId:r,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!n)return{data:null,error:new ys("rpId is required for WebAuthn authentication")};try{if(!ph())return{data:null,error:new $r("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:o},signal:l},{request:u});if(!d)return{data:null,error:p};const{webauthn:m}=d;return this._verify({factorId:r,challengeId:d.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:o,credential_response:m.credential_response}})}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new $r("Unexpected error in authenticate",d)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!n)return{data:null,error:new ys("rpId is required for WebAuthn registration")};try{if(!ph())return{data:null,error:new $r("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this._enroll({friendlyName:r});if(!d)return await this.client.mfa.listFactors().then(x=>{var w;return(w=x.data)===null||w===void 0?void 0:w.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===r&&b.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:p};const{data:m,error:y}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:l},{create:u});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:y}}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new $r("Unexpected error in register",d)}}}}Q0();const gy={url:h0,storageKey:f0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:p0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function mh(i,r,n){return await n()}const yn={};class vs{get jwks(){var r,n;return(n=(r=yn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){yn[this.storageKey]=Object.assign(Object.assign({},yn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=yn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){yn[this.storageKey]=Object.assign(Object.assign({},yn[this.storageKey]),{cachedAt:r})}constructor(r){var n,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},gy),r);if(this.storageKey=u.storageKey,this.instanceID=(n=vs.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,vs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&qe()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new q0({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Tf(u.fetch),this.lock=u.lock||mh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:qe()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=G0:this.lock=mh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new my(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Of()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fh(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=fh(this.memoryStorage)),qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Nf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},o="none";if(qe()&&(n=P0(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),qe()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),x0(u)){const m=(r=u.details)===null||r===void 0?void 0:r.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",p),await this._saveSession(d),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return re(n)?this._returnResult({error:n}):this._returnResult({error:new $r("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,o,l;try{const u=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=r?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Rt}),{data:d,error:p}=u;if(p||!d)return this._returnResult({data:{user:null,session:null},error:p});const m=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(r){var n,o,l;try{let u;if("email"in r){const{email:x,password:w,options:b}=r;let v=null,N=null;this.flowType==="pkce"&&([v,N]=await pn(this.storage,this.storageKey)),u=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:x,password:w,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:v,code_challenge_method:N},xform:Rt})}else if("phone"in r){const{phone:x,password:w,options:b}=r;u=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:w,data:(o=b?.data)!==null&&o!==void 0?o:{},channel:(l=b?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Rt})}else throw new Vi("You must provide either an email or phone number and a password");const{data:d,error:p}=u;if(p||!d)return this._returnResult({data:{user:null,session:null},error:p});const m=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:d,options:p}=r;n=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:dh})}else if("phone"in r){const{phone:u,password:d,options:p}=r;n=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:dh})}else throw new Vi("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const u=new fn;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,o,l,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=r.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,o,l,u,d,p,m,y,x,w,b;let v,N;if("message"in r)v=r.message,N=r.signature;else{const{chain:k,wallet:E,statement:D,options:L}=r;let I;if(qe())if(typeof E=="object")I=E;else{const ge=window;if("ethereum"in ge&&typeof ge.ethereum=="object"&&"request"in ge.ethereum&&typeof ge.ethereum.request=="function")I=ge.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=E}const H=new URL((n=L?.url)!==null&&n!==void 0?n:window.location.href),ne=await I.request({method:"eth_requestAccounts"}).then(ge=>ge).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ne||ne.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=Af(ne[0]);let W=(o=L?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!W){const ge=await I.request({method:"eth_chainId"});W=X0(ge)}const ce={domain:H.host,address:F,statement:D,uri:H.href,version:"1",chainId:W,nonce:(l=L?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(d=(u=L?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(p=L?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=L?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(y=L?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(x=L?.signInWithEthereum)===null||x===void 0?void 0:x.resources};v=ey(ce),N=await I.request({method:"personal_sign",params:[Z0(v),F]})}try{const{data:k,error:E}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:N},!((w=r.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=r.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Rt});if(E)throw E;if(!k||!k.session||!k.user){const D=new fn;return this._returnResult({data:{user:null,session:null},error:D})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:E})}catch(k){if(re(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(r){var n,o,l,u,d,p,m,y,x,w,b,v;let N,k;if("message"in r)N=r.message,k=r.signature;else{const{chain:E,wallet:D,statement:L,options:I}=r;let H;if(qe())if(typeof D=="object")H=D;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))H=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=D}const ne=new URL((n=I?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in H&&H.signIn){const F=await H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I?.signInWithSolana),{version:"1",domain:ne.host,uri:ne.href}),L?{statement:L}:null));let W;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")W=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)W=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)N=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),k=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in H)||typeof H.signMessage!="function"||!("publicKey"in H)||typeof H!="object"||!H.publicKey||!("toBase58"in H.publicKey)||typeof H.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${ne.host} wants you to sign in with your Solana account:`,H.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${ne.href}`,`Issued At: ${(l=(o=I?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=I?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((d=I?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((p=I?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((m=I?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((y=I?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((w=(x=I?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||w===void 0)&&w.length?["Resources",...I.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const F=await H.signMessage(new TextEncoder().encode(N),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=F}}try{const{data:E,error:D}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Ur(k)},!((b=r.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(v=r.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Rt});if(D)throw D;if(!E||!E.session||!E.user){const L=new fn;return this._returnResult({data:{user:null,session:null},error:L})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:D})}catch(E){if(re(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(r){const n=await Ar(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(n??"").split("/");try{const{data:u,error:d}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:Rt});if(await pr(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const p=new fn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:d})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(r){try{const{options:n,provider:o,token:l,access_token:u,nonce:d}=r,p=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Rt}),{data:m,error:y}=p;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!m||!m.session||!m.user){const x=new fn;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:y})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,o,l,u,d;try{if("email"in r){const{email:p,options:m}=r;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await pn(this.storage,this.storageKey));const{error:w}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(o=m?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:y,code_challenge_method:x},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in r){const{phone:p,options:m}=r,{data:y,error:x}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=m?.data)!==null&&l!==void 0?l:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:x})}throw new Vi("You must provide either an email or phone number.")}catch(p){if(re(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var n,o;try{let l,u;"options"in r&&(l=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:p}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Rt});if(p)throw p;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,y=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(l){if(re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(r){var n,o,l,u,d;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await pn(this.storage,this.storageKey));const y=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=r?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:W0});return!((u=y.data)===null||u===void 0)&&u.url&&qe()&&!(!((d=r.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(p){if(re(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;if(o)throw o;if(!n)throw new mt;const{error:l}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:o,type:l,options:u}=r,{error:d}=await le(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in r){const{phone:o,type:l,options:u}=r,{data:d,error:p}=await le(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:p})}throw new Vi("You must provide either an email or phone number and a type")}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Ar(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<sl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const d=await Ar(this.userStorage,this.storageKey+"-user");d?.user?r.user=d.user:r.user=al()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};r.user=F0(r.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:gr}):await this._useSession(async n=>{var o,l,u;const{data:d,error:p}=n;if(p)throw p;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:gr})})}catch(n){if(re(n))return w0(n)&&(await this._removeSession(),await pr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async o=>{const{data:l,error:u}=o;if(u)throw u;if(!l.session)throw new mt;const d=l.session;let p=null,m=null;this.flowType==="pkce"&&r.email!=null&&([p,m]=await pn(this.storage,this.storageKey));const{data:y,error:x}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:m}),jwt:d.access_token,xform:gr});if(x)throw x;return d.user=y.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(o){if(re(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new mt;const n=Date.now()/1e3;let o=n,l=!0,u=null;const{payload:d}=ol(r.access_token);if(d.exp&&(o=d.exp,l=o<=n),l){const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:m}=await this._getUser(r.access_token);if(m)throw m;u={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var o;if(!r){const{data:d,error:p}=n;if(p)throw p;r=(o=d.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new mt;const{data:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!qe())throw new Hi("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Hi(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new sh("No code detected.");const{data:L,error:I}=await this._exchangeCodeForSession(r.code);if(I)throw I;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:u,refresh_token:d,expires_in:p,expires_at:m,token_type:y}=r;if(!u||!p||!d||!y)throw new Hi("No session defined in URL");const x=Math.round(Date.now()/1e3),w=parseInt(p);let b=x+w;m&&(b=parseInt(m));const v=b-x;v*1e3<=wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${w}s`);const N=b-w;x-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,x):x-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,x);const{data:k,error:E}=await this._getUser(u);if(E)throw E;const D={provider_token:o,provider_refresh_token:l,access_token:u,expires_in:w,expires_at:b,refresh_token:d,token_type:y,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:r.type},error:null})}catch(o){if(re(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Ar(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({error:u});const d=(o=l.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:p}=await this.admin.signOut(d,r);if(p&&!(v0(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await pr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=N0(),o={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async n=>{var o,l;try{const{data:{session:u},error:d}=n;if(d)throw d;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(r))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await pn(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(re(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var r;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:o,error:l}=await this._useSession(async u=>{var d,p,m,y,x;const{data:w,error:b}=u;if(b)throw b;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(d=r.options)===null||d===void 0?void 0:d.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=r.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",v,{headers:this.headers,jwt:(x=(y=w.session)===null||y===void 0?void 0:y.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return qe()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(re(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var o;try{const{error:l,data:{session:u}}=n;if(l)throw l;const{options:d,provider:p,token:m,access_token:y,nonce:x}=r,w=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:m,access_token:y,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Rt}),{data:b,error:v}=w;return v?this._returnResult({data:{user:null,session:null},error:v}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new fn}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:v}))}catch(l){if(re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var o,l;const{data:u,error:d}=n;if(d)throw d;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await T0(async l=>(l>0&&await O0(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Rt})),(l,u)=>{const d=200*Math.pow(2,l);return u&&il(u)&&Date.now()+d-o<wn})}catch(o){if(this._debug(n,"error",o),re(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",o),qe()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Ar(this.storage,this.storageKey);if(l&&this.userStorage){let d=await Ar(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await xn(this.userStorage,this.storageKey+"-user",d)),l.user=(r=d?.user)!==null&&r!==void 0?r:al()}else if(l&&!l.user&&!l.user){const d=await Ar(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await pr(this.storage,this.storageKey+"-user"),await xn(this.storage,this.storageKey,l)):l.user=al()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const u=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<sl;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${sl}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),il(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:p}=await this._getUser(l.access_token);!p&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var n,o;if(!r)throw new mt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Zi;const{data:u,error:d}=await this._refreshAccessToken(r);if(d)throw d;if(!u.session)throw new mt;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(l,"error",u),re(u)){const d={data:null,error:u};return il(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(r,n,o=!0){const l=`#_notifyAllSubscribers(${r})`;this._debug(l,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,n)}catch(m){u.push(m)}});if(await Promise.all(d),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const n=Object.assign({},r),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await xn(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const u=uh(l);await xn(this.storage,this.storageKey,u)}else{const l=uh(n);await xn(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await pr(this.storage,this.storageKey),await pr(this.storage,this.storageKey+"-code-verifier"),await pr(this.storage,this.storageKey+"-user"),this.userStorage&&await pr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&qe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),wn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-r)/wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${wn}ms, refresh threshold is ${xl} ticks`),l<=xl&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Rf)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,o){const l=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,d]=await pn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(p.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);l.push(u.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${l.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;return u?this._returnResult({data:null,error:u}):await le(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var o,l;const{data:u,error:d}=n;if(d)return this._returnResult({data:null,error:d});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:m,error:y}=await le(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(r.factorType==="totp"&&m.type==="totp"&&(!((l=m?.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?ay(r.webauthn.credential_response):ly(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:m}=await le(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:d,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=await le(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});if(d.error)return d;const{data:p}=d;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:iy(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:oy(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(r=n?.factors)!==null&&r!==void 0?r:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=ol(o.access_token);let d=null;u.aal&&(d=u.aal);let p=d;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const y=u.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;return l?this._returnResult({data:null,error:l}):o?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new mt})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:l},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new mt});const d=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&qe()&&!n?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:l},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new mt});const d=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return d.data&&d.data.redirect_url&&qe()&&!n?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new mt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;return l?this._returnResult({data:null,error:l}):o?await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new mt})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let o=n.keys.find(p=>p.kid===r);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(p=>p.kid===r),o&&this.jwks_cached_at+g0>l)return o;const{data:u,error:d}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,o=u.keys.find(p=>p.kid===r),!o)?null:o}async getClaims(r,n={}){try{let o=r;if(!o){const{data:v,error:N}=await this.getSession();if(N||!v.session)return this._returnResult({data:null,error:N});o=v.session.access_token}const{header:l,payload:u,signature:d,raw:{header:p,payload:m}}=ol(o);n?.allowExpired||U0(u.exp);const y=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!y){const{error:v}=await this.getUser(o);if(v)throw v;return{data:{claims:u,header:l,signature:d},error:null}}const x=M0(l.alg),w=await crypto.subtle.importKey("jwk",y,x,!0,["verify"]);if(!await crypto.subtle.verify(x,w,d,k0(`${p}.${m}`)))throw new Sl("Invalid JWT signature");return{data:{claims:u,header:l,signature:d},error:null}}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}}vs.nextInstanceID={};const yy=vs;class vy extends yy{constructor(r){super(r)}}class wy{constructor(r,n,o){var l,u,d;this.supabaseUrl=r,this.supabaseKey=n;const p=d0(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const m=`sb-${p.hostname.split(".")[0]}-auth-token`,y={db:n0,realtime:i0,auth:Object.assign(Object.assign({},s0),{storageKey:m}),global:r0},x=c0(o??{},y);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(w,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=l0(n,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new hg(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new Zg(this.storageUrl.href,this.headers,this.fetch,o?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new lg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,n,o)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r,n;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:o,storage:l,userStorage:u,storageKey:d,flowType:p,lock:m,debug:y,throwOnError:x},w,b){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vy({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),w),storageKey:d,autoRefreshToken:r,persistSession:n,detectSessionInUrl:o,storage:l,userStorage:u,flowType:p,lock:m,debug:y,throwOnError:x,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new Cg(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,o)=>{this._handleTokenChanged(n,"CLIENT",o?.access_token)})}_handleTokenChanged(r,n,o){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xy=(i,r,n)=>new wy(i,r,n);function _y(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const r=i.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}_y()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const by="https://mfeanurrkllcqqqqugda.supabase.co",Sy="sb_publishable_rf9_dScDbuKluCG8lTKCwg_Y2xV2S_W",et=xy(by,Sy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ky=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,o)=>o?o.toUpperCase():n.toLowerCase()),gh=i=>{const r=ky(i);return r.charAt(0).toUpperCase()+r.slice(1)},Df=(...i)=>i.filter((r,n,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ey={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=te.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:l="",children:u,iconNode:d,...p},m)=>te.createElement("svg",{ref:m,...Ey,width:r,height:r,stroke:i,strokeWidth:o?Number(n)*24/Number(r):n,className:Df("lucide",l),...p},[...d.map(([y,x])=>te.createElement(y,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(i,r)=>{const n=te.forwardRef(({className:o,...l},u)=>te.createElement(Ny,{ref:u,iconNode:r,className:Df(`lucide-${jy(gh(i))}`,`lucide-${i}`,o),...l}));return n.displayName=gh(i),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],eo=xe("arrow-left",Py);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Oy=xe("banknote",Cy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ul=xe("bell",Ty);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yh=xe("calendar",Ry);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Lf=xe("check",Ay);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vh=xe("chevron-right",Iy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wh=xe("circle-alert",Dy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ws=xe("circle-check-big",Ly);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cl=xe("circle-help",$y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],xh=xe("clock",Uy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],By=xe("credit-card",My);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],zy=xe("dollar-sign",Fy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$f=xe("globe",Vy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Wy=xe("house",Hy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Ky=xe("lightbulb",Jy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yy=xe("loader-circle",qy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],jt=xe("map-pin",Gy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Xy=xe("navigation",Qy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_h=xe("pen",Zy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["path",{d:"M2 22h20",key:"272qi7"}],["path",{d:"M3.77 10.77 2 9l2-4.5 1.1.55c.55.28.9.84.9 1.45s.35 1.17.9 1.45L8 8.5l3-6 1.05.53a2 2 0 0 1 1.09 1.52l.72 5.4a2 2 0 0 0 1.09 1.52l4.4 2.2c.42.22.78.55 1.01.96l.6 1.03c.49.88-.06 1.98-1.06 2.1l-1.18.15c-.47.06-.95-.02-1.37-.24L4.29 11.15a2 2 0 0 1-.52-.38Z",key:"1ma21e"}]],tv=xe("plane-landing",ev);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],nv=xe("plane",rv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Il=xe("plus",sv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],ov=xe("radio",iv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lv=xe("refresh-cw",av);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cv=xe("save",uv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hv=xe("settings",dv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],ps=xe("shopping-bag",fv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Qi=xe("shopping-cart",pv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Dl=xe("sparkles",mv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Uf=xe("trash-2",gv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vv=xe("triangle-alert",yv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],xv=xe("upload",wv);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ll=xe("users",_v);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$l=xe("x",bv),Sv=JSON.parse('[{"city":"","country":"","searchTerms":["Bangkok","Thailand","",""],"items":[{"name":" ","description":" ","shop":" ","estimatedPrice":0,"localPrice":15000,"currency":"THB","category":""}]},{"city":"","country":"","searchTerms":["Danang","Vietnam","",""],"items":[{"name":"","description":" ","shop":"","estimatedPrice":0,"localPrice":3500,"currency":"VND","category":""}]},{"city":"","country":"","searchTerms":["Tokyo","Japan","",""],"items":[{"name":"  ","description":"     (300)","shop":"/","estimatedPrice":0,"localPrice":1700,"currency":"YEN","category":""},{"name":" ()","description":"  ,  ","shop":"/","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""},{"name":"EVE  DX","description":",    (40)","shop":"/","estimatedPrice":0,"localPrice":1100,"currency":"JPY","category":""},{"name":"","description":"      (156)","shop":"/","estimatedPrice":0,"localPrice":700,"currency":"JPY","category":""},{"name":" Ae","description":" ,     (140)","shop":"/","estimatedPrice":0,"localPrice":1100,"currency":"JPY","category":""},{"name":"  ","description":" ,    (24g)","shop":"/","estimatedPrice":0,"localPrice":900,"currency":"JPY","category":""},{"name":"  ","description":"  ,    ","shop":"/","estimatedPrice":0,"localPrice":1500,"currency":"JPY","category":""},{"name":"  ()","description":"      ","shop":"/","estimatedPrice":0,"localPrice":500,"currency":"JPY","category":""},{"name":"   A","description":"     (10)","shop":"/","estimatedPrice":0,"localPrice":800,"currency":"JPY","category":""},{"name":"  A","description":"    (44)","shop":"/","estimatedPrice":0,"localPrice":1400,"currency":"JPY","category":""},{"name":"","description":" ,    ","shop":"/","estimatedPrice":0,"localPrice":700,"currency":"JPY","category":""},{"name":" BB  C","description":",      ","shop":"/","estimatedPrice":0,"localPrice":2800,"currency":"JPY","category":""},{"name":"  A","description":"      (76)","shop":"/","estimatedPrice":0,"localPrice":600,"currency":"JPY","category":""},{"name":"","description":"      ","shop":"/","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""},{"name":" ","description":"     ","shop":"/","estimatedPrice":0,"localPrice":700,"currency":"JPY","category":""},{"name":"  ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":450,"currency":"JPY","category":""},{"name":"  ","description":"     ","shop":"/","estimatedPrice":0,"localPrice":1800,"currency":"JPY","category":""},{"name":" UV ","description":"     ","shop":"/","estimatedPrice":0,"localPrice":800,"currency":"JPY","category":""},{"name":"  UV","description":"    ","shop":"/","estimatedPrice":0,"localPrice":700,"currency":"JPY","category":""},{"name":"  ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""},{"name":"  ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":600,"currency":"JPY","category":""},{"name":"  ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":700,"currency":"JPY","category":""},{"name":"&Honey ()","description":"  ,    ","shop":"/","estimatedPrice":0,"localPrice":1500,"currency":"JPY","category":""},{"name":"  ","description":"    ( )","shop":"/","estimatedPrice":0,"localPrice":700,"currency":"JPY","category":""},{"name":"  ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":600,"currency":"JPY","category":""},{"name":"   ","description":"     ","shop":"/","estimatedPrice":0,"localPrice":700,"currency":"JPY","category":""},{"name":"  ()","description":"     (32)","shop":"/","estimatedPrice":0,"localPrice":1800,"currency":"JPY","category":""},{"name":" CC ","description":" C ,  / ","shop":"/","estimatedPrice":0,"localPrice":1100,"currency":"JPY","category":""},{"name":"  ","description":"  / ","shop":"/","estimatedPrice":0,"localPrice":350,"currency":"JPY","category":""},{"name":" (Babu)","description":"     ","shop":"/","estimatedPrice":0,"localPrice":500,"currency":"JPY","category":""},{"name":" (/ )","description":"    ()","shop":"/","estimatedPrice":0,"localPrice":300,"currency":"JPY","category":""},{"name":" (Alfort)","description":"    ","shop":"/","estimatedPrice":0,"localPrice":100,"currency":"JPY","category":""},{"name":"  ()","description":"   (/ )","shop":"/","estimatedPrice":0,"localPrice":150,"currency":"JPY","category":""},{"name":" ","description":"    (/)","shop":"/","estimatedPrice":0,"localPrice":120,"currency":"JPY","category":""},{"name":"  (Pure)","description":"   ","shop":"/","estimatedPrice":0,"localPrice":130,"currency":"JPY","category":""},{"name":" (Jagabee)","description":"   ","shop":"/","estimatedPrice":0,"localPrice":250,"currency":"JPY","category":""},{"name":"","description":"     ","shop":"/","estimatedPrice":0,"localPrice":150,"currency":"JPY","category":""},{"name":"","description":"   ","shop":"/","estimatedPrice":0,"localPrice":30,"currency":"JPY","category":""},{"name":"","description":"    ()","shop":"","estimatedPrice":0,"localPrice":300,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":200,"currency":"JPY","category":""},{"name":"","description":"    ( )","shop":"","estimatedPrice":0,"localPrice":200,"currency":"JPY","category":""},{"name":"  ()","description":"     ","shop":"/","estimatedPrice":0,"localPrice":250,"currency":"JPY","category":""},{"name":" (Mintia)","description":"    ","shop":"","estimatedPrice":0,"localPrice":100,"currency":"JPY","category":""},{"name":"  ()","description":"    ","shop":"","estimatedPrice":0,"localPrice":120,"currency":"JPY","category":""},{"name":"","description":"    ","shop":"/","estimatedPrice":0,"localPrice":300,"currency":"JPY","category":""},{"name":"  ()","description":"   ","shop":"/","estimatedPrice":0,"localPrice":230,"currency":"JPY","category":""},{"name":"  ","description":"   ","shop":"/","estimatedPrice":0,"localPrice":230,"currency":"JPY","category":""},{"name":"UFO ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":230,"currency":"JPY","category":""},{"name":"  ()","description":"     (5)","shop":"/","estimatedPrice":0,"localPrice":2000,"currency":"JPY","category":""},{"name":"  ()","description":"     ","shop":"","estimatedPrice":0,"localPrice":250,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"","estimatedPrice":0,"localPrice":250,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"","estimatedPrice":0,"localPrice":300,"currency":"JPY","category":""},{"name":" /","description":"   ","shop":"","estimatedPrice":0,"localPrice":120,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"","estimatedPrice":0,"localPrice":400,"currency":"JPY","category":""},{"name":"  ","description":"    ","shop":"","estimatedPrice":0,"localPrice":250,"currency":"JPY","category":""},{"name":" ()","description":",      ","shop":"","estimatedPrice":0,"localPrice":300,"currency":"JPY","category":""},{"name":"","description":"   /  ","shop":"","estimatedPrice":0,"localPrice":200,"currency":"JPY","category":""},{"name":"  ()","description":"    ","shop":"","estimatedPrice":0,"localPrice":250,"currency":"JPY","category":""},{"name":"  ","description":"    ","shop":"","estimatedPrice":0,"localPrice":300,"currency":"JPY","category":""},{"name":"  ","description":"     ","shop":"","estimatedPrice":0,"localPrice":200,"currency":"JPY","category":""},{"name":"  ()","description":"   ","shop":"","estimatedPrice":0,"localPrice":400,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":1600,"currency":"JPY","category":""},{"name":"  ","description":"   ","shop":"/","estimatedPrice":0,"localPrice":800,"currency":"JPY","category":""},{"name":" 23","description":"    ","shop":"/","estimatedPrice":0,"localPrice":5700,"currency":"JPY","category":""},{"name":" ","description":"   ","shop":"/","estimatedPrice":0,"localPrice":4000,"currency":"JPY","category":""},{"name":" ","description":"    (900ml)","shop":"/","estimatedPrice":0,"localPrice":900,"currency":"JPY","category":""},{"name":"  ()","description":"    ","shop":"/","estimatedPrice":0,"localPrice":1000,"currency":"JPY","category":""},{"name":"","description":" 3%   ( )","shop":"/","estimatedPrice":0,"localPrice":110,"currency":"JPY","category":""},{"name":" ","description":" 9%   ","shop":"/","estimatedPrice":0,"localPrice":110,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":250,"currency":"JPY","category":""},{"name":"  ","description":"     ","shop":"/","estimatedPrice":0,"localPrice":220,"currency":"JPY","category":""},{"name":" ","description":"     (12)","shop":"/","estimatedPrice":0,"localPrice":1000,"currency":"JPY","category":""},{"name":"  ","description":"     ","shop":"/","estimatedPrice":0,"localPrice":1900,"currency":"JPY","category":""},{"name":"","description":"     (18)","shop":"/","estimatedPrice":0,"localPrice":600,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":500,"currency":"JPY","category":""},{"name":" ","description":"   (  )","shop":"/","estimatedPrice":0,"localPrice":500,"currency":"JPY","category":""},{"name":"  ","description":"  (   )","shop":"/","estimatedPrice":0,"localPrice":230,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":500,"currency":"JPY","category":""},{"name":" /","description":"   ","shop":"","estimatedPrice":0,"localPrice":990,"currency":"JPY","category":""},{"name":"GU ","description":"    ","shop":"GU","estimatedPrice":0,"localPrice":2000,"currency":"JPY","category":""},{"name":"3COINS ","description":"300    (/ )","shop":"3COINS","estimatedPrice":0,"localPrice":330,"currency":"JPY","category":""},{"name":" ","description":"3 1000   ","shop":"","estimatedPrice":0,"localPrice":1100,"currency":"JPY","category":""},{"name":" ","description":",    ","shop":" 1","estimatedPrice":0,"localPrice":1000,"currency":"JPY","category":""},{"name":" ","description":"     ","shop":"/","estimatedPrice":0,"localPrice":500,"currency":"JPY","category":""},{"name":"WPC ","description":"    ","shop":"/","estimatedPrice":0,"localPrice":2500,"currency":"JPY","category":""},{"name":" ","description":"     (8)","shop":"/","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""},{"name":"   ","description":"&   (10)","shop":"/","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""},{"name":" ","description":"   ","shop":"/","estimatedPrice":0,"localPrice":1100,"currency":"JPY","category":""},{"name":"","description":"   ( )","shop":" ","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""},{"name":" ","description":"    (12)","shop":"","estimatedPrice":0,"localPrice":900,"currency":"JPY","category":""},{"name":" ","description":"   ( )","shop":"","estimatedPrice":0,"localPrice":800,"currency":"JPY","category":""},{"name":" ","description":"   ","shop":"","estimatedPrice":0,"localPrice":2000,"currency":"JPY","category":""},{"name":"","description":"     ","shop":"","estimatedPrice":0,"localPrice":1000,"currency":"JPY","category":""},{"name":" ","description":"   ()","shop":"/","estimatedPrice":0,"localPrice":700,"currency":"JPY","category":""},{"name":" ","description":"   ","shop":"/","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""},{"name":"  ","description":"   ","shop":" ","estimatedPrice":0,"localPrice":900,"currency":"JPY","category":""},{"name":" ","description":"    ","shop":"","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""},{"name":"/ ","description":",    ","shop":"/","estimatedPrice":0,"localPrice":1500,"currency":"JPY","category":""},{"name":"  ","description":"   ","shop":" ","estimatedPrice":0,"localPrice":2000,"currency":"JPY","category":""},{"name":" (/)","description":"     ","shop":"","estimatedPrice":0,"localPrice":1200,"currency":"JPY","category":""}]},{"city":"","country":"","searchTerms":["Seoul","South Korea","",""],"items":[{"name":"","description":"","shop":"","estimatedPrice":3000,"localPrice":3000,"currency":"KRW","category":""}]}]'),Mf={recommendations:Sv};var bh;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(bh||(bh={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sh;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(Sh||(Sh={}));var jh;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(jh||(jh={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=["user","model","function","system"];var Eh;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Eh||(Eh={}));var Nh;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Nh||(Nh={}));var Ph;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Ph||(Ph={}));var Ch;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(Ch||(Ch={}));var ms;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(ms||(ms={}));var Oh;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(Oh||(Oh={}));var Th;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Th||(Th={}));var Rh;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Rh||(Rh={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends Error{constructor(r){super(`[GoogleGenerativeAI Error]: ${r}`)}}class vn extends tt{constructor(r,n){super(r),this.response=n}}class Bf extends tt{constructor(r,n,o,l){super(r),this.status=n,this.statusText=o,this.errorDetails=l}}class yr extends tt{}class Ff extends tt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="https://generativelanguage.googleapis.com",kv="v1beta",Ev="0.24.1",Nv="genai-js";var Br;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Br||(Br={}));class Pv{constructor(r,n,o,l,u){this.model=r,this.task=n,this.apiKey=o,this.stream=l,this.requestOptions=u}toString(){var r,n;const o=((r=this.requestOptions)===null||r===void 0?void 0:r.apiVersion)||kv;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||jv}/${o}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function Cv(i){const r=[];return i?.apiClient&&r.push(i.apiClient),r.push(`${Nv}/${Ev}`),r.join(" ")}async function Ov(i){var r;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Cv(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let o=(r=i.requestOptions)===null||r===void 0?void 0:r.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(l){throw new yr(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${l.message}`)}for(const[l,u]of o.entries()){if(l==="x-goog-api-key")throw new yr(`Cannot set reserved header name ${l}`);if(l==="x-goog-api-client")throw new yr(`Header name ${l} can only be set using the apiClient field`);n.append(l,u)}}return n}async function Tv(i,r,n,o,l,u){const d=new Pv(i,r,n,o,u);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},Dv(u)),{method:"POST",headers:await Ov(d),body:l})}}async function js(i,r,n,o,l,u={},d=fetch){const{url:p,fetchOptions:m}=await Tv(i,r,n,o,l,u);return Rv(p,m,d)}async function Rv(i,r,n=fetch){let o;try{o=await n(i,r)}catch(l){Av(l,i)}return o.ok||await Iv(o,i),o}function Av(i,r){let n=i;throw n.name==="AbortError"?(n=new Ff(`Request aborted when fetching ${r.toString()}: ${i.message}`),n.stack=i.stack):i instanceof Bf||i instanceof yr||(n=new tt(`Error fetching from ${r.toString()}: ${i.message}`),n.stack=i.stack),n}async function Iv(i,r){let n="",o;try{const l=await i.json();n=l.error.message,l.error.details&&(n+=` ${JSON.stringify(l.error.details)}`,o=l.error.details)}catch{}throw new Bf(`Error fetching from ${r.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,o)}function Dv(i){const r={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),r.signal=n.signal}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Wi(i.candidates[0]))throw new vn(`${mr(i)}`,i);return Lv(i)}else if(i.promptFeedback)throw new vn(`Text not available. ${mr(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Wi(i.candidates[0]))throw new vn(`${mr(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Ah(i)[0]}else if(i.promptFeedback)throw new vn(`Function call not available. ${mr(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Wi(i.candidates[0]))throw new vn(`${mr(i)}`,i);return Ah(i)}else if(i.promptFeedback)throw new vn(`Function call not available. ${mr(i)}`,i)},i}function Lv(i){var r,n,o,l;const u=[];if(!((n=(r=i.candidates)===null||r===void 0?void 0:r[0].content)===null||n===void 0)&&n.parts)for(const d of(l=(o=i.candidates)===null||o===void 0?void 0:o[0].content)===null||l===void 0?void 0:l.parts)d.text&&u.push(d.text),d.executableCode&&u.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&u.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function Ah(i){var r,n,o,l;const u=[];if(!((n=(r=i.candidates)===null||r===void 0?void 0:r[0].content)===null||n===void 0)&&n.parts)for(const d of(l=(o=i.candidates)===null||o===void 0?void 0:o[0].content)===null||l===void 0?void 0:l.parts)d.functionCall&&u.push(d.functionCall);if(u.length>0)return u}const $v=[ms.RECITATION,ms.SAFETY,ms.LANGUAGE];function Wi(i){return!!i.finishReason&&$v.includes(i.finishReason)}function mr(i){var r,n,o;let l="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)l+="Response was blocked",!((r=i.promptFeedback)===null||r===void 0)&&r.blockReason&&(l+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(l+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((o=i.candidates)===null||o===void 0)&&o[0]){const u=i.candidates[0];Wi(u)&&(l+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(l+=`: ${u.finishMessage}`))}return l}function xs(i){return this instanceof xs?(this.v=i,this):new xs(i)}function Uv(i,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,r||[]),l,u=[];return l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l;function d(b){o[b]&&(l[b]=function(v){return new Promise(function(N,k){u.push([b,v,N,k])>1||p(b,v)})})}function p(b,v){try{m(o[b](v))}catch(N){w(u[0][3],N)}}function m(b){b.value instanceof xs?Promise.resolve(b.value.v).then(y,x):w(u[0][2],b)}function y(b){p("next",b)}function x(b){p("throw",b)}function w(b,v){b(v),u.shift(),u.length&&p(u[0][0],u[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Mv(i){const r=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=zv(r),[o,l]=n.tee();return{stream:Fv(o),response:Bv(l)}}async function Bv(i){const r=[],n=i.getReader();for(;;){const{done:o,value:l}=await n.read();if(o)return Ul(Vv(r));r.push(l)}}function Fv(i){return Uv(this,arguments,function*(){const n=i.getReader();for(;;){const{value:o,done:l}=yield xs(n.read());if(l)break;yield yield xs(Ul(o))}})}function zv(i){const r=i.getReader();return new ReadableStream({start(o){let l="";return u();function u(){return r.read().then(({value:d,done:p})=>{if(p){if(l.trim()){o.error(new tt("Failed to parse stream"));return}o.close();return}l+=d;let m=l.match(Ih),y;for(;m;){try{y=JSON.parse(m[1])}catch{o.error(new tt(`Error parsing JSON response: "${m[1]}"`));return}o.enqueue(y),l=l.substring(m[0].length),m=l.match(Ih)}return u()}).catch(d=>{let p=d;throw p.stack=d.stack,p.name==="AbortError"?p=new Ff("Request aborted when reading from the stream"):p=new tt("Error reading from the stream"),p})}}})}function Vv(i){const r=i[i.length-1],n={promptFeedback:r?.promptFeedback};for(const o of i){if(o.candidates){let l=0;for(const u of o.candidates)if(n.candidates||(n.candidates=[]),n.candidates[l]||(n.candidates[l]={index:l}),n.candidates[l].citationMetadata=u.citationMetadata,n.candidates[l].groundingMetadata=u.groundingMetadata,n.candidates[l].finishReason=u.finishReason,n.candidates[l].finishMessage=u.finishMessage,n.candidates[l].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[l].content||(n.candidates[l].content={role:u.content.role||"user",parts:[]});const d={};for(const p of u.content.parts)p.text&&(d.text=p.text),p.functionCall&&(d.functionCall=p.functionCall),p.executableCode&&(d.executableCode=p.executableCode),p.codeExecutionResult&&(d.codeExecutionResult=p.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),n.candidates[l].content.parts.push(d)}l++}o.usageMetadata&&(n.usageMetadata=o.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(i,r,n,o){const l=await js(r,Br.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),o);return Mv(l)}async function Vf(i,r,n,o){const u=await(await js(r,Br.GENERATE_CONTENT,i,!1,JSON.stringify(n),o)).json();return{response:Ul(u)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function _s(i){let r=[];if(typeof i=="string")r=[{text:i}];else for(const n of i)typeof n=="string"?r.push({text:n}):r.push(n);return Hv(r)}function Hv(i){const r={role:"user",parts:[]},n={role:"function",parts:[]};let o=!1,l=!1;for(const u of i)"functionResponse"in u?(n.parts.push(u),l=!0):(r.parts.push(u),o=!0);if(o&&l)throw new tt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!l)throw new tt("No content is provided for sending chat message.");return o?r:n}function Wv(i,r){var n;let o={model:r?.model,generationConfig:r?.generationConfig,safetySettings:r?.safetySettings,tools:r?.tools,toolConfig:r?.toolConfig,systemInstruction:r?.systemInstruction,cachedContent:(n=r?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const l=i.generateContentRequest!=null;if(i.contents){if(l)throw new yr("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=i.contents}else if(l)o=Object.assign(Object.assign({},o),i.generateContentRequest);else{const u=_s(i);o.contents=[u]}return{generateContentRequest:o}}function Dh(i){let r;return i.contents?r=i:r={contents:[_s(i)]},i.systemInstruction&&(r.systemInstruction=Hf(i.systemInstruction)),r}function Jv(i){return typeof i=="string"||Array.isArray(i)?{content:_s(i)}:i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Kv={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function qv(i){let r=!1;for(const n of i){const{role:o,parts:l}=n;if(!r&&o!=="user")throw new tt(`First content should be with role 'user', got ${o}`);if(!kh.includes(o))throw new tt(`Each item should include role field. Got ${o} but valid roles are: ${JSON.stringify(kh)}`);if(!Array.isArray(l))throw new tt("Content should have 'parts' property with an array of Parts");if(l.length===0)throw new tt("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const p of l)for(const m of Lh)m in p&&(u[m]+=1);const d=Kv[o];for(const p of Lh)if(!d.includes(p)&&u[p]>0)throw new tt(`Content with role '${o}' can't contain '${p}' part`);r=!0}}function $h(i){var r;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(r=i.candidates[0])===null||r===void 0?void 0:r.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const o of n.parts)if(o===void 0||Object.keys(o).length===0||o.text!==void 0&&o.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="SILENT_ERROR";class Yv{constructor(r,n,o,l={}){this.model=n,this.params=o,this._requestOptions=l,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=r,o?.history&&(qv(o.history),this._history=o.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(r,n={}){var o,l,u,d,p,m;await this._sendPromise;const y=_s(r),x={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(m=this.params)===null||m===void 0?void 0:m.cachedContent,contents:[...this._history,y]},w=Object.assign(Object.assign({},this._requestOptions),n);let b;return this._sendPromise=this._sendPromise.then(()=>Vf(this._apiKey,this.model,x,w)).then(v=>{var N;if($h(v.response)){this._history.push(y);const k=Object.assign({parts:[],role:"model"},(N=v.response.candidates)===null||N===void 0?void 0:N[0].content);this._history.push(k)}else{const k=mr(v.response);k&&console.warn(`sendMessage() was unsuccessful. ${k}. Inspect response object for details.`)}b=v}).catch(v=>{throw this._sendPromise=Promise.resolve(),v}),await this._sendPromise,b}async sendMessageStream(r,n={}){var o,l,u,d,p,m;await this._sendPromise;const y=_s(r),x={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(m=this.params)===null||m===void 0?void 0:m.cachedContent,contents:[...this._history,y]},w=Object.assign(Object.assign({},this._requestOptions),n),b=zf(this._apiKey,this.model,x,w);return this._sendPromise=this._sendPromise.then(()=>b).catch(v=>{throw new Error(Uh)}).then(v=>v.response).then(v=>{if($h(v)){this._history.push(y);const N=Object.assign({},v.candidates[0].content);N.role||(N.role="model"),this._history.push(N)}else{const N=mr(v);N&&console.warn(`sendMessageStream() was unsuccessful. ${N}. Inspect response object for details.`)}}).catch(v=>{v.message!==Uh&&console.error(v)}),b}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gv(i,r,n,o){return(await js(r,Br.COUNT_TOKENS,i,!1,JSON.stringify(n),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qv(i,r,n,o){return(await js(r,Br.EMBED_CONTENT,i,!1,JSON.stringify(n),o)).json()}async function Xv(i,r,n,o){const l=n.requests.map(d=>Object.assign(Object.assign({},d),{model:r}));return(await js(r,Br.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:l}),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(r,n,o={}){this.apiKey=r,this._requestOptions=o,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Hf(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(r,n={}){var o;const l=Dh(r),u=Object.assign(Object.assign({},this._requestOptions),n);return Vf(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},l),u)}async generateContentStream(r,n={}){var o;const l=Dh(r),u=Object.assign(Object.assign({},this._requestOptions),n);return zf(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},l),u)}startChat(r){var n;return new Yv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},r),this._requestOptions)}async countTokens(r,n={}){const o=Wv(r,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),l=Object.assign(Object.assign({},this._requestOptions),n);return Gv(this.apiKey,this.model,o,l)}async embedContent(r,n={}){const o=Jv(r),l=Object.assign(Object.assign({},this._requestOptions),n);return Qv(this.apiKey,this.model,o,l)}async batchEmbedContents(r,n={}){const o=Object.assign(Object.assign({},this._requestOptions),n);return Xv(this.apiKey,this.model,r,o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(r){this.apiKey=r}getGenerativeModel(r,n){if(!r.model)throw new tt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Mh(this.apiKey,r,n)}getGenerativeModelFromCachedContent(r,n,o){if(!r.name)throw new yr("Cached content must contain a `name` field.");if(!r.model)throw new yr("Cached content must contain a `model` field.");const l=["model","systemInstruction"];for(const d of l)if(n?.[d]&&r[d]&&n?.[d]!==r[d]){if(d==="model"){const p=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,m=r.model.startsWith("models/")?r.model.replace("models/",""):r.model;if(p===m)continue}throw new yr(`Different value for "${d}" specified in modelParams (${n[d]}) and cachedContent (${r[d]})`)}const u=Object.assign(Object.assign({},n),{model:r.model,tools:r.tools,toolConfig:r.toolConfig,systemInstruction:r.systemInstruction,cachedContent:r});return new Mh(this.apiKey,u,o)}}const ew="AIzaSyCNhJABwm3jm2xSL5bWFvAifJyjVdCa9sQ";let bs=null;bs=new Zv(ew);const tw=Mf;function rw(i){const r=tw.recommendations.find(n=>n.searchTerms.some(o=>i.toLowerCase().includes(o.toLowerCase()))||n.city.toLowerCase().includes(i.toLowerCase())||n.country.toLowerCase().includes(i.toLowerCase()));return r?`
    **LOCAL GUIDE RECOMMENDATIONS for ${r.city}**:
    The following items are highly recommended by local experts. Please consider including them:
    ${JSON.stringify(r.items,null,2)}
  `:""}async function nw(i){if(!bs)throw new Error("AI service not initialized. Please check API key.");const r=new Set;i.destination&&r.add(i.destination),i.schedule?.forEach(u=>r.add(u.location));const n=Array.from(r).map(u=>rw(u)).filter(u=>u!=="").join(`

`),o=bs.getGenerativeModel({model:"gemini-2.5-flash"}),l=`
    You are a professional travel shopping planner.
    Create a detailed shopping plan for a trip to ${i.destination}.
    
    Travel Details:
    - Duration: ${i.startDate} to ${i.endDate}
    - Budget: ${i.budget} KRW
    - Companions: ${i.companions?.join(", ")||"None"}
    - Interests: ${i.preferences.join(", ")}
    - Purpose: ${i.purposes.join(", ")}
    - Daily Schedule:
    ${i.schedule?.map(u=>`      Day ${u.day} (${u.date}): ${u.location}`).join(`
`)||"Not specified"}

    ${n}

    **CRITICAL INSTRUCTION**:
    Recommend REAL, POPULAR, and SPECIFIC items that travelers actually buy in ${i.destination}.
    - Focus on "Must-Buy" items, local specialties, and famous souvenirs.
    - Avoid generic suggestions like "Chocolate" or "T-shirt". Instead, suggest specific brands or famous products (e.g., "G7 Coffee", "Dried Mangoes (7D)", "Jim Thompson Silk").
    - Consider the user's budget and interests.
    - **BALANCED RECOMMENDATION STRATEGY (30:70 Rule)**:
      1. **Guide Recommendations (approx. 30%)**: Select only the top 2-3 "Must-Buy" items from the provided guide data that best fit the user's profile. These are the "safe bets".
      2. **AI Recommendations (approx. 70%)**: Fill the rest with UNIQUE, TRENDY, and PERSONALIZED items based on the user's specific interests and current trends. Surprise the user with hidden gems that are NOT in the guide data.
    - **Avoid Repetition**: Do not just list everything from the guide. Curate strictly.
    
    **PRICE INSTRUCTION**:
    - You MUST estimate the price for every item. Do NOT return 0.
    - \`localPrice\`: The price in local currency (e.g. JPY, THB). Use the guide data if available.
    - \`estimatedPrice\`: The approximate price in KRW (Korean Won). Calculate based on current exchange rates.

    **SOURCE ATTRIBUTION**:
    - \`source\`: Set to "guide" if the item is from the provided guide recommendations. Set to "ai" if it is your own suggestion based on general knowledge.
    
    **IMPORTANT CHANGE**: Plan the shopping itinerary **DAY BY DAY** according to the user's schedule.
    - The top-level keys in "cityShopping" MUST be unique for each day, e.g., "day_1_bangkok", "day_2_pattaya".
    - Even if the city is the same for multiple days (e.g., Day 2 Bangkok, Day 3 Bangkok), create SEPARATE entries for each day (e.g., "day_2_bangkok", "day_3_bangkok").
    - Distribute the recommended items logically across the days to balance the schedule.
    - For EACH item, specify the "shopName" or "mallName" where it can be purchased (e.g., "Big C Market", "Central World").
    - **ROUTE OPTIMIZATION**: Sort the items list logically by shopName within each day. Group items that can be bought at the same place together.

    Please provide the response in the following JSON format ONLY, no markdown.
    IMPORTANT: All text content (location names, product names, reasons, tips, etc.) MUST be in Korean.
    {
      "dutyFree": {
        "departure": {
          "id": "departure",
          "location": "  ()",
          "timing": " ",
          "items": [
            {
              "id": "unique_id",
              "category": "Category",
              "product": "Product Name",
              "brand": "Brand",
              "estimatedPrice": 35000,
              "localPrice": 25,
              "currencyCode": "USD",
              "reason": "Why recommended",
              "priority": "high/medium/low",
              "purchased": false,
              "source": "ai"
            }
          ],
          "subtotal": 0
        },
        "arrival": {
          "id": "arrival",
          "location": "  ()",
          "timing": " ",
          "items": [],
          "subtotal": 0
        }
      },
      "cityShopping": {
        "day_1_cityname": {
          "id": "day_1_cityname",
          "location": "City Name (e.g., )",
          "day": 1,
          "timing": " ",
          "items": [
            {
              "id": "unique_id",
              "category": "Category",
              "product": "Product Name",
              "brand": "Brand",
              "estimatedPrice": 15000,
              "localPrice": 400,
              "currencyCode": "THB",
              "reason": "Why recommended",
              "priority": "high/medium/low",
              "purchased": false,
              "shopName": "Specific Shop Name (e.g.  )",
              "source": "guide"
            }
          ],
          "subtotal": 0,
          "tips": ["City specific shopping tip"]
        },
        "day_2_cityname": {
          "id": "day_2_cityname",
          "location": "City Name",
          "day": 2,
          "timing": " ",
          "items": []
        }
      },
      "budgetSummary": {
        "dutyFree": 0,
        "cityShopping": 0,
        "total": 0,
        "remaining": 0
      },
      "timeline": ["Day 1: City A", "Day 2: City B"]
    }
  `;try{let m=(await(await o.generateContent(l)).response).text().replace(/```json\n?|\n?```/g,"").trim();const y=m.indexOf("{"),x=m.lastIndexOf("}");return y!==-1&&x!==-1&&(m=m.substring(y,x+1)),JSON.parse(m)}catch(u){throw console.error("AI Generation failed:",u),u}}async function sw(i,r){if(!bs)throw new Error("AI service not initialized. Please check API key.");const n=bs.getGenerativeModel({model:"gemini-2.5-flash"}),o=`
    Analyze this travel itinerary file (image or PDF).
    Extract the following information:
    1. Destination (City name in Korean, e.g., , )
    2. Start Date (YYYY-MM-DD)
    3. End Date (YYYY-MM-DD)
    4. Daily Schedule: For each day, extract the Day number, Date, and Main Location/City (in Korean).

    Return ONLY a JSON object with these keys: 
    - "destination": string
    - "startDate": string (YYYY-MM-DD)
    - "endDate": string (YYYY-MM-DD)
    - "schedule": array of objects { "day": number, "date": string, "location": string }

    If you cannot find specific information, make a reasonable guess based on context or return null/empty.
    IMPORTANT: Ensure "location" is the city or main area name in Korean (e.g., "", "", ""). If multiple cities, separate them with commas (e.g., ", ").
    `,l={inlineData:{data:i,mimeType:r}};try{const m=(await(await n.generateContent([o,l])).response).text().replace(/```json\n?|\n?```/g,"");return JSON.parse(m)}catch(u){throw console.error("Itinerary parsing failed:",u),u}}async function iw(i,r){const{data:n,error:o}=await et.from("trips").insert({user_id:i,destination:r.destination,start_date:r.startDate,end_date:r.endDate,budget:r.budget,preferences:r.preferences,purposes:r.purposes,companions:r.companions}).select().single();if(o)throw o;return n}async function Wf(i,r){const n=[],o=d=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(d),l=(d,p,m)=>{d.forEach(y=>{const x=o(y.id)?y.id:crypto.randomUUID();n.push({id:x,trip_id:i,location_id:p,location_name:m,category:y.category,product_name:y.product,brand:y.brand,estimated_price:y.estimatedPrice,reason:y.reason,priority:y.priority,purchased:y.purchased||!1,shop_name:y.shopName,is_recommended:y.isRecommended!==!1,local_price:y.localPrice,currency_code:y.currencyCode})})};l(r.dutyFree.departure.items,"departure",r.dutyFree.departure.location),l(r.dutyFree.arrival.items,"arrival",r.dutyFree.arrival.location),Object.values(r.cityShopping).forEach(d=>{l(d.items,d.id,d.location)});const{error:u}=await et.from("shopping_items").delete().eq("trip_id",i);if(u)throw u;if(n.length>0){const{error:d}=await et.from("shopping_items").insert(n);if(d)throw d}}async function ow(i,r,n){const{error:o}=await et.from("shopping_items").update({purchased:r,purchased_by:n}).eq("id",i);if(o)throw o}async function aw(i,r){const{error:n}=await et.from("trip_members").insert({trip_id:i,user_id:r});if(n)throw n;const{data:o,error:l}=await et.from("trips").select("*").eq("id",i).single();if(l)throw l;return o}function lw({onFileSelect:i,isParsing:r,accept:n="image/*,application/pdf"}){const[o,l]=te.useState(!1),u=te.useRef(0),d=te.useRef(null),p=te.useCallback(v=>{v.preventDefault(),v.stopPropagation(),u.current+=1,v.dataTransfer.items&&v.dataTransfer.items.length>0&&l(!0)},[]),m=te.useCallback(v=>{v.preventDefault(),v.stopPropagation(),u.current-=1,u.current===0&&l(!1)},[]),y=te.useCallback(v=>{v.preventDefault(),v.stopPropagation()},[]),x=te.useCallback(v=>{if(v.preventDefault(),v.stopPropagation(),l(!1),u.current=0,r)return;const N=v.dataTransfer.files?.[0];N&&i(N)},[r,i]),w=()=>{r||d.current?.click()},b=v=>{const N=v.target.files?.[0];N&&i(N)};return h.jsxs("div",{onClick:w,onDragEnter:p,onDragLeave:m,onDragOver:y,onDrop:x,className:`relative w-full py-8 border-2 border-dashed rounded-xl transition-all flex flex-col items-center justify-center gap-3 ${o?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-400 hover:bg-gray-50"} ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[r?h.jsxs("div",{className:"flex items-center gap-3 text-blue-600 pointer-events-none",children:[h.jsx(Yy,{className:"w-6 h-6 animate-spin"}),h.jsx("span",{className:"font-bold text-lg",children:"  ..."})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center pointer-events-none",children:h.jsx(xv,{className:"w-5 h-5 text-gray-500"})}),h.jsxs("div",{className:"text-center pointer-events-none",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700",children:" /PDF "}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"   "})]})]}),h.jsx("input",{type:"file",ref:d,onChange:b,accept:n,style:{display:"none"}})]})}function uw({value:i,onChange:r,placeholder:n}){const[o,l]=te.useState(""),[u,d]=te.useState(!1),p=te.useMemo(()=>Mf.recommendations.map(v=>({name:v.city,country:v.country,searchTerms:v.searchTerms||[]})),[]),m=te.useMemo(()=>{if(!o.trim())return[];const v=p.filter(N=>N.searchTerms.some(k=>k.normalize("NFC").toLowerCase().includes(o.normalize("NFC").toLowerCase()))&&!i.includes(N.name));return console.log("Searching for:",o,"Matches:",v.length),v},[o,p,i]),y=v=>{i.includes(v)||r([...i,v]),l(""),d(!1)},x=v=>{r(i.filter(N=>N!==v))},w=v=>{v.nativeEvent.isComposing||(v.key==="Enter"?(v.preventDefault(),m.length>0?y(m[0].name):o.trim()&&y(o.trim())):v.key==="Backspace"&&!o&&i.length>0&&x(i[i.length-1]))},b=()=>{m.length>0&&y(m[0].name),setTimeout(()=>d(!1),200)};return h.jsxs("div",{className:`relative ${u?"z-50":""}`,children:[h.jsxs("div",{className:"w-full px-4 py-3 min-h-[60px] bg-gray-50 border-2 border-transparent rounded-xl focus-within:bg-white focus-within:border-blue-500 focus-within:ring-0 transition-all flex flex-wrap items-center gap-2",children:[i.map(v=>h.jsxs("span",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 animate-fade-in",children:[v,h.jsx("button",{onClick:()=>x(v),className:"hover:text-blue-900",children:h.jsx($l,{className:"w-3 h-3"})})]},v)),h.jsx("input",{type:"text",value:o,onChange:v=>{l(v.target.value),d(!0)},onFocus:()=>d(!0),onBlur:b,onKeyDown:w,className:"flex-1 bg-transparent outline-none min-w-[100px] text-lg placeholder-gray-400",placeholder:i.length===0?n:""})]}),u&&o.trim()&&m.length>0&&h.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden max-h-60 overflow-y-auto",children:m.map(v=>h.jsxs("button",{onMouseDown:N=>N.preventDefault(),onClick:()=>y(v.name),className:"w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors flex items-center justify-between group",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-900",children:v.name}),h.jsx("span",{className:"text-sm text-gray-500 ml-2",children:v.country})]}),h.jsx("span",{className:"text-xs text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},v.name))})]})}function cw({destination:i}){const[r,n]=te.useState(0);return te.useEffect(()=>{const o=setInterval(()=>{n(l=>l>=95?(clearInterval(o),95):Math.min(l+Math.floor(Math.random()*5)+1,95))},150);return()=>clearInterval(o)},[]),h.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md mx-auto",children:[h.jsxs("div",{className:"relative w-32 h-32 mb-8",children:[h.jsx("div",{className:"absolute inset-0 border-4 border-gray-100 rounded-full"}),h.jsx("div",{className:"absolute inset-0 border-4 border-blue-600 rounded-full border-t-transparent animate-spin",style:{animationDuration:"2s"}}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center animate-pulse",children:h.jsx(Dl,{className:"w-8 h-8 text-blue-600"})})})]}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"AI   "}),h.jsxs("p",{className:"text-gray-500 leading-relaxed mb-8",children:[i||"","  ",h.jsx("br",{}),"   "]}),h.jsx("div",{className:"w-full bg-gray-100 rounded-full h-4 overflow-hidden relative",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-300 ease-out rounded-full",style:{width:`${r}%`}})}),h.jsxs("div",{className:"mt-3 font-bold text-blue-600 text-lg",children:[r,"%"]})]})}function dw({onComplete:i}){const[r,n]=te.useState(1),[o,l]=te.useState(!1),[u,d]=te.useState(""),[p,m]=te.useState("2025-12-15"),[y,x]=te.useState("2025-12-19"),[w,b]=te.useState("500000"),[v,N]=te.useState([]),[k,E]=te.useState([]),[D,L]=te.useState([]);te.useEffect(()=>{window.scrollTo(0,0)},[r]);const I=[{id:"cosmetics",label:"/",emoji:""},{id:"fashion",label:"/",emoji:""},{id:"electronics",label:"",emoji:""},{id:"food",label:"/",emoji:""},{id:"alcohol",label:"/",emoji:""}],H=[{id:"self",label:"",emoji:""},{id:"family",label:" ",emoji:""},{id:"friends",label:" ",emoji:""},{id:"colleagues",label:" ",emoji:""}],ne=z=>{N(ae=>ae.includes(z)?ae.filter(he=>he!==z):[...ae,z])},F=z=>{E(ae=>ae.includes(z)?ae.filter(he=>he!==z):[...ae,z])},[W,ce]=te.useState(!1),ge=async z=>{if(!z)return;if(!(z.type.startsWith("image/")||z.type==="application/pdf"||/\.(jpg|jpeg|png|webp|pdf)$/i.test(z.name))){alert(`  PDF   .
(  : ${z.type||"  "})`);return}ce(!0);try{const he=new FileReader;he.onerror=()=>{console.error("File reading failed"),alert("  ."),ce(!1)},he.onloadend=async()=>{if(!he.result){alert("   ."),ce(!1);return}const Q=he.result.split(",")[1],A=await sw(Q,z.type);A.destination&&d(A.destination),A.startDate&&m(A.startDate),A.endDate&&x(A.endDate),A.schedule&&L(A.schedule),alert("   !"),ce(!1)},he.readAsDataURL(z)}catch(he){console.error("Parsing failed:",he),alert("  ."),ce(!1)}},J=async()=>{l(!0),n(5);try{const he={destination:Array.from(new Set(D.map(Q=>Q.location).filter(Boolean))).join(", "),startDate:p,endDate:y,budget:parseInt(w),preferences:v,purposes:k,companions:[],schedule:D},pe=await nw(he);Object.values(pe.cityShopping).forEach(Q=>{const A=new Set;Q.items=Q.items.filter(Y=>{const V=Y.product.trim().toLowerCase();return A.has(V)?!1:(A.add(V),!0)})});try{const{data:{session:Q}}=await et.auth.getSession();if(Q?.user){const A=await iw(Q.user.id,he);A&&await Wf(A.id,pe)}}catch(Q){console.warn("Failed to save to Supabase (Storage access might be blocked):",Q)}l(!1),setTimeout(()=>{i(he,pe)},2e3)}catch(z){console.error("Failed to generate plan:",z),alert("     ."),l(!1),n(4)}},ue=()=>{r>1&&n(z=>z-1)},se=()=>{if(r===1){const z=D.length>0&&D.some(ae=>ae.location.trim().length>0);return p&&y&&z}return r===2?v.length>0:r===3?k.length>0:r===4?w&&parseInt(w)>0:!0};return h.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-start pt-10 md:pt-20 p-4 pb-10",children:[r!==5&&h.jsx("div",{className:"w-full max-w-2xl mb-8",children:h.jsxs("div",{className:"flex items-center justify-between relative",children:[h.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-1 bg-gray-200 -z-10 rounded-full"}),h.jsx("div",{className:"absolute left-0 top-1/2 h-1 bg-blue-600 -z-10 rounded-full transition-all duration-500",style:{width:`${Math.min((r-1)/3*100,100)}%`}}),[1,2,3,4].map(z=>h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm transition-all duration-300 ${z<=r?"bg-blue-600 text-white shadow-lg shadow-blue-200 scale-110":"bg-gray-200 text-gray-400"}`,children:z},z))]})}),h.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-[2rem] shadow-xl overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex-1 p-6 md:p-12 overflow-y-auto",children:[r===1&&h.jsxs("div",{className:"animate-fade-in space-y-6",children:[h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(jt,{className:"w-8 h-8 text-blue-600"})}),h.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"  "}),h.jsx("p",{className:"text-sm md:text-base text-gray-500",children:"AI    ."})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),h.jsx("input",{type:"date",value:p,onChange:z=>m(z.target.value),className:"w-full px-4 py-3 text-base bg-gray-50 border-2 border-transparent rounded-xl focus:bg-white focus:border-blue-500 focus:ring-0 transition-all outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),h.jsx("input",{type:"date",value:y,onChange:z=>x(z.target.value),className:"w-full px-4 py-3 text-base bg-gray-50 border-2 border-transparent rounded-xl focus:bg-white focus:border-blue-500 focus:ring-0 transition-all outline-none"})]})]}),p&&y&&h.jsxs("div",{className:"space-y-3 animate-fade-in",children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"  "}),h.jsx("div",{className:"bg-gray-50 rounded-xl p-3 space-y-3 border-2 border-transparent focus-within:border-blue-100 transition-colors",children:(()=>{const z=new Date(p),ae=new Date(y),he=Math.abs(ae.getTime()-z.getTime()),pe=Math.ceil(he/(1e3*60*60*24))+1;return pe>0&&D.length,Array.from({length:pe>0?pe:0}).map((Q,A)=>{const Y=A+1,P=D.find(R=>R.day===Y)?.location||"";return h.jsxs("div",{className:"flex items-center gap-3",style:{zIndex:50-A,position:"relative"},children:[h.jsxs("span",{className:"w-12 font-bold text-gray-500 text-sm whitespace-nowrap",children:[Y,""]}),h.jsx("div",{className:"flex-1 relative",children:h.jsx(uw,{value:P?P.split(/[,/&+|]+/).map(R=>R.trim()).filter(Boolean):[],onChange:R=>{const fe=R.join(", ");L(me=>{const ye=[...me],we=ye.findIndex(Se=>Se.day===Y);if(we>=0)ye[we]={...ye[we],location:fe};else{const Se=new Date(z);Se.setDate(z.getDate()+A),ye.push({day:Y,date:Se.toISOString().split("T")[0],location:fe})}return ye})},placeholder:"  "})})]},Y)})})()})]}),h.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("label",{className:"text-sm font-semibold text-gray-700",children:" "}),h.jsx("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full font-medium",children:""})]}),h.jsx(lw,{onFileSelect:ge,isParsing:W})]})]})]}),r===2&&h.jsxs("div",{className:"animate-fade-in space-y-8",children:[h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(ps,{className:"w-8 h-8 text-blue-600"})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"   ?"}),h.jsx("p",{className:"text-gray-500",children:"   ."})]}),h.jsx("div",{className:"grid grid-cols-2 gap-4",children:I.map(z=>h.jsxs("button",{onClick:()=>ne(z.id),className:`p-6 rounded-2xl border-2 text-left transition-all hover:scale-[1.02] active:scale-[0.98] ${v.includes(z.id)?"border-blue-500 bg-blue-50 text-blue-700 shadow-md shadow-blue-100":"border-gray-100 hover:border-blue-200 text-gray-600 hover:bg-gray-50"}`,children:[h.jsx("span",{className:"text-3xl mb-3 block",children:z.emoji}),h.jsx("span",{className:"font-bold text-lg",children:z.label})]},z.id))})]}),r===3&&h.jsxs("div",{className:"animate-fade-in space-y-8",children:[h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Ll,{className:"w-8 h-8 text-blue-600"})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  ?"}),h.jsx("p",{className:"text-gray-500",children:"  ."})]}),h.jsx("div",{className:"grid grid-cols-2 gap-4",children:H.map(z=>h.jsxs("button",{onClick:()=>F(z.id),className:`p-6 rounded-2xl border-2 text-left transition-all hover:scale-[1.02] active:scale-[0.98] ${k.includes(z.id)?"border-blue-500 bg-blue-50 text-blue-700 shadow-md shadow-blue-100":"border-gray-100 hover:border-blue-200 text-gray-600 hover:bg-gray-50"}`,children:[h.jsx("span",{className:"text-3xl mb-3 block",children:z.emoji}),h.jsx("span",{className:"font-bold text-lg",children:z.label})]},z.id))})]}),r===4&&h.jsxs("div",{className:"animate-fade-in space-y-8",children:[h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(zy,{className:"w-8 h-8 text-blue-600"})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"  ?"}),h.jsx("p",{className:"text-gray-500",children:"   ."})]}),h.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-400 font-bold text-xl",children:""}),h.jsx("input",{type:"number",value:w,onChange:z=>b(z.target.value),className:"w-full pl-12 pr-6 py-6 bg-gray-50 rounded-2xl border-2 border-transparent focus:bg-white focus:border-blue-500 focus:ring-0 text-center text-3xl font-bold text-gray-900 placeholder-gray-300 outline-none transition-all",placeholder:"500,000"})]}),h.jsx("div",{className:"flex gap-2 justify-center",children:[30,50,100,200].map(z=>h.jsxs("button",{onClick:()=>b((z*1e4).toString()),className:"px-4 py-2 bg-gray-100 rounded-full text-sm font-medium text-gray-600 hover:bg-gray-200 transition-colors",children:[z,""]},z))})]})]}),r===5&&h.jsx("div",{className:"animate-fade-in text-center py-12",children:o?h.jsx(cw,{destination:u}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mb-8 shadow-lg shadow-green-200 animate-bounce-small mx-auto",children:h.jsx(Lf,{className:"w-12 h-12 text-white"})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:" !"}),h.jsx("p",{className:"text-gray-500",children:"   "})]})})]}),r<5&&h.jsxs("div",{className:"p-6 border-t border-gray-100 bg-gray-50 grid grid-cols-3 gap-4",children:[r>1&&h.jsx("button",{onClick:ue,className:"col-span-1 py-4 px-6 rounded-xl border-2 border-gray-200 text-gray-600 font-bold hover:bg-white hover:border-gray-300 transition-all",children:""}),h.jsx("button",{onClick:()=>{r===4?J():n(z=>z+1)},disabled:!se(),className:`py-4 px-6 rounded-xl text-white font-bold text-lg shadow-lg shadow-blue-200 transition-all flex items-center justify-center gap-2 ${r===1?"col-span-3":"col-span-2"} ${se()?"bg-blue-600 hover:bg-blue-700 hover:shadow-xl hover:-translate-y-0.5 active:translate-y-0":"bg-gray-300 cursor-not-allowed shadow-none"}`,children:r===4?h.jsxs(h.Fragment,{children:[h.jsx(Dl,{className:"w-5 h-5"}),"  "]}):""})]})]})]})}let Mr={USD:1430,JPY:9.1,EUR:1550,THB:42,VND:.06,CNY:195,TWD:45,HKD:183,SGD:1060};const hw="https://open.er-api.com/v6/latest/KRW";async function Jf(){try{const r=await(await fetch(hw)).json();if(r&&r.rates){const n={};Object.entries(r.rates).forEach(([o,l])=>{n[o]=1/l}),Mr={...Mr,...n},typeof window<"u"&&window.dispatchEvent(new Event("exchange-rates-updated"))}}catch(i){console.error("Failed to fetch exchange rates:",i)}}function Kf(i,r){const n=Mr[r.toUpperCase()];return n?Math.round(i*n):i}function Bh(i,r){const n=Mr[r.toUpperCase()];return n?Math.round(i/n):i}function fw({isOpen:i,onClose:r}){const[n,o]=te.useState(!1),[l,u]=te.useState(!1),[d,p]=te.useState({}),[m,y]=te.useState(0);if(!i)return null;const x=async()=>{o(!0),await Jf(),y(k=>k+1),o(!1)},w=()=>{p({...Mr}),u(!0)},b=()=>{Object.keys(d).forEach(k=>{Mr[k]=d[k]}),u(!1),window.dispatchEvent(new Event("exchange-rates-updated"))},v=(k,E,D)=>{const L=parseFloat(E);isNaN(L)||p(I=>({...I,[k]:L/D}))},N=[{code:"USD",name:" ",flag:""},{code:"JPY",name:" ",flag:""},{code:"EUR",name:"",flag:""},{code:"THB",name:" ",flag:""},{code:"VND",name:" ",flag:""},{code:"CNY",name:" ",flag:""},{code:"TWD",name:" ",flag:""},{code:"HKD",name:" ",flag:""},{code:"SGD",name:" ",flag:""}];return h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm shadow-xl overflow-hidden",children:[h.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4 flex items-center justify-between text-white",children:[h.jsx("h2",{className:"text-lg font-bold flex items-center gap-2",children:"   "}),h.jsx("button",{onClick:r,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:h.jsx($l,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("button",{onClick:l?b:w,className:`text-sm flex items-center gap-1 px-3 py-1.5 rounded-lg transition-colors font-medium ${l?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:l?" ":" "}),!l&&h.jsxs("button",{onClick:x,disabled:n,className:"text-sm text-blue-600 flex items-center gap-1 hover:bg-blue-50 px-2 py-1 rounded-lg transition-colors disabled:opacity-50",children:[h.jsx(lv,{className:`w-4 h-4 ${n?"animate-spin":""}`}),""]})]}),h.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-1",children:N.map(k=>{const E=l?d[k.code]||0:Mr[k.code];let D=E,L=1;return(k.code==="JPY"||k.code==="VND")&&(D=E*100,L=100),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-2xl",children:k.flag}),h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-gray-800",children:k.code}),h.jsx("p",{className:"text-xs text-gray-500",children:k.name})]})]}),h.jsx("div",{className:"text-right",children:l?h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h.jsxs("span",{className:"text-xs text-gray-500",children:[L," ",k.code," ="]}),h.jsx("input",{type:"number",value:D?Math.round(D*100)/100:"",onChange:I=>v(k.code,I.target.value,L),className:"w-20 px-2 py-1 text-right text-sm border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),h.jsx("span",{className:"text-sm font-bold text-gray-700",children:""})]}):h.jsxs(h.Fragment,{children:[h.jsxs("p",{className:"font-bold text-blue-600 text-sm",children:[L," ",k.code," = ",D?D.toLocaleString("ko-KR",{maximumFractionDigits:2}):"-",""]}),h.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["(1,000  ",E?(1e3/E).toLocaleString("ko-KR",{maximumFractionDigits:2}):"-"," ",k.code,")"]})]})})]},k.code)})}),h.jsxs("p",{className:"text-xs text-center text-gray-400 mt-4",children:["* ",l?"   .":": open.er-api.com (: KRW)"]})]})]})})}function pw({travelInfo:i,shoppingPlan:r,onNavigate:n,onLocationSelect:o,onAddItem:l}){const[u,d]=te.useState(!1),p=te.useRef(null),[m,y]=te.useState(!1),[x,w]=te.useState(0),[b,v]=te.useState(0),N=W=>{p.current&&(y(!0),w(W.pageX-p.current.offsetLeft),v(p.current.scrollLeft))},k=()=>{y(!1)},E=()=>{y(!1)},D=W=>{if(!m||!p.current)return;W.preventDefault();const ge=(W.pageX-p.current.offsetLeft-x)*2;p.current.scrollLeft=b-ge},L=typeof i.budget=="string"?parseInt(i.budget):i.budget,I=r.budgetSummary.total,H=L-I,ne=Math.min(I/L*100,100),F=Object.values(r.cityShopping).reduce((W,ce)=>{const ge=ce.location;return W[ge]||(W[ge]=[]),W[ge].push(ce),W},{});return h.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 font-sans",children:[h.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-purple-700 text-white p-6 pb-12 rounded-b-[2.5rem] shadow-xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-blue-400/20 rounded-full blur-2xl translate-y-1/2 -translate-x-1/4"}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-blue-100 font-medium mb-1",children:"AI Travel Shopping Planner"}),h.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:""})]}),h.jsx("button",{onClick:()=>n("settings"),className:"p-2 bg-white/10 backdrop-blur-md rounded-full hover:bg-white/20 transition-colors",children:h.jsx(hv,{className:"w-6 h-6 text-white"})})]}),h.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-5 border border-white/10",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(yh,{className:"w-5 h-5 text-blue-200 mt-1"}),h.jsxs("div",{children:[h.jsxs("h2",{className:"font-bold text-lg leading-tight mb-1",children:[Array.from(new Set((i.schedule||[]).map(W=>W.location))).join(", ")," ",(i.schedule||[]).length," "]}),h.jsxs("p",{className:"text-blue-100 text-sm",children:[new Date(i.startDate).toLocaleDateString("ko-KR")," ~ ",new Date(i.endDate).toLocaleDateString("ko-KR")]})]})]}),h.jsxs("button",{onClick:()=>d(!0),className:"flex flex-col items-center justify-center w-12 h-12 bg-white/20 rounded-full backdrop-blur-md border border-white/10 shadow-lg hover:bg-white/30 transition-all active:scale-95",children:[h.jsx($f,{className:"w-5 h-5 text-green-300 mb-0.5"}),h.jsx("span",{className:"text-[10px] font-medium text-white",children:""})]})]}),h.jsx("div",{ref:p,className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide snap-x snap-mandatory cursor-grab active:cursor-grabbing",onMouseDown:N,onMouseLeave:k,onMouseUp:E,onMouseMove:D,children:(i.schedule||[]).map(W=>h.jsxs("div",{className:"flex-shrink-0 bg-white/20 rounded-xl p-3 min-w-[90px] text-center snap-start backdrop-blur-md border border-white/20 shadow-sm hover:bg-white/30 transition-colors select-none",children:[h.jsxs("p",{className:"text-xs text-blue-50 mb-1 font-medium bg-blue-600/40 inline-flex items-center gap-1 px-2 py-0.5 rounded-full",children:[h.jsx("span",{children:""})," ",W.day,""]}),h.jsx("p",{className:"font-bold text-sm text-white whitespace-nowrap mt-1",children:W.location})]},W.day))})]})]})]}),h.jsxs("div",{className:"px-6 -mt-8 relative z-20 space-y-6",children:[h.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[h.jsxs("div",{className:"flex justify-between items-end mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:" "}),h.jsxs("h3",{className:"text-3xl font-black text-gray-900 tracking-tight",children:[H.toLocaleString(),""]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("p",{className:"text-xs text-gray-400 mb-1",children:["  ",L.toLocaleString(),""]}),h.jsxs("div",{className:"flex items-center gap-1 text-sm font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded-lg",children:[Math.round(I/L*100),"% "]})]})]}),h.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3 mb-4 overflow-hidden",children:h.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${ne>90?"bg-red-500":"bg-blue-600"}`,style:{width:`${ne}%`}})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-50",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),h.jsxs("p",{className:"font-bold text-gray-900",children:[r.budgetSummary.dutyFree.toLocaleString(),""]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gray-400 mb-1",children:" "}),h.jsxs("p",{className:"font-bold text-gray-900",children:[r.budgetSummary.cityShopping.toLocaleString(),""]})]})]})]}),h.jsxs("div",{className:"space-y-6 pb-8",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2",children:[h.jsx("span",{className:"w-1 h-6 bg-blue-600 rounded-full"})," "]}),h.jsx("div",{className:"grid gap-3",children:[r.dutyFree.departure,r.dutyFree.arrival].map(W=>h.jsxs("button",{onClick:()=>o(W),className:"w-full bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-all active:scale-[0.98] flex items-center justify-between group",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center group-hover:bg-blue-100 transition-colors",children:h.jsx(ps,{className:"w-6 h-6 text-blue-600"})}),h.jsxs("div",{className:"text-left",children:[h.jsx("p",{className:"font-bold text-gray-900",children:W.location}),h.jsxs("p",{className:"text-sm text-gray-500",children:[W.items.length," "]})]})]}),h.jsx(vh,{className:"w-5 h-5 text-gray-300"})]},W.id))})]}),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2",children:[h.jsx("span",{className:"w-1 h-6 bg-purple-600 rounded-full"})," "]}),h.jsx("div",{className:"grid gap-3",children:Object.entries(F).map(([W,ce])=>{const ge=ce.reduce((ae,he)=>ae+he.items.length,0),J=ce.reduce((ae,he)=>ae+he.items.filter(pe=>pe.purchased).length,0),ue=ce.reduce((ae,he)=>ae+he.subtotal,0),se=ce.map(ae=>ae.day).filter(ae=>ae!==void 0).sort((ae,he)=>ae-he),z=se.length>1?`${se[0]} ~ ${se[se.length-1]}`:se.length===1?`${se[0]}`:"";return h.jsxs("button",{onClick:()=>o({id:`merged_${W}`,location:W,day:se[0],timing:" ",items:ce.flatMap(ae=>ae.items),subtotal:ue,tips:ce.flatMap(ae=>ae.tips||[]),route:"",warnings:ce.flatMap(ae=>ae.warnings||[])}),className:"w-full bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-all active:scale-[0.98] flex items-center justify-between group",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"w-12 h-12 bg-purple-50 rounded-2xl flex items-center justify-center group-hover:bg-purple-100 transition-colors relative",children:[h.jsx(jt,{className:"w-6 h-6 text-purple-600"}),J===ge&&ge>0&&h.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:h.jsx(Dl,{className:"w-3 h-3 text-white"})})]}),h.jsxs("div",{className:"text-left",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("p",{className:"font-bold text-gray-900",children:W}),h.jsx("span",{className:"text-xs text-purple-600 bg-purple-50 px-2 py-0.5 rounded-full font-medium",children:z})]}),h.jsxs("p",{className:"text-sm text-gray-500",children:[ge,"  ",J>0&&`(${J} )`]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"font-medium text-gray-900",children:[ue.toLocaleString(),""]}),h.jsx(vh,{className:"w-5 h-5 text-gray-300"})]})]},`merged_${W}`)})})]})]})]}),h.jsx("button",{onClick:l,className:"fixed bottom-24 right-6 w-14 h-14 bg-blue-600 rounded-full shadow-lg shadow-blue-600/30 flex items-center justify-center text-white hover:bg-blue-700 transition-transform active:scale-90 z-40",children:h.jsx(Il,{className:"w-8 h-8"})}),h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-8 py-4 flex justify-around items-center z-50 pb-8 md:pb-4 shadow-[0_-4px_20px_rgba(0,0,0,0.05)]",children:[h.jsxs("button",{className:"flex flex-col items-center gap-1 text-blue-600",children:[h.jsx(Wy,{className:"w-6 h-6"}),h.jsx("span",{className:"text-[10px] font-medium",children:""})]}),h.jsxs("button",{onClick:()=>n("timeline"),className:"flex flex-col items-center gap-1 text-gray-400 hover:text-gray-600 transition-colors",children:[h.jsx(yh,{className:"w-6 h-6"}),h.jsx("span",{className:"text-[10px] font-medium",children:""})]}),h.jsxs("button",{onClick:()=>n("settings"),className:"flex flex-col items-center gap-1 text-gray-400 hover:text-gray-600 transition-colors",children:[h.jsx(Ll,{className:"w-6 h-6"}),h.jsx("span",{className:"text-[10px] font-medium",children:"MY"})]})]}),h.jsx(fw,{isOpen:u,onClose:()=>d(!1)})]})}function mw({location:i,onBack:r,onItemPurchase:n,onStartLiveMode:o,onEditItem:l,onAddItem:u}){const d=i.items.filter(w=>w.purchased).length,p=i.items.length,m=p>0?d/p*100:0,y=w=>{switch(w){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},x=w=>{switch(w){case"high":return"";case"medium":return"";case"low":return"";default:return w}};return h.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[h.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 sm:p-6 rounded-b-3xl shadow-lg",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("button",{onClick:r,className:"flex items-center gap-2 hover:opacity-80",children:[h.jsx(eo,{className:"w-5 h-5"}),h.jsx("span",{children:""})]}),h.jsx("button",{onClick:u,className:"bg-white/20 p-2 rounded-full hover:bg-white/30 transition-colors",children:h.jsx(Il,{className:"w-5 h-5"})})]}),h.jsx("h1",{className:"text-2xl mb-4",children:i.location}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[h.jsx(jt,{className:"w-4 h-4"}),h.jsx("span",{className:"text-sm",children:i.location})]}),h.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[h.jsx(xh,{className:"w-4 h-4"}),h.jsx("span",{className:"text-sm",children:i.timing})]}),i.freeTime&&h.jsxs("div",{className:"flex items-center gap-2 text-blue-100",children:[h.jsx(xh,{className:"w-4 h-4"}),h.jsxs("span",{className:"text-sm",children:[": ",i.freeTime,""]})]})]}),h.jsxs("div",{className:"mt-4 bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[h.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[h.jsx("span",{children:" "}),h.jsxs("span",{children:[d,"/",p]})]}),h.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-white transition-all",style:{width:`${m}%`}})})]}),i.freeTime&&h.jsxs("button",{onClick:o,className:"w-full mt-4 bg-red-500 text-white py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-red-600 transition-colors",children:[h.jsx(ov,{className:"w-5 h-5"}),h.jsx("span",{children:"   "})]})]}),h.jsxs("div",{className:"p-4 space-y-6",children:[i.tips&&i.tips.length>0&&h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(Ky,{className:"w-5 h-5 text-blue-600"}),h.jsx("h3",{className:"font-medium",children:" "})]}),h.jsx("ul",{className:"space-y-2",children:i.tips.map((w,b)=>h.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[h.jsx("span",{className:"text-blue-600",children:""}),h.jsx("span",{children:w})]},b))})]}),i.warnings&&i.warnings.length>0&&h.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(vv,{className:"w-5 h-5 text-yellow-600"}),h.jsx("h3",{className:"font-medium",children:" "})]}),h.jsx("ul",{className:"space-y-2",children:i.warnings.map((w,b)=>h.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[h.jsx("span",{className:"text-yellow-600",children:""}),h.jsx("span",{children:w})]},b))})]}),i.route&&h.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(jt,{className:"w-5 h-5 text-green-600"}),h.jsx("h3",{className:"font-medium",children:"  "})]}),h.jsx("p",{className:"text-sm text-gray-700",children:i.route})]}),h.jsxs("div",{children:[i.items.filter(w=>w.isRecommended!==!1).length>0&&h.jsxs("div",{className:"mb-8",children:[h.jsx("div",{className:"flex items-center justify-between mb-4",children:h.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:["  ",h.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",i.items.filter(w=>w.isRecommended!==!1).length,")"]})]})}),h.jsx("div",{className:"space-y-4",children:i.items.filter(w=>w.isRecommended!==!1).map(w=>h.jsx("div",{className:`bg-white rounded-xl shadow-md overflow-hidden transition-all ${w.purchased?"opacity-60":""}`,children:h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w.source==="guide"&&h.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded font-medium border border-orange-200",children:"  "}),w.source==="ai"&&h.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded font-medium border border-purple-200",children:" AI "}),h.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:w.category}),h.jsxs("span",{className:`text-xs px-2 py-1 rounded border ${y(w.priority)}`,children:[" ",x(w.priority)]})]}),h.jsx("button",{onClick:()=>l(w),className:"text-gray-400 hover:text-blue-600 p-1",children:h.jsx(_h,{className:"w-4 h-4"})})]}),h.jsx("h3",{className:"text-lg font-bold mb-1",children:w.product}),w.brand&&!w.product.toLowerCase().includes(w.brand.toLowerCase())&&h.jsx("p",{className:"text-sm text-gray-500 mb-2",children:w.brand}),(w.shopName||w.mallName)&&h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[h.jsx(jt,{className:"w-4 h-4"}),h.jsx("span",{children:w.shopName||w.mallName})]}),w.address&&h.jsx("p",{className:"text-sm text-gray-500 mb-2",children:w.address}),h.jsxs("div",{className:"mb-3",children:[h.jsxs("span",{className:"text-2xl text-blue-600 font-bold block",children:[w.estimatedPrice.toLocaleString("ko-KR"),""]}),w.currencyCode&&h.jsxs("span",{className:"text-sm text-gray-500",children:["( ",Bh(w.estimatedPrice,w.currencyCode).toLocaleString()," ",w.currencyCode,")"]})]}),w.memo&&h.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 rounded-lg p-3 mb-3",children:[h.jsx("p",{className:"text-xs text-yellow-700 font-bold mb-1",children:" "}),h.jsx("p",{className:"text-sm text-gray-700",children:w.memo})]}),h.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-3 mb-3",children:[h.jsx("p",{className:"text-xs text-blue-700 font-bold mb-1",children:"  ?"}),h.jsx("p",{className:"text-sm text-gray-700",children:w.reason})]}),w.alternatives&&w.alternatives.length>0&&h.jsxs("div",{className:"mb-3",children:[h.jsx("p",{className:"text-sm mb-2",children:"  "}),h.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:w.alternatives.map((b,v)=>h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-gray-400",children:""}),b]},v))})]}),w.purchasedBy&&h.jsxs("p",{className:"text-sm text-green-600 mb-3",children:[" ",w.purchasedBy,"  "]}),h.jsx("div",{className:"flex gap-2",children:h.jsx("button",{onClick:()=>n(i.id,w.id),className:`flex-1 py-3 rounded-lg transition-colors flex items-center justify-center gap-2 ${w.purchased?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-green-500 text-white hover:bg-green-600"}`,children:w.purchased?h.jsxs(h.Fragment,{children:[h.jsx(ws,{className:"w-5 h-5"}),h.jsx("span",{children:" "})]}):h.jsxs(h.Fragment,{children:[h.jsx(Qi,{className:"w-5 h-5"}),h.jsx("span",{children:"  "})]})})})]})},w.id))})]}),i.items.filter(w=>w.isRecommended===!1).length>0&&h.jsxs("div",{children:[h.jsx("div",{className:"flex items-center justify-between mb-4",children:h.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2 text-purple-700",children:["  ",h.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",i.items.filter(w=>w.isRecommended===!1).length,")"]})]})}),h.jsx("div",{className:"space-y-4",children:i.items.filter(w=>w.isRecommended===!1).map(w=>h.jsx("div",{className:`bg-white rounded-xl shadow-md overflow-hidden transition-all border-l-4 border-purple-500 ${w.purchased?"opacity-60":""}`,children:h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:" "})}),h.jsx("button",{onClick:()=>l(w),className:"text-gray-400 hover:text-blue-600 p-1",children:h.jsx(_h,{className:"w-4 h-4"})})]}),h.jsx("h3",{className:"text-lg font-bold mb-1",children:w.product}),(w.shopName||w.mallName)&&h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[h.jsx(jt,{className:"w-4 h-4"}),h.jsx("span",{children:w.shopName||w.mallName})]}),h.jsxs("div",{className:"mb-3",children:[h.jsxs("span",{className:"text-2xl text-blue-600 font-bold block",children:[w.estimatedPrice.toLocaleString("ko-KR"),""]}),w.currencyCode&&h.jsxs("span",{className:"text-sm text-gray-500",children:["( ",Bh(w.estimatedPrice,w.currencyCode).toLocaleString()," ",w.currencyCode,")"]})]}),w.memo&&h.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 rounded-lg p-3 mb-3",children:[h.jsx("p",{className:"text-xs text-yellow-700 font-bold mb-1",children:" "}),h.jsx("p",{className:"text-sm text-gray-700",children:w.memo})]}),w.purchasedBy&&h.jsxs("p",{className:"text-sm text-green-600 mb-3",children:[" ",w.purchasedBy,"  "]}),h.jsx("div",{className:"flex gap-2",children:h.jsx("button",{onClick:()=>n(i.id,w.id),className:`flex-1 py-3 rounded-lg transition-colors flex items-center justify-center gap-2 ${w.purchased?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-green-500 text-white hover:bg-green-600"}`,children:w.purchased?h.jsxs(h.Fragment,{children:[h.jsx(ws,{className:"w-5 h-5"}),h.jsx("span",{children:" "})]}):h.jsxs(h.Fragment,{children:[h.jsx(Qi,{className:"w-5 h-5"}),h.jsx("span",{children:"  "})]})})})]})},w.id))})]})]}),h.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 sticky bottom-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-lg",children:""}),h.jsxs("span",{className:"text-2xl text-blue-600",children:[i.subtotal.toLocaleString("ko-KR"),""]})]})})]})]})}function gw(i,r){const n=new Date(i),l=new Date(r).getTime()-n.getTime();return Math.ceil(l/(1e3*60*60*24))+1}function yw({travelInfo:i,shoppingPlan:r,onBack:n,onToggleItem:o}){const l=gw(i.startDate,i.endDate),d=[{day:-7,title:" 1 ",description:"   ",icon:h.jsx(Qi,{className:"w-5 h-5 text-blue-600"}),type:"preparation"},{day:-3,title:" 3 ",description:"  (   )",icon:h.jsx(Oy,{className:"w-5 h-5 text-green-600"}),type:"preparation"},{day:-1,title:" ",description:"   ",icon:h.jsx(ws,{className:"w-5 h-5 text-purple-600"}),type:"preparation"},{day:1,title:"",description:"  ()",icon:h.jsx(nv,{className:"w-5 h-5 text-blue-500"}),type:"shopping",location:r.dutyFree.departure,time:"09:00 - 10:00"},...Object.values(r.cityShopping).map(v=>{const N=i.schedule?.find(E=>E.day===v.day),k=N?` - ${N.location}`:"";return{day:v.day||2,title:`${v.day}${k}`,description:v.location,icon:h.jsx(ps,{className:"w-5 h-5 text-orange-500"}),type:"shopping",location:v,time:v.timing}}),{day:l,title:"",description:"  () -   ",icon:h.jsx(tv,{className:"w-5 h-5 text-blue-500"}),type:"shopping",location:r.dutyFree.arrival,time:"18:00"}].sort((v,N)=>v.day-N.day),p=new Date,m=new Date(i.startDate),y=Math.floor((m.getTime()-p.getTime())/(1e3*60*60*24)),x=y<=0?Math.abs(y)+1:0,w=v=>y>0?v<=-y:v<=x,b=Array.from(new Set(d.map(v=>v.day))).sort((v,N)=>v-N);return h.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col font-sans h-screen overflow-hidden tracking-wide",children:[h.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between shadow-sm z-20 relative flex-shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:n,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors text-gray-600",children:h.jsx(eo,{className:"w-6 h-6"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-bold text-gray-900",children:" "}),h.jsxs("p",{className:"text-xs text-gray-500 font-medium mt-0.5",children:[i.destination,"  ",l," "]})]})]}),h.jsxs("div",{className:"hidden sm:block text-sm font-bold text-blue-600 bg-blue-50 px-4 py-1.5 rounded-full border border-blue-100",children:["D-",y>0?y:"Day"]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:h.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:b.map((v,N)=>{const k=d.filter(F=>F.day===v),E=new Date(m);E.setDate(m.getDate()+(v-1));const D=E.getMonth()+1,L=E.getDate(),I=E.toLocaleDateString("ko-KR",{weekday:"short"}),H=v<1,ne=N===b.length-1;return h.jsxs("div",{className:"flex group/day",children:[h.jsx("div",{className:"w-20 flex-shrink-0 text-right pr-4 pt-2 relative",children:h.jsxs("div",{className:"sticky top-6",children:[h.jsx("div",{className:`text-lg font-black leading-none ${H?"text-orange-500":"text-gray-900"}`,children:v<0?`D${v}`:v===0?"D-Day":`${v}`}),h.jsxs("div",{className:"text-xs text-gray-400 font-semibold mt-1.5 uppercase tracking-wide",children:[D,".",L," ",h.jsx("span",{className:"text-gray-300",children:"|"})," ",I]})]})}),h.jsxs("div",{className:"relative w-8 flex flex-col items-center flex-shrink-0",children:[h.jsx("div",{className:`w-3 h-3 rounded-full border-2 ring-4 ring-gray-50 z-10 ${H?"bg-white border-orange-400":"bg-blue-600 border-blue-600"} mt-3`}),!ne&&h.jsx("div",{className:"absolute top-3 -bottom-8 w-0.5 bg-gray-200"})]}),h.jsx("div",{className:"flex-1 pl-6 pb-12",children:h.jsx("div",{className:"space-y-6",children:k.map((F,W)=>{const ce=w(F.day),ge=F.type==="shopping";return h.jsx("div",{className:"relative group",children:ge&&F.location?h.jsxs("div",{className:`bg-white rounded-2xl border transition-all duration-300 overflow-hidden ${ce?"border-blue-200 shadow-lg shadow-blue-500/10 ring-1 ring-blue-100":"border-gray-100 shadow-sm hover:shadow-md hover:border-gray-200"}`,children:[h.jsx("div",{className:"p-5 border-b border-gray-50 bg-gradient-to-b from-white to-gray-50/50",children:h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("div",{className:"flex flex-col",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h3",{className:"font-bold text-gray-900 text-base",children:F.description}),F.location.id==="departure"&&h.jsx("span",{className:"text-[10px] font-bold bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:""}),F.location.id==="arrival"&&h.jsx("span",{className:"text-[10px] font-bold bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full",children:""})]})}),ce&&F.day===x&&h.jsx("div",{className:"flex items-center gap-1.5 bg-blue-600 text-white text-[10px] font-bold px-2.5 py-1 rounded-full shadow-sm animate-pulse",children:"NOW"})]})}),h.jsx("div",{className:"p-3 bg-white",children:F.location.items.length>0?h.jsxs("div",{className:"space-y-2",children:[F.location.items.map(J=>h.jsxs("div",{onClick:()=>o?.(F.location.id,J.id),className:"flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 transition-colors border border-transparent hover:border-gray-100 group/item cursor-pointer",children:[h.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 transition-colors ${J.purchased?"bg-green-100 text-green-600":"bg-blue-50 text-blue-500 group-hover/item:bg-blue-100"}`,children:J.purchased?h.jsx(Lf,{className:"w-4 h-4"}):h.jsx(ps,{className:"w-4 h-4"})}),h.jsxs("div",{className:"flex flex-col min-w-0",children:[h.jsx("span",{className:`text-sm font-semibold truncate ${J.purchased?"text-gray-400 line-through":"text-gray-800"}`,children:J.product}),J.shopName&&h.jsxs("span",{className:"text-[11px] text-gray-400 truncate flex items-center gap-1",children:[h.jsx(jt,{className:"w-3 h-3"})," ",J.shopName]})]})]}),h.jsx("span",{className:`text-sm font-bold whitespace-nowrap ml-3 ${J.purchased?"text-gray-300":"text-gray-900"}`,children:J.estimatedPrice.toLocaleString()})]},J.id)),h.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-between items-center px-2",children:[h.jsxs("span",{className:"text-xs font-medium text-gray-400",children:[" ",F.location.items.length,""]}),h.jsxs("div",{className:"text-right",children:[h.jsx("span",{className:"text-xs text-gray-500 mr-2",children:" "}),h.jsxs("span",{className:"text-base font-bold text-blue-600",children:[F.location.subtotal.toLocaleString(),""]})]})]})]}):h.jsxs("div",{className:"text-center py-4",children:[h.jsx("div",{className:"w-8 h-8 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-2",children:h.jsx(ps,{className:"w-4 h-4 text-gray-300"})}),h.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"  "})]})})]}):h.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-gray-100 shadow-sm flex items-center gap-5 hover:shadow-md transition-all",children:[h.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-sm ${H?"bg-orange-50 text-orange-500":"bg-blue-50 text-blue-500"}`,children:F.icon}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:F.description}),h.jsx("p",{className:"text-sm text-gray-500 font-medium mt-0.5",children:F.title})]})]})},`${v}-${W}`)})})})]},v)})})})]})}function vw({location:i,onBack:r,onItemPurchase:n}){const[o,l]=te.useState(i.freeTime||60);te.useEffect(()=>{if(o<=0)return;const b=setInterval(()=>{l(v=>Math.max(0,v-1))},6e4);return()=>clearInterval(b)},[o]);const u=i.freeTime||60,d=(u-o)/u*100,p=i.items.filter(b=>b.purchased).length,m=i.items.length,y=()=>o<=15?"text-red-600":o<=30?"text-yellow-600":"text-green-600",x=b=>{const v=Math.floor(b/60),N=b%60;return v>0?`${v} ${N}`:`${N}`},w=[{name:" ",distance:150,time:2,isPurchased:!1},{name:" ",distance:300,time:4,isPurchased:!1},{name:" ",distance:450,time:6,isPurchased:!1}];return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[h.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 p-6 rounded-b-3xl shadow-lg",children:[h.jsxs("button",{onClick:r,className:"flex items-center gap-2 mb-4 hover:opacity-80",children:[h.jsx(eo,{className:"w-5 h-5"}),h.jsx("span",{children:"  "})]}),h.jsxs("div",{className:"text-center mb-4",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full mb-2",children:[h.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),h.jsx("span",{className:"text-sm",children:"LIVE"})]}),h.jsx("h1",{className:"text-2xl mb-1",children:i.location}),h.jsx("p",{className:"text-red-100 text-sm",children:" !"})]}),h.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:`text-5xl mb-2 ${y()}`,children:x(o)}),h.jsx("p",{className:"text-sm text-red-100",children:" "})]}),h.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden mb-2",children:h.jsx("div",{className:`h-full transition-all ${o<=15?"bg-red-500":o<=30?"bg-yellow-500":"bg-green-500"}`,style:{width:`${d}%`}})}),h.jsxs("p",{className:"text-xs text-center text-red-100",children:[d.toFixed(0),"%  "]}),o<=15&&h.jsxs("div",{className:"mt-3 bg-red-500 rounded-lg p-3 text-center animate-pulse",children:[h.jsx(wh,{className:"w-5 h-5 mx-auto mb-1"}),h.jsx("p",{className:"text-sm",children:" 15  !   "})]})]})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h2",{className:"text-lg",children:"  "}),h.jsxs("span",{className:"text-sm",children:[p,"/",m," "]})]}),h.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all",style:{width:`${p/m*100}%`}})})]}),h.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(jt,{className:"w-5 h-5 text-blue-400"}),h.jsx("h2",{className:"text-lg",children:"  "})]}),h.jsxs("div",{className:"relative bg-gray-700 rounded-lg h-48 mb-3 overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full mx-auto mb-2 flex items-center justify-center animate-pulse",children:h.jsx(Xy,{className:"w-8 h-8"})}),h.jsx("p",{className:"text-sm text-gray-300",children:" "})]})}),h.jsx("div",{className:"absolute top-4 right-8",children:h.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:h.jsx(jt,{className:"w-5 h-5"})})}),h.jsx("div",{className:"absolute bottom-8 left-12",children:h.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:h.jsx(jt,{className:"w-5 h-5"})})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"text-sm text-gray-400 mb-2",children:"  "}),w.map((b,v)=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(jt,{className:"w-4 h-4 text-red-400"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm",children:b.name}),h.jsxs("p",{className:"text-xs text-gray-400",children:[b.distance,"m  ( ",b.time,")"]})]})]}),h.jsx("button",{className:"text-xs bg-blue-600 px-3 py-1 rounded-full hover:bg-blue-700",children:" "})]},v))]})]}),h.jsxs("div",{className:"bg-gray-800 rounded-xl p-4",children:[h.jsxs("h2",{className:"text-lg mb-3",children:["    (",m,")"]}),h.jsx("div",{className:"space-y-3",children:i.items.map(b=>h.jsx("div",{className:`p-4 rounded-lg transition-all ${b.purchased?"bg-green-900/30 border border-green-600":"bg-gray-700 border border-gray-600"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.purchased?h.jsx(ws,{className:"w-5 h-5 text-green-400"}):h.jsx(Qi,{className:"w-5 h-5 text-gray-400"}),h.jsx("h3",{className:"text-sm",children:b.product})]}),b.shopName&&h.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mb-1",children:[h.jsx(jt,{className:"w-3 h-3"}),h.jsx("span",{children:b.shopName})]}),h.jsxs("p",{className:"text-sm text-blue-400 mb-1",children:[b.estimatedPrice.toLocaleString("ko-KR"),""]}),b.purchased?h.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-400",children:[h.jsx(ws,{className:"w-3 h-3"}),h.jsx("span",{children:" "})]}):h.jsx("button",{onClick:()=>n(b.id),className:"mt-2 w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"  "})]}),b.priority==="high"&&!b.purchased&&h.jsx("span",{className:"text-xs bg-red-500 px-2 py-1 rounded-full",children:""})]})},b.id))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("button",{className:"bg-blue-600 p-4 rounded-xl hover:bg-blue-700 transition-colors",children:[h.jsx("span",{className:"text-2xl mb-2 block",children:""}),h.jsx("p",{className:"text-sm",children:" "})]}),h.jsxs("button",{className:"bg-purple-600 p-4 rounded-xl hover:bg-purple-700 transition-colors",children:[h.jsx("span",{className:"text-2xl mb-2 block",children:""}),h.jsx("p",{className:"text-sm",children:"  "})]})]}),o<=15&&h.jsxs("div",{className:"bg-red-600 rounded-xl p-4 text-center animate-pulse",children:[h.jsx(wh,{className:"w-8 h-8 mx-auto mb-2"}),h.jsx("h3",{className:"mb-2",children:"   !"}),h.jsxs("p",{className:"text-sm text-red-100 mb-3",children:[x(o),"    "]}),h.jsx("button",{className:"w-full py-2 bg-white text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:"   "})]})]})]})}function ww({onBack:i,onReset:r,onJoinTrip:n}){const o=()=>{confirm("   ?     .")&&r()};return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-b-3xl shadow-lg",children:[h.jsxs("button",{onClick:i,className:"flex items-center gap-2 mb-4 hover:opacity-80",children:[h.jsx(eo,{className:"w-5 h-5"}),h.jsx("span",{children:""})]}),h.jsx("h1",{className:"text-2xl mb-1",children:" "}),h.jsx("p",{className:"text-blue-100",children:"   "})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[h.jsx("h2",{className:"text-lg p-4 border-b border-gray-100",children:" "}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ul,{className:"w-5 h-5 text-gray-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm",children:"  "}),h.jsx("p",{className:"text-xs text-gray-500",children:"    "})]})]}),h.jsxs("label",{className:"relative inline-block w-12 h-6",children:[h.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),h.jsx("div",{className:"w-full h-full bg-gray-300 peer-checked:bg-blue-600 rounded-full transition-colors"}),h.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-6"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ul,{className:"w-5 h-5 text-gray-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm",children:"  "}),h.jsx("p",{className:"text-xs text-gray-500",children:"   "})]})]}),h.jsxs("label",{className:"relative inline-block w-12 h-6",children:[h.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),h.jsx("div",{className:"w-full h-full bg-gray-300 peer-checked:bg-blue-600 rounded-full transition-colors"}),h.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-6"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ul,{className:"w-5 h-5 text-gray-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm",children:"  "}),h.jsx("p",{className:"text-xs text-gray-500",children:" 15  "})]})]}),h.jsxs("label",{className:"relative inline-block w-12 h-6",children:[h.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),h.jsx("div",{className:"w-full h-full bg-gray-300 peer-checked:bg-blue-600 rounded-full transition-colors"}),h.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-6"})]})]})]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[h.jsx("h2",{className:"text-lg p-4 border-b border-gray-100",children:" & "}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("button",{className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(By,{className:"w-5 h-5 text-gray-600"}),h.jsx("span",{className:"text-sm",children:"  "})]}),h.jsx("span",{className:"text-sm text-gray-500",children:" "})]}),h.jsxs("button",{className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx($f,{className:"w-5 h-5 text-gray-600"}),h.jsx("span",{className:"text-sm",children:" "})]}),h.jsx("span",{className:"text-sm text-gray-500",children:"KRW () "})]})]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[h.jsx("h2",{className:"text-lg p-4 border-b border-gray-100",children:" "}),h.jsx("div",{className:"p-4 space-y-4",children:h.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Ll,{className:"w-5 h-5 text-gray-600"}),h.jsx("span",{className:"text-sm",children:"  "})]}),h.jsx("span",{className:"text-sm text-gray-500",children:"ID  "})]})})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[h.jsx("h2",{className:"text-lg p-4 border-b border-gray-100",children:""}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("button",{className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(cl,{className:"w-5 h-5 text-gray-600"}),h.jsx("span",{className:"text-sm",children:""})]}),h.jsx("span",{className:"text-sm text-gray-500",children:""})]}),h.jsxs("button",{className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(cl,{className:"w-5 h-5 text-gray-600"}),h.jsx("span",{className:"text-sm",children:" "})]}),h.jsx("span",{className:"text-sm text-gray-500",children:""})]}),h.jsxs("button",{className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(cl,{className:"w-5 h-5 text-gray-600"}),h.jsx("span",{className:"text-sm",children:" "})]}),h.jsx("span",{className:"text-sm text-gray-500",children:""})]}),h.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[h.jsx("p",{className:"text-sm text-gray-500 text-center",children:" v1.0.0"}),h.jsx("p",{className:"text-xs text-gray-400 text-center mt-1",children:" 2025 TravelCart. All rights reserved."})]})]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border-2 border-red-200",children:[h.jsx("h2",{className:"text-lg p-4 border-b border-red-100 text-red-600",children:" "}),h.jsxs("div",{className:"p-4",children:[h.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 p-3 bg-red-50 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:[h.jsx(Uf,{className:"w-5 h-5"}),h.jsx("span",{children:"  "})]}),h.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"    "})]})]}),h.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-4",children:[h.jsx("h3",{className:"mb-2",children:"  "}),h.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"      !"}),h.jsx("button",{className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:" "})]})]})]})}function xw({isOpen:i,onClose:r,onAdd:n,onEdit:o,onDelete:l,shoppingPlan:u,initialItem:d}){const[p,m]=te.useState(""),[y,x]=te.useState(""),[w,b]=te.useState("departure"),[v,N]=te.useState(""),[k,E]=te.useState("KRW");if(te.useEffect(()=>{i&&(d?(m(d.item.product),x(d.item.estimatedPrice.toLocaleString("ko-KR")),b(d.locationId),N(d.item.memo||""),E(d.item.currencyCode||"KRW")):(m(""),x(""),b("departure"),N(""),E("KRW")))},[i,d]),!i)return null;const D=F=>{if(F.preventDefault(),!p||!y)return;const W=parseInt(y.replace(/,/g,""));let ce=W,ge,J;k!=="KRW"&&(ce=Kf(W,k),ge=W,J=k),d&&o?o(d.locationId,d.item.id,p,ce,w,v,ge,J):n(p,ce,w,v,ge,J),r()},L=()=>{d&&l&&confirm("   ?")&&(l(d.locationId,d.item.id),r())},I=F=>{const W=F.replace(/[^0-9]/g,"");return W?parseInt(W).toLocaleString("ko-KR"):""},H=F=>{x(I(F.target.value))},ne=!!d;return h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:h.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[h.jsxs("div",{className:`p-4 flex items-center justify-between text-white ${ne?"bg-gray-800":"bg-gradient-to-r from-blue-600 to-purple-600"}`,children:[h.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[ne?h.jsx(cv,{className:"w-5 h-5"}):h.jsx(Il,{className:"w-5 h-5"}),ne?" ":"  "]}),h.jsx("button",{onClick:r,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:h.jsx($l,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:D,className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),h.jsx("input",{type:"text",value:p,onChange:F=>m(F.target.value),placeholder:":   ",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!ne})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),h.jsx("input",{type:"text",value:y,onChange:H,placeholder:"150,000",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none",inputMode:"numeric"})]}),h.jsxs("div",{className:"w-24",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),h.jsxs("select",{value:k,onChange:F=>E(F.target.value),className:"w-full p-3 border border-gray-300 rounded-xl bg-white focus:ring-2 focus:ring-blue-500 outline-none",children:[h.jsx("option",{value:"KRW",children:"KRW"}),h.jsx("option",{value:"USD",children:"USD"}),h.jsx("option",{value:"JPY",children:"JPY"}),h.jsx("option",{value:"THB",children:"THB"}),h.jsx("option",{value:"VND",children:"VND"}),h.jsx("option",{value:"EUR",children:"EUR"}),h.jsx("option",{value:"CNY",children:"CNY"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  / "}),h.jsxs("select",{value:w,onChange:F=>b(F.target.value),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all bg-white",children:[h.jsxs("optgroup",{label:"",children:[h.jsxs("option",{value:"departure",children:["   (",u.dutyFree.departure.location,")"]}),h.jsxs("option",{value:"arrival",children:["   (",u.dutyFree.arrival.location,")"]})]}),h.jsx("optgroup",{label:"  ()",children:Object.values(u.cityShopping).sort((F,W)=>(F.day||0)-(W.day||0)).map(F=>h.jsxs("option",{value:F.id,children:[" ",F.day," - ",F.location]},F.id))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" ()"}),h.jsx("textarea",{value:v,onChange:F=>N(F.target.value),placeholder:", ,    ",className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all resize-none h-24"})]}),h.jsxs("div",{className:"pt-2 flex gap-3",children:[ne&&h.jsxs("button",{type:"button",onClick:L,className:"flex-1 bg-red-100 text-red-600 py-3.5 rounded-xl font-medium hover:bg-red-200 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[h.jsx(Uf,{className:"w-5 h-5"}),""]}),h.jsx("button",{type:"submit",disabled:!p||!y,className:`flex-[2] text-white py-3.5 rounded-xl font-medium active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg ${ne?"bg-gray-800 hover:bg-gray-900 shadow-gray-200":"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}`,children:ne?" ":""})]})]})]})})}function _w(i){const[r,n]=te.useState(i);te.useEffect(()=>{},[i]);const o=async m=>{n(m),localStorage.setItem("shoppingPlan",JSON.stringify(m));const{data:{session:y}}=await et.auth.getSession();if(y?.user){const{data:x}=await et.from("trips").select("id").eq("user_id",y.user.id).order("created_at",{ascending:!1}).limit(1);x&&x[0]&&await Wf(x[0].id,m)}};return{shoppingPlan:r,setShoppingPlan:n,handleItemPurchase:async(m,y,x)=>{if(!r)return;const w=JSON.parse(JSON.stringify(r)),b=N=>{const k=N.find(E=>E.id===y);return k?(k.purchased=!k.purchased,x&&(k.purchasedBy=x),ow(k.id,k.purchased,k.purchasedBy),!0):!1};let v=!1;if(m==="departure"?v=b(w.dutyFree.departure.items):m==="arrival"?v=b(w.dutyFree.arrival.items):w.cityShopping[m]&&(v=b(w.cityShopping[m].items)),!v&&((b(w.dutyFree.departure.items)||b(w.dutyFree.arrival.items))&&(v=!0),!v)){for(const N of Object.values(w.cityShopping))if(b(N.items)){v=!0;break}}v?(n(w),localStorage.setItem("shoppingPlan",JSON.stringify(w))):console.warn(`Item ${y} not found in plan.`)},handleAddItem:async(m,y,x,w,b,v)=>{if(!r)return;const N={id:crypto.randomUUID(),category:"",product:m,estimatedPrice:y,localPrice:b,currencyCode:v,reason:"  ",priority:"medium",purchased:!1,memo:w,isRecommended:!1},k=JSON.parse(JSON.stringify(r));let E;x==="departure"?E=k.dutyFree.departure:x==="arrival"?E=k.dutyFree.arrival:E=k.cityShopping[x],E&&(E.items.push(N),E.subtotal+=y,k.budgetSummary.total+=y,k.budgetSummary.remaining-=y,x==="departure"||x==="arrival"?k.budgetSummary.dutyFree+=y:k.budgetSummary.cityShopping+=y,await o(k))},handleEditItem:async(m,y,x,w,b,v,N,k)=>{if(!r)return;const E=JSON.parse(JSON.stringify(r));let D;if(m==="departure"?D=E.dutyFree.departure:m==="arrival"?D=E.dutyFree.arrival:D=E.cityShopping[m],!D)return;const L=D.items.findIndex(ne=>ne.id===y);if(L===-1)return;const I=D.items[L];D.items.splice(L,1),D.subtotal-=I.estimatedPrice,E.budgetSummary.total-=I.estimatedPrice,E.budgetSummary.remaining+=I.estimatedPrice,m==="departure"||m==="arrival"?E.budgetSummary.dutyFree-=I.estimatedPrice:E.budgetSummary.cityShopping-=I.estimatedPrice;let H;if(b==="departure"?H=E.dutyFree.departure:b==="arrival"?H=E.dutyFree.arrival:H=E.cityShopping[b],H){const ne={...I,product:x,estimatedPrice:w,memo:v,localPrice:N,currencyCode:k};H.items.push(ne),H.subtotal+=w,E.budgetSummary.total+=w,E.budgetSummary.remaining-=w,b==="departure"||b==="arrival"?E.budgetSummary.dutyFree+=w:E.budgetSummary.cityShopping+=w}await o(E)},handleDeleteItem:async(m,y)=>{if(!r)return;const x=JSON.parse(JSON.stringify(r));let w;if(m==="departure"?w=x.dutyFree.departure:m==="arrival"?w=x.dutyFree.arrival:w=x.cityShopping[m],!w)return;const b=w.items.findIndex(N=>N.id===y);if(b===-1)return;const v=w.items[b];w.items.splice(b,1),w.subtotal-=v.estimatedPrice,x.budgetSummary.total-=v.estimatedPrice,x.budgetSummary.remaining+=v.estimatedPrice,m==="departure"||m==="arrival"?x.budgetSummary.dutyFree-=v.estimatedPrice:x.budgetSummary.cityShopping-=v.estimatedPrice,await o(x)}}}function bw(){const[i,r]=te.useState("onboarding"),[n,o]=te.useState(null),{shoppingPlan:l,setShoppingPlan:u,handleItemPurchase:d,handleAddItem:p,handleEditItem:m,handleDeleteItem:y}=_w(null),[x,w]=te.useState(null),[b,v]=te.useState(!1),[N,k]=te.useState(null);te.useEffect(()=>{Jf(),et.auth.getSession().then(({data:{session:ue}})=>{ue||L()}).catch(ue=>{console.warn("Session check failed (storage blocked?):",ue)});const{data:{subscription:J}}=et.auth.onAuthStateChange((ue,se)=>{});return()=>J.unsubscribe()},[]),te.useEffect(()=>{const J=se=>{se.preventDefault()},ue=se=>{se.preventDefault()};return window.addEventListener("dragover",J),window.addEventListener("drop",ue),()=>{window.removeEventListener("dragover",J),window.removeEventListener("drop",ue)}},[]);const[E,D]=te.useState(0);te.useEffect(()=>{const J=()=>{D(ue=>ue+1),u(ue=>{if(!ue)return null;const se=JSON.parse(JSON.stringify(ue)),z=pe=>{let Q=0;pe.items.forEach(A=>{A.localPrice&&A.currencyCode&&(A.estimatedPrice=Kf(A.localPrice,A.currencyCode)),Q+=A.estimatedPrice}),pe.subtotal=Q};z(se.dutyFree.departure),z(se.dutyFree.arrival),Object.values(se.cityShopping).forEach(pe=>{z(pe)});const ae=se.dutyFree.departure.subtotal+se.dutyFree.arrival.subtotal,he=Object.values(se.cityShopping).reduce((pe,Q)=>pe+Q.subtotal,0);return se.budgetSummary={dutyFree:ae,cityShopping:he,total:ae+he,remaining:n?n.budget-(ae+he):0},se})};return window.addEventListener("exchange-rates-updated",J),()=>window.removeEventListener("exchange-rates-updated",J)},[n]);async function L(){try{const{error:J}=await et.auth.signInAnonymously();J&&(console.error("Error signing in anonymously:",J),alert(`  : ${J.message}
(Supabase  'Allow new users to sign up'   )`))}catch(J){console.error("Auth error:",J)}}const I=(J,ue)=>{o(J),u(ue);try{localStorage.setItem("travelInfo",JSON.stringify(J)),localStorage.setItem("shoppingPlan",JSON.stringify(ue))}catch(se){console.warn("LocalStorage access denied:",se)}r("home")},H=J=>{w(J),r("detail")};te.useEffect(()=>{if(!n||!l)return;(async()=>{const{data:{session:ue}}=await et.auth.getSession();if(!ue)return;const{data:se}=await et.from("trips").select("id").eq("user_id",ue.user.id).order("created_at",{ascending:!1}).limit(1);if(se&&se[0]){const z=se[0].id,ae=et.channel(`trip-${z}`).on("postgres_changes",{event:"*",schema:"public",table:"shopping_items",filter:`trip_id=eq.${z}`},he=>{if(he.eventType==="UPDATE"&&l){const pe=he.new;u(Q=>{if(!Q)return null;const A={...Q},Y=V=>{const P=V.findIndex(R=>R.id===pe.id||R.product===pe.product_name);P!==-1&&(V[P]={...V[P],purchased:pe.purchased,purchasedBy:pe.purchased_by})};return Y(A.dutyFree.departure.items),Y(A.dutyFree.arrival.items),Object.values(A.cityShopping).forEach(V=>Y(V.items)),A})}}).subscribe();return()=>{ae.unsubscribe()}}})()},[n]),te.useEffect(()=>{if(l&&x){let J;if(x.id==="departure")J=l.dutyFree.departure;else if(x.id==="arrival")J=l.dutyFree.arrival;else if(x.id.startsWith("merged_")){const ue=x.id.replace("merged_",""),se=Object.values(l.cityShopping).filter(z=>z.location.split("(")[0].trim()===ue);if(se.length>0){const z=se.map(Q=>Q.day).filter(Q=>Q!==void 0).sort((Q,A)=>Q-A),he=(Q=>{if(Q.length===0)return"";const A=[...new Set(Q)].sort((R,fe)=>R-fe),Y=[];let V=A[0],P=A[0];for(let R=1;R<A.length;R++)A[R]===P+1||(Y.push(V===P?`${V}`:`${V} ~ ${P}`),V=A[R]),P=A[R];return Y.push(V===P?`${V}`:`${V} ~ ${P}`),Y.join(", ")})(z),pe=se.reduce((Q,A)=>Q+A.subtotal,0);J={id:`merged_${ue}`,location:ue,day:z[0],timing:`  (${he})`,items:se.flatMap(Q=>Q.items),subtotal:pe,tips:Array.from(new Set(se.flatMap(Q=>Q.tips||[]))),route:se.map(Q=>Q.route).filter(Boolean).join(" / "),warnings:Array.from(new Set(se.flatMap(Q=>Q.warnings||[])))}}}else J=l.cityShopping[x.id];J&&w(J)}},[l]);const ne=J=>{w(J),r("live")},F=()=>{localStorage.clear(),o(null),u(null),r("onboarding")},W=async()=>{const J=prompt("  ID :");if(J)try{const{data:{session:ue}}=await et.auth.getSession();if(!ue)return;await aw(J,ue.user.id)&&(alert(" !    ."),window.location.reload())}catch(ue){console.error("Failed to join trip:",ue),alert("  . ID .")}},ce=J=>{if(l){if(l.dutyFree.departure.items.some(ue=>ue.id===J))return"departure";if(l.dutyFree.arrival.items.some(ue=>ue.id===J))return"arrival";for(const[ue,se]of Object.entries(l.cityShopping))if(se.items.some(z=>z.id===J))return ue}},ge=(J,ue)=>{const se=ue.startsWith("merged_")?ce(J.id):ue;se?(k({item:J,locationId:se}),v(!0)):console.error("Could not find location for item:",J.id)};return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i==="onboarding"&&h.jsx(dw,{onComplete:I}),i==="home"&&n&&l&&h.jsx(pw,{travelInfo:n,shoppingPlan:l,onLocationSelect:H,onNavigate:r,onAddItem:()=>{k(null),v(!0)}}),i==="detail"&&x&&l&&h.jsx(mw,{location:x,onBack:()=>r("home"),onItemPurchase:d,onStartLiveMode:()=>ne(x),onEditItem:J=>ge(J,x.id),onAddItem:()=>{k(null),v(!0)}}),i==="timeline"&&n&&l&&h.jsx(yw,{travelInfo:n,shoppingPlan:l,onBack:()=>r("home")}),i==="live"&&x&&h.jsx(vw,{location:x,onBack:()=>{r("detail")},onItemPurchase:J=>d(x.id,J)}),i==="settings"&&h.jsx(ww,{onBack:()=>r("home"),onReset:F,onJoinTrip:W}),l&&h.jsx(xw,{isOpen:b,onClose:()=>{v(!1),k(null)},onAdd:p,onEdit:m,onDelete:y,shoppingPlan:l,initialItem:N})]})}tg.createRoot(document.getElementById("root")).render(h.jsx(bw,{}));
